{"version":3,"sources":["assets/audio/as.mp3","actions/index.ts","reducers/audio.ts","reducers/modalReducer.ts","reducers/index.ts","reducers/utilsReducer.ts","hooks/api/selectors.ts","hooks/api/useScreen.ts","helpers/getParams.ts","const/endpoints.ts","queries/getUserData.ts","queries/editUserAvatar.ts","hooks/useActionsWithFetchingState.js","hooks/api/useUserData.ts","const/routers.tsx","assets/img/user.svg","helpers/token.tsx","components/Menu/components/WebMenu.tsx","components/Menu/components/MobileMenu.tsx","components/Menu/index.tsx","components/Language/index.tsx","assets/img/logo.svg","queries/getBooks.ts","queries/getBookLike.ts","queries/getBookComment.ts","queries/addBookComment.ts","hooks/api/useBooks.ts","components/Header/index.tsx","redux/action/audioPlayer.ts","redux/selectors/index.tsx","components/AudioPlayer/index.tsx","components/Loader.tsx","components/Comment/index.tsx","hooks/useModal.ts","components/Modal/index.tsx","components/Layout.tsx","components/Block.tsx","hooks/api/useSocketChat.ts","components/Sidebar/index.tsx","assets/img/author.svg","components/AuthorBlock/index.tsx","assets/img/play.svg","assets/img/stop.svg","components/button/ButtonPlay/index.tsx","assets/img/comment.svg","assets/img/like-up.svg","assets/img/like.svg","helpers/format.ts","components/Article.tsx","page/Home/BooksScreen.tsx","page/Home/index.tsx","components/input/FieldAuth.tsx","helpers/validators.ts","queries/getAuth.ts","hooks/api/useAuth.ts","page/Signin/index.tsx","queries/getSignUp.ts","hooks/api/useSignUp.ts","page/Signup/index.tsx","page/Profile/CardBook.tsx","page/Profile/index.tsx","components/input/TextArea.tsx","page/AddBook/index.tsx","components/AppRouter/PublicRoute.tsx","components/AppRouter/PrivateRoute.tsx","components/AppRouter/index.tsx","settings.ts","middlewares/requestSuccessMiddleware.ts","middlewares/requestFailureMiddleware.ts","middlewares/requestStartMiddleware.ts","middlewares/authTokenMiddleware.ts","configureStore.ts","localization/index.ts","App.tsx","serviceWorker.js","index.js"],"names":["SET_MODAL","UPDATE_UTILS","updateUtils","payload","type","initialState","id","item","isPlay","show","loader","modalReducer","state","action","getQueries","queries","getEntities","entities","rootReducer","combineReducers","entitiesReducer","queriesReducer","utils","modal","audio","produce","draft","getSimpleResult","initialValue","resultKey","objectSelector","arraySelector","modalSelector","utilsSelector","getUtils","initialScreen","width","height","useAuth","selector","useCallback","screenData","dispatch","useDispatch","data","useSelector","actionWithoutIsFetching","useMemo","bindActionCreators","setScreenData","body","Object","keys","reduce","accumulator","value","host","params","getParams","getUserData","successCallback","errorCallback","requestAsync","url","endpoints","transform","user","_id","name","fullname","avatar","queryKey","meta","authToken","options","method","headers","Accept","update","_prevEntities","newEntities","editUserAvatar","file","response","wrapActionsWithLoadState","actions","isFetchingDispatch","acc","A","args","withFetching","then","res","isFetchingReducer","actionCreators","reducer","initialReducerState","useReducer","isFetchingState","actionsWithIsFetching","useUserData","userData","logout","updateEntities","updateAvatar","prev","useActionsWithFetchingState","getBase","getProfile","getSignin","getSignup","getAddBook","TOKEN","LANGUAGE","setToken","localStorage","setItem","getToken","getItem","removeToken","removeItem","getLanguage","WebMenu","isAuth","t","useTranslation","logOut","React","overlay","Item","className","to","routers","onClick","danger","placement","size","icon","src","userIcon","alt","memo","MobileMenu","block","Menu","useScreen","isShowMenuMobile","Language","useState","active","setActive","i18n","changeLanguage","lang","Container","styled","ul","li","css","getBooks","getBookLike","checked","addBookComment","postData","initialRequestBookParams","page","search","booksData","bookComments","requestBookParams","getBookComment","setComment","newComment","setRequestBookParams","Search","Input","useStyles","createUseStyles","header","position","top","left","right","zIndex","backgroundColor","boxShadow","content","display","alignItems","padding","logo","nav","marginLeft","Header","history","useHistory","styles","globalStyles","useGlobalStyles","useBooks","valueForm","setValueForm","container","logoIcon","placeholder","onSearch","trim","push","onChange","event","target","enterButton","Actions","getAudioId","getPlay","getAudioSrc","AudioPlayer","myPlayer","useRef","audioSrc","useEffect","current","play","pause","handleClick","autoPlay","ref","onPlay","onPause","autoPlayAfterSrcChange","Loader","style","CommentBase","text","author","likes","setLikes","dislikes","setDislikes","setAction","title","createElement","LikeFilled","LikeOutlined","DislikeFilled","DislikeOutlined","useModal","modalData","setModal","minHeight","flexDirection","justifyContent","comment","maxHeight","overflowX","borderRadius","background","form","marginTop","Modal","setValue","onSubmit","preventDefault","bookId","visible","onOk","onCancel","footer","map","Comment","e","htmlType","textAlign","paddingTop","MyLayout","children","appLaunch","setAppLaunch","isAudio","a","wrapper","Block","margin","socket","io","useSocketChat","messages","setMessages","addMessage","message","obj","token","emit","on","msg","concat","axios","get","TextArea","sidebar","minWidth","maxWidth","fontSize","wrap","main","overflowY","Sidebar","formValue","setFormValue","myRef","scrollTo","index","autoSize","minRows","maxRows","AuthorBlock","props","classNames","authorIcon","pathMp3","require","ButtonPlay","audioPlayerId","default","stopIcon","playIcon","formatStringEllipsis","length","slice","article","transition","color","articleLeft","overflow","articleImage","description","paddingLeft","marginBottom","center","likeImage","cursor","fontWeight","textOverflow","Article","imgUrl","comments","like","setLike","likeHandler","status","likeIcon","likeUpIcon","valueStyle","whiteSpace","count","prefix","commentIcon","error","BooksScreen","getBooksIsFetching","searchValue","location","parsString","queryString","parse","parseNumbers","parseBooleans","onChangePage","valuePage","books","book","total","defaultCurrent","defaultPageSize","home","paddingRight","Home","FieldAuth","handleChange","handleBlur","validateStatus","errorText","undefined","help","hasFeedback","onBlur","emailValidator","email","test","getAuth","password","authData","LoginForm","getAuthIsFetching","getUserDataIsFetching","formaData","setFormData","isValid","errors","setErrors","isValidEmail","isButtonDisabled","values","some","handleSubmit","entries","key","jwtToken","disabled","getSingUp","password_2","useData","useSignUp","getSignUp","RegisterForm","getSignUpIsFetching","setError","passwordEquality","CardBook","Title","Typography","Profile","files","formData","FormData","append","level","InputText","label","styleProp","textError","cn","initFormData","AddBook","buttonDisabled","setButtonDisabled","PublicRoute","Component","component","rest","exact","path","render","PrivateRoute","AppRouters","Layout","fallback","Signin","Signup","StalerScreen","resizeHandler","screenDimensions","window","innerWidth","innerHeight","addEventListener","removeEventListener","next","actionTypes","REQUEST_SUCCESS","showSuccess","toast","responseBody","REQUEST_FAILURE","withoutErrorText","REQUEST_ASYNC","MUTATE_ASYNC","callAPI","force","_","isEqual","userToken","Authorization","store","customMiddlewares","authTokenMiddleware","requestStartMiddleware","requestSuccessMiddleware","requestFailureMiddleware","queryMiddleware","superagentInterface","middlewares","applyMiddleware","createStore","configurationStore","use","backend","LanguageDetector","initReactI18next","init","lng","fallbackLng","debug","process","resources","en","translation","ru","detection","order","caches","interpolation","escapeValue","boxSizing","fontFamily","h1","h2","fontStyle","lineHeight","h3","h4","textDecoration","outline","button","border","input","textarea","App","queriesSelector","AppRouter","Boolean","hostname","match","ReactDOM","document","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.a63e3f49.chunk.js","sourcesContent":["export default __webpack_public_path__ + \"static/media/as.75695496.mp3\";","export const SET_PARAMS_QUERY_BOOKS = 'SET_PARAMS_QUERY_BOOKS';\r\nexport const SET_MODAL = 'SET_MODAL';\r\nexport const UPDATE_UTILS = 'UPDATE_UTILS';\r\n\r\nexport const setParamsQueryBooks = (params: object) => ({\r\n  type: SET_PARAMS_QUERY_BOOKS,\r\n  payload: params,\r\n});\r\n\r\nexport const setModal = (params: object) => ({\r\n  type: SET_MODAL,\r\n  payload: params,\r\n});\r\n\r\nexport const updateUtils = (payload: object) => ({\r\n  type: UPDATE_UTILS,\r\n  payload,\r\n});\r\n","import produce from 'immer';\r\n\r\ntype InitialStateType = typeof initialState;\r\n\r\nconst initialState = {\r\n  id: '',\r\n  item: '',\r\n  isPlay: false,\r\n};\r\n\r\nexport default (state = initialState, action: any): InitialStateType =>\r\n  produce(state, (draft) => {\r\n    switch (action.type) {\r\n      case 'AUDIO@SET_ID':\r\n        draft.id = action.payload;\r\n        break;\r\n      case 'AUDIO@SET_ITEM':\r\n        draft.item = action.payload;\r\n        break;\r\n      case 'AUDIO@IS_PLAY':\r\n        draft.isPlay = action.payload;\r\n        break;\r\n      default:\r\n    }\r\n  });\r\n","import { SET_MODAL } from 'actions';\r\n\r\ntype initialStateType = typeof initialState;\r\nconst initialState = {\r\n  show: false,\r\n  loader: false,\r\n};\r\n\r\nconst modalReducer = (state = initialState, action: { type: string; payload: object }): initialStateType => {\r\n  switch (action.type) {\r\n    case SET_MODAL:\r\n      return {\r\n        ...state,\r\n        ...action.payload,\r\n      };\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\nexport default modalReducer;\r\n","import { combineReducers } from 'redux';\r\nimport { entitiesReducer, queriesReducer, QueriesSelector, EntitiesSelector, EntitiesState } from 'redux-query';\r\nimport audioReducer from './audio';\r\nimport modalReducer from './modalReducer';\r\nimport utilsReducer from './utilsReducer';\r\n\r\nexport const getQueries: QueriesSelector<StateType> = (state: StateType) => state.queries;\r\nexport const getEntities: EntitiesSelector<EntitiesState, StateType> = (state: StateType) => state.entities;\r\nexport const getUtils: any = (state: any) => state.utils;\r\n\r\nconst rootReducer = combineReducers({\r\n  entities: entitiesReducer,\r\n  queries: queriesReducer,\r\n  utils: utilsReducer,\r\n  modal: modalReducer,\r\n  audio: audioReducer,\r\n});\r\n\r\nexport type StateType = ReturnType<typeof rootReducer>;\r\n\r\nexport default rootReducer;\r\n","import { UPDATE_UTILS } from 'actions';\r\n\r\nexport default (state = {}, action: { type: string; payload: object }) => {\r\n  if (action.type === UPDATE_UTILS) {\r\n    return {\r\n      ...state,\r\n      ...action.payload,\r\n    };\r\n  }\r\n  return state;\r\n};\r\n","import { getEntities, StateType, getUtils } from 'reducers';\r\n\r\nconst getSimpleResult = (initialValue: object) => (state: StateType, resultKey: string) =>\r\n  getEntities(state)[resultKey] ?? initialValue;\r\n\r\nexport const objectSelector = getSimpleResult({});\r\nexport const arraySelector = getSimpleResult([]);\r\n\r\nexport const modalSelector = (state: StateType) => state.modal;\r\n\r\nexport const utilsSelector = (state: object, resultKey: string, initialValue?: any) =>\r\n  getUtils(state)[resultKey] ?? initialValue;\r\n","import { useCallback, useMemo } from 'react';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { bindActionCreators } from 'redux';\r\nimport { updateUtils } from 'actions';\r\nimport { utilsSelector } from './selectors';\r\n\r\nexport type ScreenType = {\r\n  width: number;\r\n  height: number;\r\n};\r\nconst initialScreen: ScreenType = {\r\n  width: 0,\r\n  height: 0,\r\n};\r\n\r\nconst useAuth = () => {\r\n  const selector = useCallback(\r\n    (state) => ({\r\n      screenData: utilsSelector(state, 'screenData', initialScreen),\r\n    }),\r\n    [],\r\n  );\r\n\r\n  const dispatch = useDispatch();\r\n  const data = useSelector(selector);\r\n\r\n  const actionWithoutIsFetching = useMemo(\r\n    () =>\r\n      bindActionCreators(\r\n        {\r\n          setScreenData: (screenData: ScreenType) => updateUtils({ screenData }),\r\n        },\r\n        dispatch,\r\n      ),\r\n    [dispatch],\r\n  );\r\n\r\n  return {\r\n    ...data,\r\n    ...actionWithoutIsFetching,\r\n  };\r\n};\r\n\r\nexport default useAuth;\r\n","export default (body: object): string => {\r\n  if (typeof body !== 'object') {\r\n    return '';\r\n  }\r\n\r\n  return Object.keys(body).reduce((accumulator, item) => {\r\n    if (!body[item]) {\r\n      return accumulator;\r\n    }\r\n    const value = body[item];\r\n\r\n    return `${accumulator}${accumulator === '' ? '?' : '&'}${item}=${value}`;\r\n  }, '');\r\n};\r\n","import getParams from 'helpers/getParams';\r\n\r\nconst host = process.env.REACT_APP_BASE_URL || 'http://localhost:3000';\r\nconst signIn = 'auth/signin';\r\nconst signUp = 'auth/signup';\r\nconst user = 'auth/user';\r\n\r\nexport default {\r\n  getAuthUrl: (): string => `${host}/${signIn}`,\r\n  getSingUpUrl: (): string => `${host}/${signUp}`,\r\n  getUserUrl: (): string => `${host}/${user}`,\r\n  getBooksUrl: (params: object): string => `${host}/book${getParams(params)}`,\r\n  getBookCommentUrl: (): string => `${host}/book/comment`,\r\n  getBookAddCommentUrl: (): string => `${host}/book/addcomment`,\r\n  getBookLikeUrl: (): string => `${host}/book/like`,\r\n  getUserAvatarUrl: (): string => `${host}/auth/photo`,\r\n};\r\n","import endpoints from 'const/endpoints';\r\nimport { requestAsync } from 'redux-query';\r\nimport { IQueriesType } from './type';\r\n\r\nconst getUserData = ({ resultKey = 'userData', successCallback, errorCallback }: IQueriesType) =>\r\n  requestAsync({\r\n    url: endpoints.getUserUrl(),\r\n    transform: ({ user }) => ({\r\n      // eslint-disable-next-line no-underscore-dangle\r\n      [resultKey]: { id: user._id, name: user.fullname, avatar: user.avatar },\r\n    }),\r\n    queryKey: endpoints.getUserUrl(),\r\n    meta: {\r\n      authToken: true,\r\n      successCallback,\r\n      errorCallback,\r\n    },\r\n    options: {\r\n      method: 'GET',\r\n      headers: {\r\n        Accept: 'application/json',\r\n      },\r\n    },\r\n    update: {\r\n      [resultKey]: (_prevEntities: any, newEntities: any) => newEntities,\r\n    },\r\n  });\r\n\r\nexport default getUserData;\r\n","import endpoints from 'const/endpoints';\r\nimport { requestAsync } from 'redux-query';\r\nimport { IQueriesType } from './type';\r\n\r\nexport interface IGetUserAvatarParams extends IQueriesType {\r\n  file: any;\r\n}\r\n\r\nconst editUserAvatar = ({ file, resultKey = 'userAvatar', successCallback, errorCallback }: IGetUserAvatarParams) =>\r\n  requestAsync({\r\n    url: endpoints.getUserAvatarUrl(),\r\n    transform: (response) => ({\r\n      [resultKey]: response,\r\n    }),\r\n    queryKey: endpoints.getUserAvatarUrl(),\r\n    body: file,\r\n    meta: {\r\n      authToken: true,\r\n      successCallback,\r\n      errorCallback,\r\n    },\r\n    options: {\r\n      method: 'POST',\r\n      headers: {\r\n        Accept: 'multipart/form-data',\r\n      },\r\n    },\r\n    update: {\r\n      [resultKey]: (_prevEntities: any, newEntities: any) => newEntities,\r\n    },\r\n  });\r\n\r\nexport default editUserAvatar;\r\n","import { useMemo, useReducer } from 'react';\r\nimport { bindActionCreators } from 'redux';\r\n\r\nconst wrapActionsWithLoadState = (actions, isFetchingDispatch) =>\r\n  Object.keys(actions).reduce(\r\n    (acc, A) => ({\r\n      ...acc,\r\n      [A]: (args, { withFetching = true } = {}) => {\r\n        if (withFetching) {\r\n          isFetchingDispatch({ type: A, payload: true });\r\n        }\r\n        return actions[A](args).then((res) => {\r\n          if (withFetching) {\r\n            isFetchingDispatch({ type: A, payload: false });\r\n          }\r\n          return res;\r\n        });\r\n      },\r\n    }),\r\n    actions,\r\n  );\r\n\r\nconst isFetchingReducer = (state, action) => ({\r\n  ...state,\r\n  [`${[action.type]}IsFetching`]: action.payload,\r\n});\r\n\r\nexport default (actionCreators, dispatch, { reducer = isFetchingReducer, initialReducerState = {} } = {}) => {\r\n  const actions = useMemo(() => bindActionCreators(actionCreators, dispatch), [actionCreators, dispatch]);\r\n\r\n  const [isFetchingState, isFetchingDispatch] = useReducer(reducer, initialReducerState);\r\n\r\n  const actionsWithIsFetching = useMemo(\r\n    () => wrapActionsWithLoadState(actions, isFetchingDispatch),\r\n    [actions, isFetchingDispatch],\r\n  );\r\n\r\n  return [actionsWithIsFetching, isFetchingState];\r\n};\r\n","import { useCallback, useMemo } from 'react';\r\nimport { updateEntities } from 'redux-query';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport getUserData from 'queries/getUserData';\r\nimport editUserAvatar from 'queries/editUserAvatar';\r\nimport { bindActionCreators } from 'redux';\r\nimport useActionsWithFetchingState from '../useActionsWithFetchingState';\r\nimport { objectSelector } from './selectors';\r\n\r\nconst useUserData = () => {\r\n  const selector = useCallback(\r\n    (state) => ({\r\n      userData: objectSelector(state, 'userData'),\r\n    }),\r\n    [],\r\n  );\r\n\r\n  const dispatch = useDispatch();\r\n  const data = useSelector(selector);\r\n\r\n  const actionCreators = useMemo(\r\n    () => ({\r\n      getUserData,\r\n      editUserAvatar,\r\n    }),\r\n    [],\r\n  );\r\n\r\n  const actionWithoutIsFetching = useMemo(\r\n    () =>\r\n      bindActionCreators(\r\n        {\r\n          logout: () =>\r\n            updateEntities({\r\n              userData: () => ({}),\r\n            }),\r\n          updateAvatar: (avatar) =>\r\n            updateEntities({\r\n              userData: (prev: object) => ({ ...prev, avatar }),\r\n            }),\r\n        },\r\n        dispatch,\r\n      ),\r\n    [dispatch],\r\n  );\r\n\r\n  const [actions, isFetchingState] = useActionsWithFetchingState(actionCreators, dispatch);\r\n  return {\r\n    ...data,\r\n    ...actions,\r\n    ...isFetchingState,\r\n    ...actionWithoutIsFetching,\r\n  };\r\n};\r\n\r\nexport default useUserData;\r\n","const base = '/';\r\nconst profile = '/profile';\r\nconst signin = '/signin';\r\nconst signup = '/signup';\r\nconst addBook = '/add';\r\n\r\nexport default {\r\n  getBase: (): string => base,\r\n  getProfile: (): string => profile,\r\n  getSignin: (): string => signin,\r\n  getSignup: (): string => signup,\r\n  getAddBook: (): string => addBook,\r\n};\r\n","export default __webpack_public_path__ + \"static/media/user.4a895b67.svg\";","const TOKEN = 'X-AuthToken';\r\nconst USER_NAME = 'name';\r\nconst LANGUAGE = 'i18nextLng';\r\n\r\nconst setToken = (value: string) => localStorage.setItem(TOKEN, value);\r\nconst getToken = () => localStorage.getItem(TOKEN);\r\nconst removeToken = () => localStorage.removeItem(TOKEN);\r\n\r\nconst setUserName = (value: string) => localStorage.setItem(USER_NAME, value);\r\nconst getUserName = () => localStorage.getItem(USER_NAME);\r\nconst removeUsername = () => localStorage.removeItem(USER_NAME);\r\n\r\nconst setLanguage = (value: string) => localStorage.setItem(LANGUAGE, value);\r\nconst getLanguage = () => localStorage.getItem(LANGUAGE);\r\nconst removeLanguage = () => localStorage.getItem(LANGUAGE);\r\n\r\nexport {\r\n  setToken,\r\n  getToken,\r\n  removeToken,\r\n  setUserName,\r\n  getUserName,\r\n  removeUsername,\r\n  setLanguage,\r\n  getLanguage,\r\n  removeLanguage,\r\n};\r\n","/*eslint-disable */\r\nimport React from 'react';\r\nimport { Menu as MenuAntd, Dropdown, Avatar, Button } from 'antd';\r\nimport { Link } from 'react-router-dom';\r\nimport { MenuProps } from 'components/Menu';\r\nimport routers from 'const/routers';\r\n\r\nimport userIcon from 'assets/img/user.svg';\r\nimport { useTranslation } from 'react-i18next';\r\nimport { removeToken } from 'helpers/token';\r\n\r\nconst WebMenu: React.FC<MenuProps> = ({ isAuth, avatar, logout }) => {\r\n  const { t } = useTranslation();\r\n  const logOut = React.useCallback(() => {\r\n    removeToken();\r\n    logout();\r\n  }, [logout]);\r\n  return (\r\n    <>\r\n      {!isAuth ? (\r\n        <>\r\n          <Link to={routers.getSignin()}>\r\n            <Button type=\"primary\">{t('auth.button.signIn')}</Button>\r\n          </Link>\r\n          <Link to={routers.getSignup}>\r\n            <Button type=\"primary\">{t('auth.button.registration')}</Button>\r\n          </Link>\r\n        </>\r\n      ) : (\r\n        <Dropdown\r\n          overlay={\r\n            <MenuAntd>\r\n              <MenuAntd.Item>\r\n                <Link className=\"nav-link\" to={routers.getAddBook()}>\r\n                  {t('menu.addBook')}\r\n                </Link>\r\n              </MenuAntd.Item>\r\n              <MenuAntd.Item>\r\n                <Link to={routers.getProfile()}>{t('menu.profile')}</Link>\r\n              </MenuAntd.Item>\r\n              <MenuAntd.Item onClick={logOut} danger>\r\n                {t('menu.logout')}\r\n              </MenuAntd.Item>\r\n            </MenuAntd>\r\n          }\r\n          placement=\"bottomRight\"\r\n        >\r\n          <Avatar className=\"avatar\" size=\"large\" icon={<img src={avatar || userIcon} alt=\"UserAvatar\" />} />\r\n        </Dropdown>\r\n      )}\r\n    </>\r\n  );\r\n};\r\n\r\nexport default React.memo(WebMenu);\r\n","/*eslint-disable */\r\nimport React, { useCallback } from 'react';\r\nimport { Menu as MenuAntd, Dropdown, Avatar, Button } from 'antd';\r\nimport { useDispatch } from 'react-redux';\r\nimport { Link } from 'react-router-dom';\r\nimport { MenuProps } from 'components/Menu';\r\nimport routers from 'const/routers';\r\n\r\nimport userIcon from 'assets/img/user.svg';\r\nimport { useTranslation } from 'react-i18next';\r\nimport { removeToken } from 'helpers/token';\r\n\r\nconst MobileMenu: React.FC<MenuProps> = ({ isAuth, avatar, logout }) => {\r\n  const { t } = useTranslation();\r\n  const logOut = useCallback(() => {\r\n    removeToken();\r\n    logout();\r\n  }, []);\r\n  return (\r\n    <MenuAntd>\r\n      {!isAuth ? (\r\n        <>\r\n          <Dropdown\r\n            overlay={\r\n              <MenuAntd>\r\n                <MenuAntd.Item>\r\n                  <Link to={routers.getSignin()}>\r\n                    <Button block type=\"primary\">\r\n                      {t('auth.button.signIn')}\r\n                    </Button>\r\n                  </Link>\r\n                </MenuAntd.Item>\r\n                <MenuAntd.Item>\r\n                  <Link to={routers.getSignup()}>\r\n                    <Button type=\"primary\">{t('auth.button.registration')}</Button>\r\n                  </Link>\r\n                </MenuAntd.Item>\r\n              </MenuAntd>\r\n            }\r\n            placement=\"bottomRight\"\r\n          >\r\n            <Avatar className=\"avatar\" size=\"large\" icon={<img src={avatar || userIcon} alt=\"UserAvatar\" />} />\r\n          </Dropdown>\r\n        </>\r\n      ) : (\r\n        <Dropdown\r\n          overlay={\r\n            <>\r\n              <MenuAntd>\r\n                <MenuAntd.Item>\r\n                  <Link className=\"nav-link\" to={routers.getAddBook()}>\r\n                    {t('menu.addBook')}\r\n                  </Link>\r\n                </MenuAntd.Item>\r\n                <MenuAntd.Item>\r\n                  <Link to={routers.getProfile()}>{t('menu.profile')}</Link>\r\n                </MenuAntd.Item>\r\n                <MenuAntd.Item onClick={logOut} danger>\r\n                  {t('menu.logout')}\r\n                </MenuAntd.Item>\r\n              </MenuAntd>\r\n            </>\r\n          }\r\n          placement=\"bottomRight\"\r\n        >\r\n          <Avatar className=\"avatar\" size=\"large\" icon={<img src={avatar || userIcon} alt=\"UserAvatar\" />} />\r\n        </Dropdown>\r\n      )}\r\n    </MenuAntd>\r\n  );\r\n};\r\n\r\nexport default React.memo(MobileMenu);\r\n","import './Avatar.scss';\r\nimport React, { useMemo } from 'react';\r\nimport useScreen from 'hooks/api/useScreen';\r\nimport useUserData from 'hooks/api/useUserData';\r\nimport WebMenu from './components/WebMenu';\r\nimport MobileMenu from './components/MobileMenu';\r\n\r\nconst mobileWidth: number = 850;\r\n\r\nexport type MenuProps = {\r\n  isAuth: boolean;\r\n  avatar: string;\r\n  logout: Function;\r\n};\r\n\r\nconst Menu = () => {\r\n  const { screenData } = useScreen();\r\n  const { userData, logout } = useUserData();\r\n  const isShowMenuMobile = useMemo(() => mobileWidth > screenData.width, [screenData.width]);\r\n\r\n  return (\r\n    <>\r\n      {isShowMenuMobile ? (\r\n        <MobileMenu isAuth={!!userData.id} avatar={userData.avatar} logout={logout} />\r\n      ) : (\r\n        <WebMenu isAuth={!!userData.id} avatar={userData.avatar} logout={logout} />\r\n      )}\r\n    </>\r\n  );\r\n};\r\n\r\nexport default Menu;\r\n","import React from 'react';\r\nimport styled, { css } from 'styled-components';\r\nimport { useTranslation } from 'react-i18next';\r\nimport { getLanguage } from 'helpers/token';\r\n\r\nconst Language = () => {\r\n  const [active, setActive] = React.useState(getLanguage());\r\n  const { i18n } = useTranslation();\r\n  const changeLanguage = (lang: string) => {\r\n    i18n.changeLanguage(lang);\r\n    setActive(lang);\r\n  };\r\n  return (\r\n    <Container>\r\n      <Item active={active === 'ru'} onClick={() => changeLanguage('ru')}>\r\n        RU\r\n      </Item>\r\n      <Item active={active === 'en'} onClick={() => changeLanguage('en')}>\r\n        EN\r\n      </Item>\r\n    </Container>\r\n  );\r\n};\r\n\r\nexport default Language;\r\n\r\nconst Container = styled.ul`\r\n  display: flex;\r\n`;\r\nconst Item = styled.li`\r\n  cursor: pointer;\r\n  margin-left: 10px;\r\n  transition: color 0.2s ease;\r\n  font-weight: 700;\r\n  &:hover {\r\n    color: red;\r\n  }\r\n  ${({ active }: { active?: boolean }) =>\r\n    active &&\r\n    css`\r\n      cursor: default;\r\n      color: red;\r\n    `}\r\n`;\r\n","export default __webpack_public_path__ + \"static/media/logo.51a0411d.svg\";","import endpoints from 'const/endpoints';\r\nimport { requestAsync } from 'redux-query';\r\nimport { IQueriesType } from './type';\r\n\r\nexport interface IGetBooksParams extends IQueriesType {\r\n  params: object;\r\n}\r\n\r\nconst getBooks = ({ params, resultKey = 'booksData', successCallback, errorCallback }: IGetBooksParams) =>\r\n  requestAsync({\r\n    url: endpoints.getBooksUrl(params),\r\n    transform: (response) => ({\r\n      [resultKey]: response,\r\n    }),\r\n    queryKey: endpoints.getBooksUrl(params),\r\n    meta: {\r\n      authToken: true,\r\n      successCallback,\r\n      errorCallback,\r\n    },\r\n    options: {\r\n      headers: {\r\n        Accept: 'application/json',\r\n      },\r\n    },\r\n    update: {\r\n      [resultKey]: (_prevEntities: any, newEntities: any) => newEntities,\r\n    },\r\n  });\r\n\r\nexport default getBooks;\r\n","import endpoints from 'const/endpoints';\r\nimport { requestAsync } from 'redux-query';\r\nimport { IQueriesType } from './type';\r\n\r\nexport interface IGetBookLikeParams extends IQueriesType {\r\n  id: string;\r\n  checked: boolean;\r\n}\r\n\r\nconst getBookLike = ({ id, checked, resultKey = 'bookLike', successCallback, errorCallback }: IGetBookLikeParams) =>\r\n  requestAsync({\r\n    url: endpoints.getBookLikeUrl(),\r\n    transform: (response) => ({\r\n      [resultKey]: response,\r\n    }),\r\n    queryKey: endpoints.getBookLikeUrl(),\r\n    meta: {\r\n      authToken: true,\r\n      successCallback,\r\n      errorCallback,\r\n    },\r\n    options: {\r\n      method: 'POST',\r\n      headers: {\r\n        Accept: 'application/json',\r\n      },\r\n    },\r\n    body: { id, checked },\r\n    update: {\r\n      [resultKey]: (_prevEntities: any, newEntities: any) => newEntities,\r\n    },\r\n  });\r\n\r\nexport default getBookLike;\r\n","import endpoints from 'const/endpoints';\r\nimport { requestAsync } from 'redux-query';\r\nimport { IQueriesType } from './type';\r\n\r\nexport interface IGetBooksParams extends IQueriesType {\r\n  id: string;\r\n}\r\n\r\nconst getBooks = ({ id, resultKey = 'bookComments', successCallback, errorCallback }: IGetBooksParams) =>\r\n  requestAsync({\r\n    url: endpoints.getBookCommentUrl(),\r\n    transform: (response) => ({\r\n      [resultKey]: response,\r\n    }),\r\n    queryKey: endpoints.getBookCommentUrl(),\r\n    meta: {\r\n      successCallback,\r\n      errorCallback,\r\n    },\r\n    body: { id },\r\n    options: {\r\n      method: 'POST',\r\n      headers: {\r\n        Accept: 'application/json',\r\n      },\r\n    },\r\n    update: {\r\n      [resultKey]: (_prevEntities: any, newEntities: any) => newEntities,\r\n    },\r\n  });\r\n\r\nexport default getBooks;\r\n","import endpoints from 'const/endpoints';\r\nimport { requestAsync } from 'redux-query';\r\nimport { IQueriesType } from './type';\r\n\r\nexport interface IGetBookCommentParams extends IQueriesType {\r\n  postData: { bookId: string; text: string };\r\n}\r\n\r\nconst addBookComment = ({\r\n  postData,\r\n  resultKey = 'addBookComment',\r\n  successCallback,\r\n  errorCallback,\r\n}: IGetBookCommentParams) =>\r\n  requestAsync({\r\n    url: endpoints.getBookAddCommentUrl(),\r\n    transform: (response) => ({\r\n      [resultKey]: response,\r\n    }),\r\n    queryKey: endpoints.getBookAddCommentUrl(),\r\n    meta: {\r\n      authToken: true,\r\n      successCallback,\r\n      errorCallback,\r\n    },\r\n    options: {\r\n      method: 'POST',\r\n      headers: {\r\n        Accept: 'application/json',\r\n      },\r\n    },\r\n    body: postData,\r\n    update: {\r\n      [resultKey]: (_prevEntities: any, newEntities: any) => newEntities,\r\n    },\r\n  });\r\n\r\nexport default addBookComment;\r\n","import { useCallback, useMemo } from 'react';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport getBooks from 'queries/getBooks';\r\nimport getBookLike from 'queries/getBookLike';\r\nimport getBookComment from 'queries/getBookComment';\r\nimport addBookComment from 'queries/addBookComment';\r\nimport { bindActionCreators } from 'redux';\r\nimport { updateEntities } from 'redux-query';\r\nimport { updateUtils } from 'actions';\r\nimport useActionsWithFetchingState from '../useActionsWithFetchingState';\r\nimport { arraySelector, utilsSelector } from './selectors';\r\n\r\nexport type RequestBookParamsType = {\r\n  page: number;\r\n  search: string;\r\n};\r\nconst initialRequestBookParams: RequestBookParamsType = {\r\n  page: 0,\r\n  search: '',\r\n};\r\n\r\nconst useAuth = () => {\r\n  const selector = useCallback(\r\n    (state) => ({\r\n      booksData: arraySelector(state, 'booksData'),\r\n      bookComments: arraySelector(state, 'bookComments'),\r\n      requestBookParams: utilsSelector(state, 'requestBookParams', initialRequestBookParams),\r\n    }),\r\n    [],\r\n  );\r\n\r\n  const dispatch = useDispatch();\r\n  const data = useSelector(selector);\r\n\r\n  const actionCreators = useMemo(\r\n    () => ({\r\n      getBooks,\r\n      getBookLike,\r\n      getBookComment,\r\n      addBookComment,\r\n    }),\r\n    [],\r\n  );\r\n\r\n  const actionWithoutIsFetching = useMemo(\r\n    () =>\r\n      bindActionCreators(\r\n        {\r\n          setComment: (newComment) =>\r\n            updateEntities({\r\n              bookComments: (prev: Array<any>) => [...prev, newComment],\r\n            }),\r\n          setRequestBookParams: (requestBookParams: RequestBookParamsType) => updateUtils({ requestBookParams }),\r\n        },\r\n        dispatch,\r\n      ),\r\n    [dispatch],\r\n  );\r\n\r\n  const [actions, isFetchingState] = useActionsWithFetchingState(actionCreators, dispatch);\r\n  return {\r\n    ...data,\r\n    ...actions,\r\n    ...isFetchingState,\r\n    ...actionWithoutIsFetching,\r\n  };\r\n};\r\n\r\nexport default useAuth;\r\n","/* eslint-disable @typescript-eslint/no-unused-vars */\r\nimport React, { useState, ChangeEvent } from 'react';\r\nimport { Input } from 'antd';\r\nimport { createUseStyles } from 'react-jss';\r\nimport { useGlobalStyles } from 'App';\r\nimport Menu from 'components/Menu';\r\nimport { Link, useHistory } from 'react-router-dom';\r\nimport routers from 'const/routers';\r\nimport { useTranslation } from 'react-i18next';\r\nimport Language from 'components/Language';\r\nimport logoIcon from 'assets/img/logo.svg';\r\nimport useBooks from 'hooks/api/useBooks';\r\n\r\nconst { Search } = Input;\r\n\r\nconst Header = () => {\r\n  const { t } = useTranslation();\r\n  const history = useHistory();\r\n  const styles = useStyles();\r\n  const globalStyles = useGlobalStyles();\r\n  const { requestBookParams, setRequestBookParams } = useBooks();\r\n  const [valueForm, setValueForm] = useState(requestBookParams.search);\r\n\r\n  const searchHandler = (value: string) => {\r\n    setRequestBookParams({ search: value.trim(), page: 0 });\r\n    history.push(routers.getBase());\r\n  };\r\n\r\n  const changeHandler = (event: ChangeEvent<HTMLInputElement>) => {\r\n    const { value } = event.target;\r\n    setValueForm(value);\r\n  };\r\n  return (\r\n    <div className={styles.header}>\r\n      <div className={globalStyles.container}>\r\n        <div className={styles.content}>\r\n          <div className={styles.logo}>\r\n            <Link to={routers.getBase()}>\r\n              <img src={logoIcon} alt=\"Books\" width=\"100%\" />\r\n            </Link>\r\n          </div>\r\n          <div className={styles.search}>\r\n            <Search\r\n              placeholder={t('search')}\r\n              onSearch={searchHandler}\r\n              value={valueForm}\r\n              onChange={changeHandler}\r\n              enterButton\r\n            />\r\n          </div>\r\n          <div className={styles.nav}>\r\n            <Menu />\r\n          </div>\r\n          <Language />\r\n          {/* <Switch checked={valueChecked} onChange={onChangeTheme} /> */}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nconst useStyles = createUseStyles({\r\n  header: {\r\n    position: 'sticky',\r\n    top: 0,\r\n    left: 0,\r\n    right: 0,\r\n    zIndex: 1000,\r\n    backgroundColor: '#eef0f1',\r\n    boxShadow: '0px 0px 20px 0px #c2bfbf',\r\n  },\r\n  content: {\r\n    display: 'flex',\r\n    alignItems: 'center',\r\n    padding: '1rem 0',\r\n  },\r\n  logo: {\r\n    width: '50px',\r\n  },\r\n  nav: {\r\n    '& a': {\r\n      marginLeft: '2rem',\r\n    },\r\n  },\r\n  search: {\r\n    marginLeft: 'auto',\r\n    width: '300px',\r\n  },\r\n});\r\n\r\nexport default Header;\r\n","/*eslint-disable */\r\n\r\nexport type ActionsTypes = typeof Actions;\r\n\r\nexport const Actions = {\r\n  setAudio: (payload: string) => ({\r\n    type: 'AUDIO@SET_ITEM',\r\n    payload\r\n  } as const),\r\n  setAudioBookId: (payload: string) => ({\r\n    type: 'AUDIO@SET_ID',\r\n    payload\r\n  } as const),\r\n  isPlay: (payload: boolean) => ({\r\n    type: 'AUDIO@IS_PLAY',\r\n    payload\r\n  } as const),\r\n};\r\n// export const fetchAudio = (audioId: string) => (dispatch: Dispatch<ActionsTypes>) => {\r\n  // audioApi.getAudio(audioId).then(({ data }) => {\r\n  //   dispatch(Actions.setAudio(data.audio))\r\n  //   dispatch(Actions.setAudioLoader(false))\r\n  // })\r\n// }\r\n","import { StateType } from 'reducers';\r\n\r\nconst getAudioId = (state: StateType) => state.audio.id;\r\nconst getPlay = (state: StateType) => state.audio.isPlay;\r\nconst getAudioSrc = (state: StateType) => state.audio.item;\r\n\r\nexport { getAudioId, getPlay, getAudioSrc };\r\n","import './AudioPlayer.scss';\r\nimport 'react-h5-audio-player/src/styles.scss';\r\nimport React from 'react';\r\nimport H5AudioPlayer from 'react-h5-audio-player';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { Actions } from 'redux/action/audioPlayer';\r\nimport { getAudioSrc, getPlay } from 'redux/selectors';\r\n\r\nconst AudioPlayer = () => {\r\n  const myPlayer = React.useRef<any>(null);\r\n  const dispatch = useDispatch();\r\n  const isPlay = useSelector(getPlay);\r\n  const audioSrc = useSelector(getAudioSrc);\r\n\r\n  React.useEffect(() => {\r\n    if (isPlay) {\r\n      myPlayer.current.audio.current.play();\r\n    } else if (!isPlay) {\r\n      myPlayer.current.audio.current.pause();\r\n    }\r\n  }, [isPlay]);\r\n\r\n  const handleClick = ({ type }: any) => {\r\n    if (type === 'play') {\r\n      dispatch(Actions.isPlay(true));\r\n    } else if (type === 'pause') {\r\n      dispatch(Actions.isPlay(false));\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"audio-player\">\r\n      <div className=\"container\">\r\n        <H5AudioPlayer\r\n          autoPlay={false}\r\n          ref={myPlayer}\r\n          src={audioSrc}\r\n          onPlay={handleClick}\r\n          onPause={handleClick}\r\n          autoPlayAfterSrcChange\r\n        />\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default AudioPlayer;\r\n","import React from 'react';\r\nimport { Spin } from 'antd';\r\nimport { createUseStyles } from 'react-jss';\r\n\r\ntype PropsTypes = {\r\n  className?: string;\r\n  style?: React.HTMLAttributes<HTMLDivElement>;\r\n};\r\n\r\nconst Loader: React.FC<PropsTypes> = ({ className = '', style = {} }) => {\r\n  const styles = useStyles();\r\n  return (\r\n    <div className={`${className} ${styles.loader}`} style={style}>\r\n      <Spin size=\"large\" />\r\n    </div>\r\n  );\r\n};\r\nconst useStyles = createUseStyles({\r\n  loader: {\r\n    position: 'absolute',\r\n    top: '50%',\r\n    left: '50%',\r\n  },\r\n});\r\n\r\nexport default Loader;\r\n","/*eslint-disable */\r\nimport React, { createElement, useState } from 'react';\r\nimport { Comment, Tooltip, Avatar } from 'antd';\r\nimport { DislikeOutlined, LikeOutlined, DislikeFilled, LikeFilled } from '@ant-design/icons';\r\nimport { CommentsType } from 'types';\r\n\r\nconst CommentBase: React.FC<CommentsType> = ({ text, author }) => {\r\n  const [likes, setLikes] = useState(0);\r\n  const [dislikes, setDislikes] = useState(0);\r\n  const [action, setAction] = useState<null | string>(null);\r\n\r\n  const like = () => {\r\n    setLikes(1);\r\n    setDislikes(0);\r\n    setAction('liked');\r\n  };\r\n\r\n  const dislike = () => {\r\n    setLikes(0);\r\n    setDislikes(1);\r\n    setAction('disliked');\r\n  };\r\n\r\n  const actions = [\r\n    <Tooltip key=\"comment-basic-like\" title=\"Like\">\r\n      <span onClick={like}>\r\n        {createElement(action === 'liked' ? LikeFilled : LikeOutlined)}\r\n        <span className=\"comment-action\">{likes}</span>\r\n      </span>\r\n    </Tooltip>,\r\n    <Tooltip key=\"comment-basic-dislike\" title=\"Dislike\">\r\n      <span onClick={dislike}>\r\n        {React.createElement(action === 'disliked' ? DislikeFilled : DislikeOutlined)}\r\n        <span className=\"comment-action\">{dislikes}</span>\r\n      </span>\r\n    </Tooltip>,\r\n  ];\r\n  return (\r\n    <Comment\r\n      actions={actions}\r\n      author={author}\r\n      avatar={<Avatar src=\"https://zos.alipayobjects.com/rmsportal/ODTLcjxAfvqbxHnVXCYX.png\" alt=\"Han Solo\" />}\r\n      content={<p>{text}</p>}\r\n    />\r\n  );\r\n};\r\nexport default CommentBase;\r\n","import { useMemo, useCallback } from 'react';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { setModal } from 'actions';\r\nimport { bindActionCreators } from 'redux';\r\nimport { modalSelector } from './api/selectors';\r\n\r\nconst useModal = () => {\r\n  const selector = useCallback(\r\n    (state) => ({\r\n      modalData: modalSelector(state),\r\n    }),\r\n    [],\r\n  );\r\n\r\n  const dispatch = useDispatch();\r\n\r\n  const data = useSelector(selector);\r\n\r\n  const actions = useMemo(\r\n    () =>\r\n      bindActionCreators(\r\n        {\r\n          setModal: (payload) => setModal(payload),\r\n        },\r\n        dispatch,\r\n      ),\r\n    [dispatch],\r\n  );\r\n\r\n  return {\r\n    ...data,\r\n    ...actions,\r\n  };\r\n};\r\n\r\nexport default useModal;\r\n","/* eslint-disable no-underscore-dangle */\r\nimport React, { FormEvent, useCallback } from 'react';\r\nimport { Modal as ModalAndt, Input, Button } from 'antd';\r\nimport { CommentsType } from 'types';\r\nimport Loader from 'components/Loader';\r\nimport Comment from 'components/Comment';\r\nimport { getToken } from 'helpers/token';\r\nimport useBooks from 'hooks/api/useBooks';\r\nimport useModal from 'hooks/useModal';\r\nimport { createUseStyles } from 'react-jss';\r\nimport { Link } from 'react-router-dom';\r\nimport routers from 'const/routers';\r\n\r\nconst Modal: React.FC = () => {\r\n  const styles = useStyles();\r\n  const [value, setValue] = React.useState('');\r\n  const { bookComments, addBookComment, setComment } = useBooks();\r\n  const { modalData, setModal } = useModal();\r\n\r\n  const handleOk = () => {\r\n    setModal({ show: false });\r\n  };\r\n\r\n  const handleCancel = () => {\r\n    setModal({ show: false });\r\n  };\r\n\r\n  const handleChange = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n    setValue(e.target.value);\r\n  };\r\n\r\n  const onSubmit = useCallback(\r\n    (event: FormEvent<HTMLFormElement>) => {\r\n      event.preventDefault();\r\n      addBookComment({\r\n        postData: { bookId: modalData.id, text: value },\r\n        successCallback: (res) => {\r\n          setComment(res);\r\n        },\r\n      });\r\n      // fetchAddComment(value);\r\n      setValue('');\r\n    },\r\n    [value, modalData.id],\r\n  );\r\n\r\n  return (\r\n    <ModalAndt title=\"\" visible={modalData.show} onOk={handleOk} onCancel={handleCancel} footer={null}>\r\n      <div className={styles.container}>\r\n        <div className={styles.comment}>\r\n          {modalData.loader ? (\r\n            <Loader />\r\n          ) : (\r\n            bookComments.map((item: CommentsType) => <Comment key={item._id} {...item} />)\r\n          )}\r\n        </div>\r\n        {getToken() ? (\r\n          <form className={styles.form} onSubmit={onSubmit}>\r\n            <Input style={{ width: '100%' }} value={value} onChange={handleChange} />\r\n            <Button htmlType=\"submit\" type=\"primary\">\r\n              Send\r\n            </Button>\r\n          </form>\r\n        ) : (\r\n          <div style={{ textAlign: 'center', paddingTop: '30px' }}>\r\n              \r\n            <Link to={routers.getSignup()}></Link>\r\n          </div>\r\n        )}\r\n      </div>\r\n    </ModalAndt>\r\n  );\r\n};\r\n\r\nconst useStyles = createUseStyles({\r\n  container: {\r\n    minHeight: 300,\r\n    display: 'flex',\r\n    flexDirection: 'column',\r\n    justifyContent: 'space-between',\r\n  },\r\n  comment: {\r\n    maxHeight: '300px',\r\n    overflowX: 'hidden',\r\n    '&::-webkit-scrollbar': {\r\n      width: '10px',\r\n    },\r\n    '&::-webkit-scrollbar-track': {\r\n      boxShadow: '5px 5px 5px -5px rgba(34, 60, 80, 0.2) inset',\r\n      backgroundColor: '#f9f9fd',\r\n      borderRadius: '10px',\r\n    },\r\n    '&::-webkit-scrollbar-thumb': {\r\n      borderRadius: '10px',\r\n      background: 'linear-gradient(180deg, #00c6fb, #005bea)',\r\n    },\r\n  },\r\n  form: {\r\n    display: 'flex',\r\n    marginTop: '30px',\r\n  },\r\n});\r\n\r\nexport default Modal;\r\n","import React, { useState } from 'react';\r\nimport { useSelector } from 'react-redux';\r\nimport Header from 'components/Header';\r\nimport AudioPlayer from 'components/AudioPlayer';\r\nimport Modal from 'components/Modal';\r\nimport Loader from 'components/Loader';\r\nimport { getAudioId } from 'redux/selectors';\r\nimport { createUseStyles } from 'react-jss';\r\nimport useUserData from 'hooks/api/useUserData';\r\nimport { getToken } from 'helpers/token';\r\n\r\nconst MyLayout = ({ children }: any) => {\r\n  const [appLaunch, setAppLaunch] = useState(true);\r\n  const { getUserData } = useUserData();\r\n  const isAudio = useSelector(getAudioId);\r\n  const styles = useStyles();\r\n\r\n  React.useEffect(() => {\r\n    (async () => {\r\n      if (getToken()) {\r\n        await getUserData({ resultKey: 'userData' });\r\n      }\r\n      setAppLaunch(false);\r\n    })();\r\n  }, []);\r\n\r\n  if (appLaunch) return <Loader />;\r\n  return (\r\n    <>\r\n      <Header />\r\n      <div className={styles.wrapper}>{children}</div>\r\n      {!!isAudio && <AudioPlayer />}\r\n      <Modal />\r\n    </>\r\n  );\r\n};\r\n\r\nexport default MyLayout;\r\n\r\nconst useStyles = createUseStyles({\r\n  wrapper: {\r\n    // display: 'flex',\r\n  },\r\n});\r\n","import React, { FC } from 'react';\r\n\r\ntype PropsTypes = {\r\n  children?: any;\r\n  className?: string;\r\n};\r\n\r\nconst Block: FC<PropsTypes> = ({ children, className }) => (\r\n  <div\r\n    className={className}\r\n    style={{\r\n      backgroundColor: '#fff',\r\n      borderRadius: '10px',\r\n      margin: '20px',\r\n      padding: '15px',\r\n    }}\r\n  >\r\n    {children}\r\n  </div>\r\n);\r\n\r\nexport default Block;\r\n","import axios from 'axios';\r\nimport { getToken } from 'helpers/token';\r\nimport { useCallback, useEffect, useState } from 'react';\r\nimport io from 'socket.io-client';\r\n\r\nconst socket = io();\r\n\r\nconst useSocketChat = () => {\r\n  const [messages, setMessages] = useState([]);\r\n\r\n  const addMessage = useCallback((message) => {\r\n    const obj = {\r\n      token: getToken(),\r\n      message,\r\n    };\r\n\r\n    socket.emit('MESSAGE', obj);\r\n  }, []);\r\n  useEffect(() => {\r\n    socket.on('NEW_MESSAGE', (msg) => {\r\n      setMessages((prev) => prev.concat(msg));\r\n    });\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    (async () => {\r\n      const { data } = await axios.get('/book/chat');\r\n      setMessages(data);\r\n    })();\r\n  }, []);\r\n\r\n  return { messages, addMessage };\r\n};\r\n\r\nexport default useSocketChat;\r\n","/* eslint-disable no-underscore-dangle */\r\n/* eslint-disable react/no-array-index-key */\r\nimport React, { ChangeEvent, useCallback, useState, useRef, useEffect, FC } from 'react';\r\nimport Block from 'components/Block';\r\nimport { createUseStyles } from 'react-jss';\r\nimport { Avatar, Button, Comment, Input } from 'antd';\r\nimport useSocketChat from 'hooks/api/useSocketChat';\r\n\r\nconst { TextArea } = Input;\r\n\r\ntype PropsTypes = {\r\n  className?: string;\r\n};\r\n\r\nconst Sidebar: FC<PropsTypes> = ({ className = '' }) => {\r\n  const styles = useStyles();\r\n  const [formValue, setFormValue] = useState('');\r\n  const { messages, addMessage } = useSocketChat();\r\n  const myRef = useRef(null);\r\n\r\n  const onChangeHandler = (event: ChangeEvent<HTMLTextAreaElement>) => {\r\n    setFormValue(event.target.value);\r\n  };\r\n\r\n  const onClick = useCallback(() => {\r\n    if (formValue) {\r\n      addMessage(formValue);\r\n    }\r\n    setFormValue('');\r\n  }, [formValue, addMessage]);\r\n\r\n  useEffect(() => {\r\n    if (myRef.current) {\r\n      // @ts-ignore\r\n      myRef.current.scrollTo(0, 99999);\r\n    }\r\n  }, [messages]);\r\n\r\n  return (\r\n    <Block className={`${styles.sidebar} ${className}`}>\r\n      <div className={styles.wrap}>\r\n        <strong className={styles.header}>Online Chat</strong>\r\n        <div className={styles.main} ref={myRef}>\r\n          {messages.map((item, index) => (\r\n            <Comment\r\n              key={item._id + index}\r\n              author={item.author}\r\n              avatar={\r\n                // eslint-disable-next-line react/jsx-wrap-multilines\r\n                <Avatar\r\n                  src={item.avatar || 'https://zos.alipayobjects.com/rmsportal/ODTLcjxAfvqbxHnVXCYX.png'}\r\n                  alt={item.author || 'salsa'}\r\n                />\r\n              }\r\n              content={<p>{item.message}</p>}\r\n            />\r\n          ))}\r\n        </div>\r\n        <div>\r\n          <TextArea\r\n            placeholder=\"message\"\r\n            autoSize={{ minRows: 1, maxRows: 4 }}\r\n            value={formValue}\r\n            onChange={onChangeHandler}\r\n          />\r\n          <Button type=\"primary\" onClick={onClick} style={{ marginTop: '5px' }}>\r\n            \r\n          </Button>\r\n        </div>\r\n      </div>\r\n    </Block>\r\n  );\r\n};\r\n\r\nconst useStyles = createUseStyles({\r\n  sidebar: {\r\n    position: 'fixed',\r\n    right: '0',\r\n    minWidth: '350px',\r\n    maxWidth: '350px',\r\n    height: 'calc(100vh - 122px)', // minus header = 82 i margin block top=20 bottom=20 = \"122px\"\r\n    marginLeft: '0 !important',\r\n  },\r\n  header: {\r\n    display: 'flex',\r\n    justifyContent: 'center',\r\n    fontSize: '1.2rem',\r\n  },\r\n  wrap: {\r\n    height: '100%',\r\n    display: 'flex',\r\n    flexDirection: 'column',\r\n    justifyContent: 'space-between',\r\n  },\r\n  main: {\r\n    height: '100%',\r\n    overflowX: 'hidden',\r\n    overflowY: 'scroll',\r\n    '&::-webkit-scrollbar': {\r\n      width: '10px',\r\n    },\r\n    '&::-webkit-scrollbar-track': {\r\n      boxShadow: '5px 5px 5px -5px rgba(34, 60, 80, 0.2) inset',\r\n      backgroundColor: '#f9f9fd',\r\n      borderRadius: '10px',\r\n    },\r\n    '&::-webkit-scrollbar-thumb': {\r\n      borderRadius: '10px',\r\n      background: 'linear-gradient(180deg, #00c6fb, #005bea)',\r\n    },\r\n  },\r\n});\r\n\r\nexport default Sidebar;\r\n","export default __webpack_public_path__ + \"static/media/author.d1370a05.svg\";","import React from 'react';\r\nimport authorIcon from 'assets/img/author.svg';\r\nimport classNames from 'classnames';\r\n\r\nimport './AuthorBlock.scss';\r\n\r\ntype props = {\r\n  name?: string;\r\n  onClick?: () => void;\r\n  icon?: string;\r\n  className?: string;\r\n  style?: any;\r\n};\r\n\r\nconst AuthorBlock: React.FC<props> = (props) => {\r\n  const { onClick, name, icon, className, style } = props;\r\n  return (\r\n    <div className={classNames('author', { [`${className}`]: !!className })} onClick={onClick} style={style}>\r\n      <div className=\"author-img\">\r\n        <img src={icon || authorIcon} alt={name} width=\"100%\" />\r\n      </div>\r\n      <div className=\"author-name\">{name}</div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default AuthorBlock;\r\n","export default __webpack_public_path__ + \"static/media/play.b82a9267.svg\";","export default __webpack_public_path__ + \"static/media/stop.a64e0090.svg\";","import './Style.scss';\r\nimport React from 'react';\r\nimport playIcon from 'assets/img/play.svg';\r\nimport stopIcon from 'assets/img/stop.svg';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { Actions } from 'redux/action/audioPlayer';\r\nimport { getAudioId, getPlay } from 'redux/selectors';\r\nimport { useTranslation } from 'react-i18next';\r\n\r\nconst pathMp3 = require('assets/audio/as.mp3');\r\n\r\ntype Props = {\r\n  bookId: string;\r\n};\r\n\r\nconst ButtonPlay: React.FC<Props> = ({ bookId }) => {\r\n  const audioPlayerId = useSelector(getAudioId);\r\n  const { t } = useTranslation();\r\n  const isPlay = useSelector(getPlay);\r\n  const dispatch = useDispatch();\r\n\r\n  const handleClick = () => {\r\n    if (bookId === audioPlayerId) {\r\n      dispatch(Actions.isPlay(!isPlay));\r\n      return;\r\n    }\r\n    // TODO\r\n    dispatch(Actions.setAudioBookId(bookId));\r\n    dispatch(Actions.setAudio(pathMp3.default));\r\n    dispatch(Actions.isPlay(true));\r\n  };\r\n\r\n  return (\r\n    <div onClick={handleClick} className=\"audio\">\r\n      {bookId === audioPlayerId && isPlay ? <img src={stopIcon} alt=\"stop\" /> : <img src={playIcon} alt=\"play\" />}\r\n      <span className=\"audio-play\">{t('article.play')}</span>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ButtonPlay;\r\n","export default __webpack_public_path__ + \"static/media/comment.df5e7701.svg\";","export default __webpack_public_path__ + \"static/media/like-up.0fd910a4.svg\";","export default __webpack_public_path__ + \"static/media/like.3202d8c4.svg\";","export const formatStringEllipsis = (comment: string, length: number) => {\r\n  if (comment != null) {\r\n    if (comment.length <= length) return comment;\r\n    return `${comment.slice(0, length)}\\u2026`; // u2026 - \"\"\r\n  }\r\n  return comment;\r\n};\r\n","import React, { useState, useCallback } from 'react';\r\nimport { createUseStyles } from 'react-jss';\r\nimport { Statistic } from 'antd';\r\nimport { useTranslation } from 'react-i18next';\r\nimport AuthorBlock from 'components/AuthorBlock';\r\nimport { ButtonPlay } from 'components/button';\r\nimport { BookType } from 'types';\r\nimport Block from 'components/Block';\r\nimport useBooks from 'hooks/api/useBooks';\r\nimport commentIcon from 'assets/img/comment.svg';\r\nimport logoIcon from 'assets/img/logo.svg';\r\nimport likeIcon from 'assets/img/like-up.svg';\r\nimport likeUpIcon from 'assets/img/like.svg';\r\nimport { formatStringEllipsis } from 'helpers/format';\r\nimport useModal from 'hooks/useModal';\r\n\r\nconst Article: React.FC<BookType> = (props) => {\r\n  const { _id, name, author, imgUrl, description, comments, likes } = props;\r\n  const [like, setLike] = useState(likes);\r\n  const { t } = useTranslation();\r\n  const styles = useStyles();\r\n  const { getBookLike, getBookComment } = useBooks();\r\n  const { setModal } = useModal();\r\n\r\n  const clickHandler = () => {\r\n    setModal({ show: true, loader: true, id: _id });\r\n    getBookComment({\r\n      id: _id,\r\n      successCallback: () => {\r\n        setModal({ show: true, loader: false });\r\n      },\r\n      errorCallback: () => {\r\n        setModal({ show: false, loader: false });\r\n      },\r\n    });\r\n  };\r\n\r\n  const likeHandler = useCallback(() => {\r\n    getBookLike({\r\n      id: _id,\r\n      checked: !like,\r\n      successCallback: (res: { count: number; status: boolean }) => {\r\n        setLike(res);\r\n      },\r\n    });\r\n  }, [like, getBookLike, _id]);\r\n\r\n  const likeImage = (\r\n    <img className={styles.likeImage} onClick={likeHandler} src={like.status ? likeIcon : likeUpIcon} alt=\"like\" />\r\n  );\r\n\r\n  return (\r\n    <Block className={styles.article}>\r\n      <div className={styles.articleLeft}>\r\n        <div className={styles.articleImage}>\r\n          <img src={imgUrl || logoIcon} alt={name} />\r\n        </div>\r\n      </div>\r\n      <div className={styles.description}>\r\n        <div>\r\n          <div className={styles.body}>\r\n            <h2 className={styles.title}>{name}</h2>\r\n            <Statistic\r\n              valueStyle={{ fontSize: '1.2rem', whiteSpace: 'nowrap' }}\r\n              value={like.count}\r\n              prefix={likeImage}\r\n            />\r\n          </div>\r\n          <p className={styles.text}>{formatStringEllipsis(description, 300)}</p>\r\n        </div>\r\n        <AuthorBlock name={author} />\r\n        <div className={styles.footer}>\r\n          <ButtonPlay bookId={_id} />\r\n          <AuthorBlock\r\n            className={styles.center}\r\n            name={comments.length ? `${comments.length} ${t('article.comment.yes')}` : t('article.comment.no')}\r\n            icon={commentIcon}\r\n            onClick={clickHandler}\r\n          />\r\n        </div>\r\n      </div>\r\n    </Block>\r\n  );\r\n};\r\n\r\nconst useStyles = createUseStyles({\r\n  article: {\r\n    transition: 'background-color 0.3s ease',\r\n    color: '#000',\r\n    display: 'flex',\r\n    borderRadius: '10px',\r\n    '@media (max-width: 500px)': {\r\n      display: 'block',\r\n    },\r\n  },\r\n  articleLeft: {\r\n    width: ' 25%',\r\n    overflow: 'hidden',\r\n    '@media (max-width: 500px)': {\r\n      width: '100%',\r\n      margin: '0 auto 25px',\r\n    },\r\n    '@media (max-width: 600px)': {\r\n      width: '150px',\r\n    },\r\n  },\r\n  articleImage: {\r\n    position: 'relative',\r\n    overflow: 'hidden',\r\n    width: '100%',\r\n    height: ' 250px',\r\n    '& img': {\r\n      position: 'absolute',\r\n      top: '50%',\r\n      left: '50%',\r\n      transform: 'translate(-50%, -50%)',\r\n      width: 'auto',\r\n      height: '100%',\r\n    },\r\n  },\r\n\r\n  description: {\r\n    paddingLeft: '10px',\r\n    width: '75%',\r\n    display: 'flex',\r\n    flexDirection: 'column',\r\n    justifyContent: 'space-between',\r\n    '@media (max-width: 500px)': {\r\n      width: '100%',\r\n      marginBottom: '25px',\r\n    },\r\n  },\r\n  center: {\r\n    margin: ' 5px auto',\r\n  },\r\n  footer: {\r\n    display: 'flex',\r\n    alignItems: 'center',\r\n    '@media (max-width: 500px)': {\r\n      display: 'flex',\r\n    },\r\n    '@media (max-width: 600px)': {\r\n      display: 'block',\r\n    },\r\n  },\r\n  body: {\r\n    display: 'flex',\r\n    justifyContent: 'space-between',\r\n  },\r\n  likeImage: {\r\n    width: ' 26px',\r\n    marginBottom: '10px',\r\n    cursor: 'pointer',\r\n  },\r\n  title: {\r\n    color: 'inherit',\r\n    display: 'inline',\r\n    fontSize: '2rem',\r\n    fontWeight: '700',\r\n  },\r\n  text: {\r\n    fontSize: '1.1rem',\r\n    overflow: 'hidden',\r\n    textOverflow: 'ellipsis',\r\n  },\r\n});\r\n\r\nexport default Article;\r\n","/* eslint-disable @typescript-eslint/no-unused-vars */\r\n/* eslint-disable @typescript-eslint/no-shadow */\r\nimport React, { useEffect, FC, useCallback } from 'react';\r\nimport { Pagination, BackTop } from 'antd';\r\nimport { createUseStyles } from 'react-jss';\r\nimport Article from 'components/Article';\r\nimport Loader from 'components/Loader';\r\nimport { BookType } from 'types';\r\nimport { useHistory } from 'react-router-dom';\r\nimport queryString from 'query-string';\r\nimport getParams from 'helpers/getParams';\r\nimport useBooks, { RequestBookParamsType } from 'hooks/api/useBooks';\r\n\r\ntype PropsTypes = {\r\n  className?: string;\r\n};\r\n\r\nconst BooksScreen: FC<PropsTypes> = ({ className = '' }) => {\r\n  const styles = useStyles();\r\n  const history = useHistory();\r\n  const { getBooks, booksData, getBooksIsFetching, setRequestBookParams, requestBookParams } = useBooks();\r\n  const { page, search } = requestBookParams;\r\n\r\n  useEffect(() => {\r\n    const searchValue = history.location.search;\r\n    const parsString = queryString.parse(searchValue, {\r\n      parseNumbers: true,\r\n      parseBooleans: true,\r\n    });\r\n    // TODO:\r\n    const params = { page, search };\r\n    if (parsString.page) {\r\n      params.page = parsString.page;\r\n    } else if (parsString.search) {\r\n      params.search = parsString.search;\r\n    }\r\n    if (params.page !== page || params.search !== search) {\r\n      setRequestBookParams({ page: params.page, search: params.search });\r\n    }\r\n  }, [history.location.search]);\r\n\r\n  useEffect(() => {\r\n    if (page || search) {\r\n      history.push({\r\n        search: getParams({ page, search }),\r\n      });\r\n    }\r\n  }, [history, page, search]);\r\n\r\n  useEffect(() => {\r\n    getBooks({ params: { ...requestBookParams } });\r\n  }, [requestBookParams, getBooks]);\r\n\r\n  const onChangePage = useCallback(\r\n    (valuePage: number) => {\r\n      setRequestBookParams({ page: valuePage });\r\n    },\r\n    [setRequestBookParams],\r\n  );\r\n\r\n  return (\r\n    <div\r\n      className={className}\r\n      style={{\r\n        position: 'relative',\r\n        minHeight: 'calc(100vh - 82px)', // TODO: 82px height Header\r\n        width: '100%',\r\n      }}\r\n    >\r\n      {getBooksIsFetching ? (\r\n        <Loader className={styles.loader} />\r\n      ) : booksData.books?.length ? (\r\n        <>\r\n          {booksData.books?.map((book: BookType) => (\r\n            // eslint-disable-next-line no-underscore-dangle\r\n            <Article key={book._id} {...book} />\r\n          ))}\r\n          ;\r\n          {booksData.total > 5 && (\r\n            <Pagination\r\n              style={{ textAlign: 'center', padding: '30px 0' }}\r\n              current={requestBookParams?.page || 1}\r\n              defaultCurrent={1}\r\n              defaultPageSize={5}\r\n              total={booksData.total}\r\n              onChange={onChangePage}\r\n            />\r\n          )}\r\n          ;\r\n        </>\r\n      ) : (\r\n        <div className={styles.error}>  </div>\r\n      )}\r\n      <BackTop />\r\n    </div>\r\n  );\r\n};\r\n\r\nconst useStyles = createUseStyles({\r\n  loader: {\r\n    position: 'absolute',\r\n    top: '50%',\r\n    left: '50%',\r\n  },\r\n  error: {\r\n    height: '100%',\r\n    textAlign: 'center',\r\n    fontSize: '30px',\r\n    fontWeight: 'bold',\r\n  },\r\n});\r\n\r\nexport default BooksScreen;\r\n","import React from 'react';\r\nimport { createUseStyles } from 'react-jss';\r\nimport Sidebar from 'components/Sidebar';\r\nimport BooksScreen from './BooksScreen';\r\n\r\n// TODO:   Sidebar   <1200\r\n\r\nconst Home = () => {\r\n  const styles = useStyles();\r\n  return (\r\n    <div className={styles.home}>\r\n      <BooksScreen className={styles.books} />\r\n      <Sidebar className={styles.sidebar} />\r\n    </div>\r\n  );\r\n};\r\n\r\nconst useStyles = createUseStyles({\r\n  home: {\r\n    display: 'flex',\r\n  },\r\n  books: {\r\n    paddingRight: '370px', // height sidebar\r\n    '@media (max-width: 1199px)': {\r\n      paddingRight: '0',\r\n    },\r\n  },\r\n  sidebar: {\r\n    '@media (max-width: 1199px)': {\r\n      display: 'none',\r\n    },\r\n  },\r\n});\r\n\r\nexport default Home;\r\n","import { Form, Input } from 'antd';\r\nimport React, { ChangeEvent, FC, FocusEvent } from 'react';\r\n\r\ntype PropsTypes = {\r\n  name: string;\r\n  placeholder: string;\r\n  type: string;\r\n  handleChange: (event: ChangeEvent<HTMLInputElement>) => void;\r\n  handleBlur: (event: FocusEvent<HTMLInputElement>) => void;\r\n  value: string;\r\n  validateStatus: boolean;\r\n  errorText: string;\r\n};\r\n\r\nconst FieldAuth: FC<PropsTypes> = (props) => {\r\n  const { name, placeholder, type, handleChange, handleBlur, value, validateStatus, errorText } = props;\r\n  return (\r\n    <Form.Item validateStatus={validateStatus ? 'error' : undefined} help={errorText || undefined} hasFeedback>\r\n      <Input\r\n        id={name}\r\n        name={name}\r\n        size=\"large\"\r\n        placeholder={placeholder}\r\n        value={value}\r\n        onChange={handleChange}\r\n        onBlur={handleBlur}\r\n        type={type}\r\n      />\r\n    </Form.Item>\r\n  );\r\n};\r\n\r\nexport default FieldAuth;\r\n","export const emailValidator = (email: string) => {\r\n  // eslint-disable-next-line no-useless-escape\r\n  const reg = /^([A-Za-z0-9_\\-\\.])+\\@([A-Za-z0-9_\\-\\.])+\\.([A-Za-z]{2,4})$/;\r\n  return reg.test(email);\r\n};\r\n\r\nexport const phoneValidator = (phone: string) => {\r\n  // eslint-disable-next-line no-useless-escape\r\n  const reg = /^((8|\\+7)[\\- ]?)?(\\(?\\d{3}\\)?[\\- ]?)?[\\d\\- ]{7,10}$/;\r\n  return reg.test(phone);\r\n};\r\n","import endpoints from 'const/endpoints';\r\nimport { requestAsync } from 'redux-query';\r\nimport { IQueriesType } from './type';\r\n\r\nexport interface IGetAuthParams extends IQueriesType {\r\n  email: string;\r\n  password: string;\r\n}\r\n\r\nconst getAuth = ({\r\n  email = '',\r\n  password = '',\r\n  resultKey = 'authData',\r\n  successCallback,\r\n  errorCallback,\r\n}: IGetAuthParams) =>\r\n  requestAsync({\r\n    url: endpoints.getAuthUrl(),\r\n    transform: (response) => ({\r\n      [resultKey]: response,\r\n    }),\r\n    queryKey: endpoints.getAuthUrl(),\r\n    body: {\r\n      email,\r\n      password,\r\n    },\r\n    meta: {\r\n      successCallback,\r\n      errorCallback,\r\n    },\r\n    options: {\r\n      method: 'POST',\r\n      headers: {\r\n        Accept: 'application/json',\r\n      },\r\n    },\r\n    update: {\r\n      [resultKey]: (_prevEntities: any, newEntities: any) => newEntities,\r\n    },\r\n  });\r\n\r\nexport default getAuth;\r\n","import { useCallback, useMemo } from 'react';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport getAuth from 'queries/getAuth';\r\nimport useActionsWithFetchingState from '../useActionsWithFetchingState';\r\nimport { objectSelector } from './selectors';\r\n\r\nconst useAuth = () => {\r\n  const selector = useCallback(\r\n    (state) => ({\r\n      authData: objectSelector(state, 'authData'),\r\n    }),\r\n    [],\r\n  );\r\n\r\n  const dispatch = useDispatch();\r\n  const data = useSelector(selector);\r\n\r\n  const actionCreators = useMemo(\r\n    () => ({\r\n      getAuth,\r\n    }),\r\n    [],\r\n  );\r\n\r\n  const [actions, isFetchingState] = useActionsWithFetchingState(actionCreators, dispatch);\r\n  return {\r\n    ...data,\r\n    ...actions,\r\n    ...isFetchingState,\r\n  };\r\n};\r\n\r\nexport default useAuth;\r\n","import './Auth.scss';\r\nimport React from 'react';\r\nimport { Form, Button } from 'antd';\r\nimport { Link, useHistory } from 'react-router-dom';\r\nimport Input from 'components/input/FieldAuth';\r\nimport { FormDataErrorType, LoginFormType } from 'types';\r\nimport { useTranslation } from 'react-i18next';\r\nimport routers from 'const/routers';\r\nimport { emailValidator } from 'helpers/validators';\r\nimport useAuth from 'hooks/api/useAuth';\r\nimport { setToken } from 'helpers/token';\r\nimport useUserData from 'hooks/api/useUserData';\r\n\r\nconst LoginForm = () => {\r\n  const history = useHistory();\r\n  const { getAuth, getAuthIsFetching } = useAuth();\r\n  const { getUserData, getUserDataIsFetching } = useUserData();\r\n  const { t } = useTranslation();\r\n  const [formaData, setFormData] = React.useState<LoginFormType>({\r\n    email: '',\r\n    password: '',\r\n  });\r\n  const [errors, setErrors] = React.useState<FormDataErrorType>({\r\n    email: { isValid: false, text: '' },\r\n    password: { isValid: false, text: '' },\r\n  });\r\n\r\n  const handleChange = React.useCallback(\r\n    (event: React.ChangeEvent<HTMLInputElement>) => {\r\n      const { name, value } = event.target;\r\n      if (errors[name].isValid === true) {\r\n        setErrors((prev) => ({ ...prev, [name]: { isValid: false, text: '' } }));\r\n      }\r\n      setFormData((prev) => ({ ...prev, [name]: value }));\r\n    },\r\n    [errors],\r\n  );\r\n\r\n  const handleBlur = React.useCallback(\r\n    (event: React.FocusEvent<HTMLInputElement>) => {\r\n      const { name, value } = event.target;\r\n      if (name === 'email' && value) {\r\n        const isValidEmail = !emailValidator(value);\r\n        setErrors((prev) => ({\r\n          ...prev,\r\n          [name]: {\r\n            isValid: isValidEmail,\r\n            text: isValidEmail ? t('errors.emailNotValid') : '',\r\n          },\r\n        }));\r\n      } else {\r\n        setErrors((prev) => ({\r\n          ...prev,\r\n          [name]: { isValid: !value, text: !value ? t('errors.required') : '' },\r\n        }));\r\n      }\r\n    },\r\n    [t],\r\n  );\r\n\r\n  const isButtonDisabled = React.useMemo(\r\n    () => Object.values(errors).some((item) => item.isValid === true) || getAuthIsFetching || getUserDataIsFetching,\r\n    [errors, getAuthIsFetching, getUserDataIsFetching],\r\n  );\r\n\r\n  const handleSubmit = React.useCallback(\r\n    (event: React.FormEvent) => {\r\n      event.preventDefault();\r\n      const checkFillingInput = Object.entries(formaData).reduce((acc, [key, value]) => {\r\n        if (!value) {\r\n          setErrors((prev) => ({\r\n            ...prev,\r\n            [key]: { isValid: true, text: t('errors.required') },\r\n          }));\r\n          return true;\r\n        }\r\n        return acc;\r\n      }, false);\r\n      if (checkFillingInput) {\r\n        return;\r\n      }\r\n      getAuth({\r\n        email: formaData.email,\r\n        password: formaData.password,\r\n        successCallback: ({ jwtToken }: any) => {\r\n          setToken(jwtToken);\r\n          getUserData({\r\n            successCallback: () => {\r\n              history.push(routers.getBase());\r\n            },\r\n          });\r\n        },\r\n      });\r\n    },\r\n    [t, formaData, getAuth, history, getUserData],\r\n  );\r\n\r\n  return (\r\n    <section className=\"auth\">\r\n      <div className=\"auth__content\">\r\n        <div className=\"auth__top\">\r\n          <h2>{t('auth.headerAuthentication.title')}</h2>\r\n          <p>{t('auth.headerAuthentication.subtitle')}</p>\r\n        </div>\r\n        <div>\r\n          <form onSubmit={handleSubmit} className=\"login-form\">\r\n            <Input\r\n              name=\"email\"\r\n              type=\"text\"\r\n              placeholder={t('auth.input.email')}\r\n              handleChange={handleChange}\r\n              handleBlur={handleBlur}\r\n              validateStatus={errors.email.isValid}\r\n              errorText={errors.email.text}\r\n              value={formaData.email}\r\n            />\r\n            <Input\r\n              name=\"password\"\r\n              type=\"password\"\r\n              placeholder={t('auth.input.password')}\r\n              handleChange={handleChange}\r\n              handleBlur={handleBlur}\r\n              errorText={errors.password.text}\r\n              validateStatus={errors.password.isValid}\r\n              value={formaData.password}\r\n            />\r\n            <Form.Item>\r\n              <Button disabled={isButtonDisabled} block htmlType=\"submit\" type=\"primary\" size=\"large\">\r\n                {t('auth.button.signIn')}\r\n              </Button>\r\n            </Form.Item>\r\n            <Link className=\"auth__register-link\" to={routers.getSignup()}>\r\n              {t('auth.button.registration')}\r\n            </Link>\r\n          </form>\r\n        </div>\r\n      </div>\r\n    </section>\r\n  );\r\n};\r\n\r\nexport default LoginForm;\r\n","import endpoints from 'const/endpoints';\r\nimport { requestAsync } from 'redux-query';\r\nimport { IQueriesType } from './type';\r\n\r\ninterface IGetSignUpParams extends IQueriesType {\r\n  email: string;\r\n  password: string;\r\n  fullname: string;\r\n  password_2: string;\r\n}\r\n\r\nconst getSingUp = ({\r\n  email = '',\r\n  fullname = '',\r\n  password = '',\r\n  password_2 = '',\r\n  resultKey = 'signUpData',\r\n  successCallback,\r\n  errorCallback,\r\n}: IGetSignUpParams) =>\r\n  requestAsync({\r\n    url: endpoints.getSingUpUrl(),\r\n    transform: ({ token, useData, ...response }) => ({\r\n      [resultKey]: {\r\n        token,\r\n        ...response,\r\n      },\r\n    }),\r\n    queryKey: endpoints.getSingUpUrl(),\r\n    body: {\r\n      email,\r\n      fullname,\r\n      password,\r\n      password_2,\r\n    },\r\n    meta: {\r\n      successCallback,\r\n      errorCallback,\r\n    },\r\n    options: {\r\n      method: 'POST',\r\n      headers: {\r\n        Accept: 'application/json',\r\n      },\r\n    },\r\n    update: {\r\n      [resultKey]: (_prevEntities: any, newEntities: any) => newEntities,\r\n    },\r\n  });\r\n\r\nexport default getSingUp;\r\n","import { useCallback, useMemo } from 'react';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport getSignUp from 'queries/getSignUp';\r\nimport useActionsWithFetchingState from '../useActionsWithFetchingState';\r\nimport { objectSelector } from './selectors';\r\n\r\nconst useSignUp = () => {\r\n  const selector = useCallback(\r\n    (state) => ({\r\n      getSignUp: objectSelector(state, 'getSignUp'),\r\n    }),\r\n    [],\r\n  );\r\n\r\n  const dispatch = useDispatch();\r\n  const data = useSelector(selector);\r\n\r\n  const actionCreators = useMemo(\r\n    () => ({\r\n      getSignUp,\r\n    }),\r\n    [],\r\n  );\r\n\r\n  const [actions, isFetchingState] = useActionsWithFetchingState(actionCreators, dispatch);\r\n  return {\r\n    ...data,\r\n    ...actions,\r\n    ...isFetchingState,\r\n  };\r\n};\r\n\r\nexport default useSignUp;\r\n","import './Auth.scss';\r\nimport React from 'react';\r\nimport { Form, Button } from 'antd';\r\nimport { Link } from 'react-router-dom';\r\nimport FormField from 'components/input/FieldAuth';\r\nimport { FormDataErrorType, RegistrationFormType } from 'types';\r\nimport { useTranslation } from 'react-i18next';\r\nimport { emailValidator } from 'helpers/validators';\r\nimport routers from 'const/routers';\r\nimport useSignUp from 'hooks/api/useSignUp';\r\nimport useUserData from 'hooks/api/useUserData';\r\nimport { setToken } from 'helpers/token';\r\nimport { useHistory } from 'react-router';\r\n\r\nconst RegisterForm = () => {\r\n  const { t } = useTranslation();\r\n  const history = useHistory();\r\n  const { getSignUp, getSignUpIsFetching } = useSignUp();\r\n  const { getUserData, getUserDataIsFetching } = useUserData();\r\n  const [formaData, setFormData] = React.useState<RegistrationFormType>({\r\n    email: '',\r\n    fullname: '',\r\n    password: '',\r\n    password_2: '',\r\n  });\r\n  const [error, setError] = React.useState<FormDataErrorType>({\r\n    email: { isValid: false, text: '' },\r\n    fullname: { isValid: false, text: '' },\r\n    password: { isValid: false, text: '' },\r\n    password_2: { isValid: false, text: '' },\r\n  });\r\n\r\n  const handleChange = React.useCallback(\r\n    (event: React.ChangeEvent<HTMLInputElement>) => {\r\n      const { name, value } = event.target;\r\n      if (error[name].isValid === true) {\r\n        setError((prev) => ({ ...prev, [name]: { isValid: false, text: '' } }));\r\n      }\r\n      setFormData((prev) => ({ ...prev, [name]: value }));\r\n    },\r\n    [error],\r\n  );\r\n\r\n  const handleBlur = React.useCallback(\r\n    (event: React.FocusEvent<HTMLInputElement>) => {\r\n      const { name, value } = event.target;\r\n      if (name === 'email' && value) {\r\n        const isValidEmail = !emailValidator(value);\r\n        setError((prev) => ({\r\n          ...prev,\r\n          [name]: {\r\n            isValid: isValidEmail,\r\n            text: isValidEmail ? t('errors.emailNotValid') : '',\r\n          },\r\n        }));\r\n      } else if (name === 'password_2' && value) {\r\n        const passwordEquality = formaData.password !== value;\r\n        setError((prev) => ({\r\n          ...prev,\r\n          [name]: {\r\n            isValid: passwordEquality,\r\n            text: passwordEquality ? t('errors.passwordsEquality') : '',\r\n          },\r\n        }));\r\n      } else if (name === 'password' && formaData.password_2 && value) {\r\n        const passwordEquality = formaData.password !== formaData.password_2;\r\n        setError((prev) => ({\r\n          ...prev,\r\n          password_2: {\r\n            isValid: passwordEquality,\r\n            text: passwordEquality ? t('errors.passwordsEquality') : '',\r\n          },\r\n        }));\r\n      } else {\r\n        setError((prev) => ({\r\n          ...prev,\r\n          [name]: { isValid: !value, text: !value ? t('errors.required') : '' },\r\n        }));\r\n      }\r\n    },\r\n    [t, formaData],\r\n  );\r\n\r\n  const isButtonDisabled = React.useMemo(\r\n    () => Object.values(error).some((item) => item.isValid === true) || getSignUpIsFetching || getUserDataIsFetching,\r\n    [error, getSignUpIsFetching, getUserDataIsFetching],\r\n  );\r\n\r\n  const handleSubmit = React.useCallback(\r\n    (event: React.FormEvent) => {\r\n      event.preventDefault();\r\n      const checkFillingInput = Object.entries(formaData).reduce((acc, [key, value]) => {\r\n        if (!value) {\r\n          setError((prev) => ({\r\n            ...prev,\r\n            [key]: { isValid: true, text: t('errors.required') },\r\n          }));\r\n          return true;\r\n        }\r\n        return acc;\r\n      }, false);\r\n      if (checkFillingInput) {\r\n        return;\r\n      }\r\n      getSignUp({\r\n        ...formaData,\r\n        successCallback: ({ jwtToken }: any) => {\r\n          setToken(jwtToken);\r\n          getUserData({\r\n            successCallback: () => {\r\n              history.push(routers.getBase());\r\n            },\r\n          });\r\n        },\r\n      });\r\n    },\r\n    [t, formaData, getSignUp, getUserData, history],\r\n  );\r\n\r\n  return (\r\n    <section className=\"auth\">\r\n      <div className=\"auth__content\">\r\n        <div className=\"auth__top\">\r\n          <h2>{t('auth.headerRegistration.title')}</h2>\r\n          <p>{t('auth.headerRegistration.subtitle')}</p>\r\n        </div>\r\n        <div>\r\n          <form onSubmit={handleSubmit} className=\"login-form\">\r\n            <FormField\r\n              name=\"email\"\r\n              type=\"text\"\r\n              placeholder={t('auth.input.email')}\r\n              handleChange={handleChange}\r\n              handleBlur={handleBlur}\r\n              value={formaData.email}\r\n              validateStatus={error.email.isValid}\r\n              errorText={error.email.text}\r\n            />\r\n            <FormField\r\n              name=\"fullname\"\r\n              type=\"text\"\r\n              placeholder={t('auth.input.fullName')}\r\n              handleChange={handleChange}\r\n              handleBlur={handleBlur}\r\n              value={formaData.fullname}\r\n              validateStatus={error.fullname.isValid}\r\n              errorText={error.fullname.text}\r\n            />\r\n\r\n            <FormField\r\n              name=\"password\"\r\n              placeholder={t('auth.input.password')}\r\n              type=\"password\"\r\n              handleChange={handleChange}\r\n              handleBlur={handleBlur}\r\n              value={formaData.password}\r\n              validateStatus={error.password.isValid}\r\n              errorText={error.password.text}\r\n            />\r\n            <FormField\r\n              name=\"password_2\"\r\n              placeholder={t('auth.input.password')}\r\n              type=\"password\"\r\n              handleChange={handleChange}\r\n              handleBlur={handleBlur}\r\n              value={formaData.password_2}\r\n              validateStatus={error.password_2.isValid}\r\n              errorText={error.password_2.text}\r\n            />\r\n            <Form.Item>\r\n              <Button\r\n                disabled={isButtonDisabled}\r\n                block\r\n                type=\"primary\"\r\n                htmlType=\"submit\"\r\n                onSubmit={handleSubmit}\r\n                size=\"large\"\r\n              >\r\n                {t('auth.button.registration')}\r\n              </Button>\r\n            </Form.Item>\r\n            <Link className=\"auth__register-link\" to={routers.getSignin()}>\r\n              {t('auth.button.signIn')}\r\n            </Link>\r\n          </form>\r\n        </div>\r\n      </div>\r\n    </section>\r\n  );\r\n};\r\n\r\nexport default RegisterForm;\r\n","import React from 'react';\r\nimport AuthorBlock from 'components/AuthorBlock';\r\nimport { ButtonPlay } from 'components/button';\r\nimport { BookType } from 'types';\r\n\r\nconst CardBook: React.FC<BookType> = ({ _id, imgUrl, name }) => (\r\n  <div className=\"profile__list-card\">\r\n    <div className=\"img\">\r\n      <img src={imgUrl} alt=\"avatar\" />\r\n    </div>\r\n    <div style={{ marginLeft: '20px' }}>\r\n      <h3 className=\"title\">{name}</h3>\r\n      <AuthorBlock name={name} />\r\n      <ButtonPlay bookId={_id} />\r\n    </div>\r\n  </div>\r\n);\r\n\r\nexport default CardBook;\r\n","/*eslint-disable */\r\nimport './Profile.scss';\r\nimport React, { ChangeEvent, ChangeEventHandler, InputHTMLAttributes, useCallback } from 'react';\r\nimport { Card, Image, Typography } from 'antd';\r\nimport { useTranslation } from 'react-i18next';\r\nimport useBooks from 'hooks/api/useBooks';\r\nimport useUserData from 'hooks/api/useUserData';\r\nimport CardBook from './CardBook';\r\n\r\nconst { Title } = Typography;\r\n\r\nconst Profile = () => {\r\n  const { t } = useTranslation();\r\n  const { booksData } = useBooks();\r\n  const { userData, editUserAvatar, updateAvatar } = useUserData();\r\n  const { name, avatar } = userData;\r\n\r\n  const onChange = useCallback((event: any) => {\r\n    const file = event.target.files[0];\r\n    const formData = new FormData();\r\n    formData.append('image', file);\r\n    editUserAvatar({\r\n      file: formData,\r\n      successCallback: ({ avatar }: any) => {\r\n        updateAvatar(avatar);\r\n      },\r\n    });\r\n  }, []);\r\n\r\n  return (\r\n    <div className=\"profile\">\r\n      <div className=\"container\">\r\n        <Card>\r\n          <div className=\"profile__header\">\r\n            <div className=\"profile__header-avatar\">\r\n              <Image width={200} src={avatar} />\r\n              <Title level={2}>{t('profile.avatar.change')}:</Title>\r\n              <input className=\"profile__header-field\" type=\"file\" placeholder=\"asdsad\" onChange={onChange} />\r\n            </div>\r\n            <Title level={1} className=\"profile__header-title\">\r\n              <span style={{ fontSize: '20px' }}>{t('profile.name')}:</span>\r\n              {name}\r\n            </Title>\r\n          </div>\r\n        </Card>\r\n        <Card>\r\n          <Title level={3}>{t('profile.select')}</Title>\r\n          <div className=\"profile__list\">\r\n            {booksData.books.map((book: any) => (\r\n              <CardBook key={book._id} {...book} />\r\n            ))}\r\n          </div>\r\n        </Card>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Profile;\r\n","import './Style.scss';\r\nimport React from 'react';\r\nimport { Input } from 'antd';\r\nimport cn from 'classnames';\r\n\r\nconst { TextArea } = Input;\r\n\r\ntype Props = {\r\n  name?: string;\r\n  value?: string;\r\n  error?: boolean;\r\n  textError?: string;\r\n  placeholder?: string;\r\n  minRows?: number;\r\n  maxRows?: number;\r\n  label?: string;\r\n  styleProp?: any;\r\n  onChange?: (e: React.ChangeEvent<HTMLTextAreaElement>) => void;\r\n  onBlur?: (e: React.FocusEvent<HTMLTextAreaElement>) => void;\r\n};\r\n\r\nconst InputText = (props: Props) => {\r\n  const {\r\n    name,\r\n    value,\r\n    placeholder,\r\n    error,\r\n    minRows = 1,\r\n    maxRows = 1,\r\n    label,\r\n    styleProp,\r\n    onChange,\r\n    onBlur,\r\n    textError,\r\n  } = props;\r\n  return (\r\n    <>\r\n      <label\r\n        id={name}\r\n        className={cn('input__label', {\r\n          'input__label-error': error,\r\n        })}\r\n      >\r\n        {error ? textError : label}\r\n      </label>\r\n      <TextArea\r\n        id={name}\r\n        name={name}\r\n        value={value}\r\n        onChange={onChange}\r\n        placeholder={placeholder}\r\n        autoSize={{ minRows, maxRows }}\r\n        onBlur={onBlur}\r\n        style={styleProp}\r\n      />\r\n    </>\r\n  );\r\n};\r\n\r\nexport default InputText;\r\n","import './AddBook.scss';\r\nimport React from 'react';\r\nimport { Button } from 'antd';\r\nimport TextArea from 'components/input/TextArea';\r\nimport { useDispatch } from 'react-redux';\r\nimport { useTranslation } from 'react-i18next';\r\nimport { FormDataErrorType } from 'types';\r\n\r\nconst initFormData = { name: '', author: '', description: '' };\r\n\r\nconst AddBook = () => {\r\n  const { t } = useTranslation();\r\n  const dispatch = useDispatch();\r\n  const [buttonDisabled, setButtonDisabled] = React.useState(false);\r\n  const [formaData, setFormData] = React.useState(initFormData);\r\n  const [error, setError] = React.useState<FormDataErrorType>({\r\n    name: { isValid: false, text: '' },\r\n    author: { isValid: false, text: '' },\r\n    description: { isValid: false, text: '' },\r\n  });\r\n\r\n  const handleChange = React.useCallback(\r\n    (event: React.ChangeEvent<HTMLTextAreaElement>) => {\r\n      const { name, value } = event.target;\r\n      if (error[name].isValid === true) {\r\n        setError((prev) => ({ ...prev, [name]: { isValid: false, text: '' } }));\r\n      }\r\n      setFormData((prev) => ({ ...prev, [name]: value }));\r\n    },\r\n    [error],\r\n  );\r\n\r\n  const handleBlur = React.useCallback(\r\n    (event: React.FocusEvent<HTMLTextAreaElement>) => {\r\n      const { name, value } = event.target;\r\n      setError((prev) => ({\r\n        ...prev,\r\n        [name]: { isValid: !value, text: !value ? t('errors.required') : '' },\r\n      }));\r\n    },\r\n    [t],\r\n  );\r\n\r\n  const handleSubmit = React.useCallback(\r\n    (event: React.FormEvent) => {\r\n      event.preventDefault();\r\n      const checkFillingInput = Object.entries(formaData).reduce((acc, [key, value]) => {\r\n        if (!value) {\r\n          setError((prev) => ({\r\n            ...prev,\r\n            [key]: { isValid: true, text: t('errors.required') },\r\n          }));\r\n          return true;\r\n        }\r\n        return acc;\r\n      }, false);\r\n      if (checkFillingInput) {\r\n        return;\r\n      }\r\n      // dispatch(Actions.requestAddBook(formaData));\r\n      // setButtonDisabled(true);\r\n      // setTimeout(() => {\r\n      setButtonDisabled(false);\r\n      //   setFormData(initFormData);\r\n      // }, 2000);\r\n    },\r\n    [formaData, dispatch, t],\r\n  );\r\n\r\n  const isButtonDisabled = React.useMemo(\r\n    () => Object.values(error).some((item) => item.isValid === true) || buttonDisabled,\r\n    [error, buttonDisabled],\r\n  );\r\n\r\n  return (\r\n    <div className=\"addbook\">\r\n      <div className=\"container\">\r\n        <div className=\"addbook-wrap\">\r\n          <form className=\"addbook__form\" onSubmit={handleSubmit}>\r\n            <TextArea\r\n              name=\"name\"\r\n              value={formaData.name}\r\n              onChange={handleChange}\r\n              onBlur={handleBlur}\r\n              label={t('book.input.name')}\r\n              placeholder={t('book.input.name')}\r\n              error={error.name.isValid}\r\n              textError={error.name.text}\r\n              styleProp={{ width: '500px' }}\r\n            />\r\n            <TextArea\r\n              name=\"author\"\r\n              value={formaData.author}\r\n              onChange={handleChange}\r\n              onBlur={handleBlur}\r\n              label={t('book.input.author')}\r\n              placeholder={t('book.input.author')}\r\n              error={error.author.isValid}\r\n              textError={error.author.text}\r\n              styleProp={{ width: '500px' }}\r\n            />\r\n            <TextArea\r\n              name=\"description\"\r\n              value={formaData.description}\r\n              onChange={handleChange}\r\n              onBlur={handleBlur}\r\n              label={t('book.input.description')}\r\n              placeholder={t('book.input.description')}\r\n              error={error.description.isValid}\r\n              textError={error.description.text}\r\n              minRows={3}\r\n              maxRows={7}\r\n              styleProp={{ width: '500px' }}\r\n            />\r\n            <div className=\"addbook__btn\">\r\n              <Button type=\"primary\" htmlType=\"submit\" disabled={isButtonDisabled}>\r\n                {t('global.save')}\r\n              </Button>\r\n            </div>\r\n          </form>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default AddBook;\r\n","import routers from 'const/routers';\r\nimport { getToken } from 'helpers/token';\r\nimport useUserData from 'hooks/api/useUserData';\r\nimport React, { FC } from 'react';\r\nimport { Route, Redirect } from 'react-router-dom';\r\n\r\ninterface IPublicRoute {\r\n  component: () => any;\r\n  exact?: boolean;\r\n  path: string;\r\n  url?: string;\r\n}\r\n\r\nconst PublicRoute: FC<IPublicRoute> = ({ component: Component, ...rest }) => {\r\n  const { userData } = useUserData();\r\n  if (!getToken() && !userData.id) {\r\n    return <Route exact={rest.exact} path={rest.path} render={() => <Component />} />;\r\n  }\r\n  return <Redirect to={routers.getBase()} />;\r\n};\r\n\r\nexport default PublicRoute;\r\n","import React, { FC } from 'react';\r\nimport { Route, Redirect } from 'react-router-dom';\r\nimport routers from 'const/routers';\r\nimport useUserData from 'hooks/api/useUserData';\r\nimport { getToken } from 'helpers/token';\r\n\r\ntype PrivateRouteType = {\r\n  component: () => any;\r\n  exact?: boolean;\r\n  path: string;\r\n};\r\n\r\nconst PrivateRoute: FC<PrivateRouteType> = ({ component: Component, ...rest }) => {\r\n  const { userData } = useUserData();\r\n  if (getToken() && !!userData.id) {\r\n    return <Route exact={rest.exact} path={rest.path} render={() => <Component />} />;\r\n  }\r\n  return <Redirect to={routers.getSignin()} />;\r\n};\r\n\r\nexport default PrivateRoute;\r\n","import React, { Suspense } from 'react';\r\nimport { Switch, Redirect, Route } from 'react-router';\r\nimport { BrowserRouter as Router } from 'react-router-dom';\r\nimport Layout from 'components/Layout';\r\nimport Home from 'page/Home';\r\nimport routers from 'const/routers';\r\nimport Loader from 'components/Loader';\r\nimport Signin from 'page/Signin';\r\nimport Signup from 'page/Signup';\r\nimport Profile from 'page/Profile';\r\nimport AddBook from 'page/AddBook';\r\nimport PublicRoute from './PublicRoute';\r\nimport PrivateRoute from './PrivateRoute';\r\n\r\nconst AppRouters = () => (\r\n  <Router>\r\n    <Layout>\r\n      <Suspense fallback={<Loader />}>\r\n        <Switch>\r\n          <PublicRoute exact path={routers.getSignin()} component={() => <Signin />} />\r\n          <PublicRoute exact path={routers.getSignup()} component={() => <Signup />} />\r\n          <PrivateRoute exact path={routers.getAddBook()} component={() => <AddBook />} />\r\n          <PrivateRoute exact path={routers.getProfile()} component={() => <Profile />} />\r\n          <Route path={routers.getBase()} component={() => <Home />} />\r\n          <Route path=\"*\">\r\n            <Redirect to={routers.getBase()} />\r\n          </Route>\r\n        </Switch>\r\n      </Suspense>\r\n    </Layout>\r\n  </Router>\r\n);\r\n\r\nexport default AppRouters;\r\n","import React from 'react';\r\nimport useScreen from 'hooks/api/useScreen';\r\n\r\nconst StalerScreen = ({ children }: any) => {\r\n  const { setScreenData } = useScreen();\r\n\r\n  const resizeHandler = React.useCallback(() => {\r\n    const screenDimensions = {\r\n      width: window.innerWidth,\r\n      height: window.innerHeight,\r\n    };\r\n    setScreenData(screenDimensions);\r\n  }, [setScreenData]);\r\n\r\n  React.useEffect(() => {\r\n    window.addEventListener('resize', resizeHandler);\r\n    return () => window.removeEventListener('resize', resizeHandler);\r\n  }, [resizeHandler]);\r\n\r\n  React.useEffect(() => {\r\n    const screenDimensions = {\r\n      width: window.innerWidth,\r\n      height: window.innerHeight,\r\n    };\r\n    setScreenData(screenDimensions);\r\n  }, [setScreenData]);\r\n\r\n  return children;\r\n};\r\n\r\nexport default StalerScreen;\r\n","import { actionTypes } from 'redux-query';\r\nimport { toast } from 'react-toastify';\r\nimport i18n from 'i18next';\r\n\r\n//   meta.successCallback,   .\r\n\r\nexport default () => (next: any) => (action: any) => {\r\n  if (action.type === actionTypes.REQUEST_SUCCESS) {\r\n    const { successCallback, showSuccess } = action.meta;\r\n\r\n    if (showSuccess) {\r\n      toast(i18n.t('global.messages.ok'));\r\n    }\r\n\r\n    if (successCallback) {\r\n      successCallback(action.responseBody, action);\r\n    }\r\n  }\r\n\r\n  return next(action);\r\n};\r\n","import { actionTypes } from 'redux-query';\r\nimport { removeToken } from 'helpers/token';\r\nimport { toast } from 'react-toastify';\r\n\r\n//   meta.errorCallback,   .\r\n\r\nexport default () => (next: any) => (action: any) => {\r\n  if (action.type === actionTypes.REQUEST_FAILURE) {\r\n    const { errorCallback, withoutErrorText } = action.meta;\r\n    if (action.status === 401) {\r\n      removeToken();\r\n    }\r\n\r\n    if (!withoutErrorText) {\r\n      let errorText: string = 'Errors';\r\n      if (action?.responseBody) {\r\n        errorText = action?.responseBody.message;\r\n      }\r\n\r\n      toast.error(errorText);\r\n    }\r\n\r\n    if (errorCallback) {\r\n      errorCallback(action.responseBody, action);\r\n    }\r\n  }\r\n\r\n  return next(action);\r\n};\r\n","import { actionTypes } from 'redux-query';\r\n\r\n//      :\r\n\r\nexport default () => (next: any) => (action: any) => {\r\n  if (action.type === actionTypes.REQUEST_ASYNC || action.type === actionTypes.MUTATE_ASYNC) {\r\n    const callAPI = action;\r\n\r\n    if (!action.force) {\r\n      callAPI.force = true;\r\n    }\r\n\r\n    if (!action.meta) {\r\n      callAPI.meta = {};\r\n    }\r\n\r\n    if (!action.update) {\r\n      callAPI.update = {};\r\n    }\r\n  }\r\n\r\n  return next(action);\r\n};\r\n","import _ from 'lodash';\r\nimport { actionTypes } from 'redux-query';\r\nimport { getToken } from 'helpers/token';\r\n\r\n//      api\r\n\r\nexport default () => (next: any) => (action: any) => {\r\n  if (\r\n    (_.isEqual(action.type, actionTypes.REQUEST_ASYNC) || _.isEqual(action.type, actionTypes.MUTATE_ASYNC)) &&\r\n    action.meta.authToken\r\n  ) {\r\n    const callAPI = action;\r\n    delete callAPI.meta.authToken;\r\n    const userToken = getToken();\r\n\r\n    if (userToken) {\r\n      callAPI.options.headers = {\r\n        ...callAPI.options.headers,\r\n        Authorization: `Bearer ${userToken}`,\r\n      };\r\n    }\r\n    return next(action);\r\n  }\r\n  return next(action);\r\n};\r\n","import { createStore, applyMiddleware } from 'redux';\r\nimport { queryMiddleware } from 'redux-query';\r\nimport superagentInterface from 'redux-query-interface-superagent';\r\nimport logger from 'redux-logger';\r\nimport requestSuccessMiddleware from 'middlewares/requestSuccessMiddleware';\r\nimport requestFailureMiddleware from 'middlewares/requestFailureMiddleware';\r\nimport requestStartMiddleware from 'middlewares/requestStartMiddleware';\r\nimport authTokenMiddleware from 'middlewares/authTokenMiddleware';\r\nimport rootReducer, { getEntities, getQueries } from 'reducers';\r\n\r\nconst configurationStore = () => {\r\n  let customMiddlewares = [\r\n    authTokenMiddleware,\r\n    requestStartMiddleware,\r\n    requestSuccessMiddleware,\r\n    requestFailureMiddleware,\r\n    queryMiddleware(superagentInterface, getQueries, getEntities),\r\n  ];\r\n  if (process.env.NODE_ENV !== 'production') {\r\n    customMiddlewares = [...customMiddlewares, logger];\r\n  }\r\n  const middlewares = applyMiddleware(...customMiddlewares);\r\n\r\n  return createStore(rootReducer, middlewares);\r\n};\r\n\r\nconst store = configurationStore();\r\n\r\nexport default store;\r\n","import { getLanguage } from 'helpers/token';\r\nimport i18n from 'i18next';\r\nimport LanguageDetector from 'i18next-browser-languagedetector';\r\nimport backend from 'i18next-http-backend';\r\nimport { initReactI18next } from 'react-i18next';\r\nimport en from './en.json';\r\nimport ru from './ru.json';\r\n\r\ni18n\r\n  .use(backend)\r\n  .use(LanguageDetector)\r\n  .use(initReactI18next)\r\n  .init({\r\n    lng: getLanguage() || 'ru',\r\n    fallbackLng: ['en', 'ru'],\r\n    debug: process.env.NODE_ENV !== 'production',\r\n    resources: {\r\n      en: {\r\n        translation: en,\r\n      },\r\n      ru: {\r\n        translation: ru,\r\n      },\r\n    },\r\n    detection: {\r\n      order: ['localStorage'],\r\n      caches: ['localStorage'],\r\n    },\r\n    interpolation: {\r\n      escapeValue: false,\r\n    },\r\n  });\r\n\r\n//         i18n    \r\n// i18n.on('languageChanged', (lng) => {\r\n// });\r\n","import React from 'react';\r\nimport { Provider } from 'react-redux';\r\nimport AppRouters from 'components/AppRouter';\r\nimport { Provider as ReduxQueryProvider } from 'redux-query-react';\r\nimport StalerScreen from 'settings';\r\nimport { createUseStyles } from 'react-jss';\r\nimport store from 'configureStore';\r\nimport { ToastContainer } from 'react-toastify';\r\nimport { getQueries } from 'reducers';\r\nimport 'react-toastify/dist/ReactToastify.css';\r\nimport './style/App.scss';\r\nimport 'localization';\r\n\r\nconst App = () => {\r\n  useStyles();\r\n  return (\r\n    <Provider store={store}>\r\n      <ReduxQueryProvider queriesSelector={getQueries}>\r\n        <StalerScreen>\r\n          <ToastContainer />\r\n          <AppRouters />\r\n        </StalerScreen>\r\n      </ReduxQueryProvider>\r\n    </Provider>\r\n  );\r\n};\r\n\r\nconst useStyles = createUseStyles({\r\n  '@global': {\r\n    '*': {\r\n      boxSizing: 'border-box',\r\n      margin: 0,\r\n      padding: 0,\r\n    },\r\n\r\n    body: {\r\n      minHeight: '100vh',\r\n      fontFamily: 'LatoRegular, sans-serif',\r\n      fontSize: '13px',\r\n      '&::-webkit-scrollbar': {\r\n        width: '10px',\r\n      },\r\n      '&::-webkit-scrollbar-track': {\r\n        boxShadow: '5px 5px 5px -5px rgba(34, 60, 80, 0.2) inset',\r\n        backgroundColor: '#f9f9fd',\r\n        borderRadius: '10px',\r\n      },\r\n      '&::-webkit-scrollbar-thumb': {\r\n        borderRadius: '10px',\r\n        background: 'linear-gradient(180deg, #00c6fb, #005bea)',\r\n      },\r\n    },\r\n    h1: {\r\n      margin: '15px 0',\r\n    },\r\n    h2: {\r\n      fontFamily: 'MullerBold, sans-serif',\r\n      fontSize: '40px',\r\n      fontStyle: 'normal',\r\n      fontWeight: '700',\r\n      lineHeight: '46px',\r\n    },\r\n    h3: {\r\n      fontFamily: 'MullerBold, sans-serif',\r\n    },\r\n    h4: {\r\n      margin: '10px 0',\r\n    },\r\n    a: {\r\n      fontFamily: 'MullerRegular, sans-serif',\r\n      textDecoration: 'none',\r\n      color: 'inherit',\r\n      '&:focus': {\r\n        outline: 'none',\r\n      },\r\n    },\r\n    button: {\r\n      fontFamily: 'MullerRegular, sans-serif',\r\n      background: 'none',\r\n      border: 0,\r\n      '&:focus': {\r\n        outline: 'none',\r\n      },\r\n    },\r\n    input: {\r\n      fontFamily: 'LatoRegular, sans-serif',\r\n      fontSize: '20px',\r\n      border: 0,\r\n      '&:focus': {\r\n        outline: 'none',\r\n      },\r\n      '&:invalid': {\r\n        boxShadow: 'none',\r\n      },\r\n    },\r\n    textarea: {\r\n      fontFamily: 'LatoRegular, sans-serif',\r\n      fontSize: '20px',\r\n      border: 0,\r\n      '&:focus': {\r\n        outline: 'none',\r\n      },\r\n    },\r\n  },\r\n});\r\n\r\nexport const useGlobalStyles = createUseStyles({\r\n  container: {\r\n    maxWidth: '1200px',\r\n    margin: '0 auto',\r\n    padding: '0 10px',\r\n  },\r\n});\r\n\r\nexport default App;\r\n","// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read http://bit.ly/CRA-PWA\r\n/* eslint-disable */\r\n\r\nconst isLocalhost = Boolean(\r\n\twindow.location.hostname === 'localhost' ||\r\n\t\t// [::1] is the IPv6 localhost address.\r\n\t\twindow.location.hostname === '[::1]' ||\r\n\t\t// 127.0.0.1/8 is considered localhost for IPv4.\r\n\t\twindow.location.hostname.match(\r\n\t\t\t/^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n\t\t)\r\n)\r\n\r\nexport function register(config) {\r\n\tif (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n\t\t// The URL constructor is available in all browsers that support SW.\r\n\t\tconst publicUrl = new URL(process.env.PUBLIC_URL, window.location.href)\r\n\t\tif (publicUrl.origin !== window.location.origin) {\r\n\t\t\t// Our service worker won't work if PUBLIC_URL is on a different origin\r\n\t\t\t// from what our page is served on. This might happen if a CDN is used to\r\n\t\t\t// serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n\t\t\treturn\r\n\t\t}\r\n\r\n\t\twindow.addEventListener('load', () => {\r\n\t\t\tconst swUrl = `${process.env.PUBLIC_URL}/service-worker.js`\r\n\r\n\t\t\tif (isLocalhost) {\r\n\t\t\t\t// This is running on localhost. Let's check if a service worker still exists or not.\r\n\t\t\t\tcheckValidServiceWorker(swUrl, config)\r\n\r\n\t\t\t\t// Add some additional logging to localhost, pointing developers to the\r\n\t\t\t\t// service worker/PWA documentation.\r\n\t\t\t\tnavigator.serviceWorker.ready.then(() => {\r\n\t\t\t\t\tconsole.log(\r\n\t\t\t\t\t\t'This web app is being served cache-first by a service ' +\r\n\t\t\t\t\t\t\t'worker. To learn more, visit http://bit.ly/CRA-PWA'\r\n\t\t\t\t\t)\r\n\t\t\t\t})\r\n\t\t\t} else {\r\n\t\t\t\t// Is not localhost. Just register service worker\r\n\t\t\t\tregisterValidSW(swUrl, config)\r\n\t\t\t}\r\n\t\t})\r\n\t}\r\n}\r\n\r\nfunction registerValidSW(swUrl, config) {\r\n\tnavigator.serviceWorker\r\n\t\t.register(swUrl)\r\n\t\t.then(registration => {\r\n\t\t\tregistration.onupdatefound = () => {\r\n\t\t\t\tconst installingWorker = registration.installing\r\n\t\t\t\tif (installingWorker == null) {\r\n\t\t\t\t\treturn\r\n\t\t\t\t}\r\n\t\t\t\tinstallingWorker.onstatechange = () => {\r\n\t\t\t\t\tif (installingWorker.state === 'installed') {\r\n\t\t\t\t\t\tif (navigator.serviceWorker.controller) {\r\n\t\t\t\t\t\t\t// At this point, the updated precached content has been fetched,\r\n\t\t\t\t\t\t\t// but the previous service worker will still serve the older\r\n\t\t\t\t\t\t\t// content until all client tabs are closed.\r\n\t\t\t\t\t\t\tconsole.log(\r\n\t\t\t\t\t\t\t\t'New content is available and will be used when all ' +\r\n\t\t\t\t\t\t\t\t\t'tabs for this page are closed. See http://bit.ly/CRA-PWA.'\r\n\t\t\t\t\t\t\t)\r\n\r\n\t\t\t\t\t\t\t// Execute callback\r\n\t\t\t\t\t\t\tif (config && config.onUpdate) {\r\n\t\t\t\t\t\t\t\tconfig.onUpdate(registration)\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t// At this point, everything has been precached.\r\n\t\t\t\t\t\t\t// It's the perfect time to display a\r\n\t\t\t\t\t\t\t// \"Content is cached for offline use.\" message.\r\n\t\t\t\t\t\t\tconsole.log('Content is cached for offline use.')\r\n\r\n\t\t\t\t\t\t\t// Execute callback\r\n\t\t\t\t\t\t\tif (config && config.onSuccess) {\r\n\t\t\t\t\t\t\t\tconfig.onSuccess(registration)\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t})\r\n\t\t.catch(error => {\r\n\t\t\tconsole.error('Error during service worker registration:', error)\r\n\t\t})\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl, config) {\r\n\t// Check if the service worker can be found. If it can't reload the page.\r\n\tfetch(swUrl)\r\n\t\t.then(response => {\r\n\t\t\t// Ensure service worker exists, and that we really are getting a JS file.\r\n\t\t\tconst contentType = response.headers.get('content-type')\r\n\t\t\tif (\r\n\t\t\t\tresponse.status === 404 ||\r\n\t\t\t\t(contentType != null && contentType.indexOf('javascript') === -1)\r\n\t\t\t) {\r\n\t\t\t\t// No service worker found. Probably a different app. Reload the page.\r\n\t\t\t\tnavigator.serviceWorker.ready.then(registration => {\r\n\t\t\t\t\tregistration.unregister().then(() => {\r\n\t\t\t\t\t\twindow.location.reload()\r\n\t\t\t\t\t})\r\n\t\t\t\t})\r\n\t\t\t} else {\r\n\t\t\t\t// Service worker found. Proceed as normal.\r\n\t\t\t\tregisterValidSW(swUrl, config)\r\n\t\t\t}\r\n\t\t})\r\n\t\t.catch(() => {\r\n\t\t\tconsole.log(\r\n\t\t\t\t'No internet connection found. App is running in offline mode.'\r\n\t\t\t)\r\n\t\t})\r\n}\r\n\r\nexport function unregister() {\r\n\tif ('serviceWorker' in navigator) {\r\n\t\tnavigator.serviceWorker.ready.then(registration => {\r\n\t\t\tregistration.unregister()\r\n\t\t})\r\n\t}\r\n}\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport App from './App';\r\nimport * as serviceWorker from './serviceWorker';\r\n\r\nReactDOM.render(<App />, document.getElementById('root'));\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: http://bit.ly/CRA-PWA\r\nserviceWorker.unregister();\r\n"],"sourceRoot":""}