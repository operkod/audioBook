{"version":3,"sources":["redux/selectors/index.tsx","assets/audio/as.mp3","redux/reducer/audio.ts","redux/reducer/user.ts","redux/reducer/comments.ts","redux/reducer/books.ts","redux/reducer/index.ts","redux/reducer/app.ts","api/index.tsx","api/book.ts","helpers/openNotification.ts","redux/saga/books.ts","redux/saga/comments.ts","api/user.ts","redux/saga/user.ts","redux/saga/index.ts","redux/store.ts","components/AppRouter/PrivateRoute.tsx","components/AppRouter/PublicRoute.tsx","page/Home/index.tsx","components/AppRouter/index.tsx","localization/index.ts","App.tsx","serviceWorker.js","index.js","const/routers.tsx","helpers/token.tsx","redux/action/user.ts","redux/action/books.ts","redux/action/comments.ts","components/Loader/index.tsx","assets/img/logo.svg","components/Language/index.tsx","components/Header/index.tsx","assets/img/comment.svg","assets/img/like-up.svg","assets/img/like.svg","components/Article/index.tsx","assets/img/author.svg","components/AuthorBlock/index.tsx","assets/img/user.svg","components/Menu/components/WebMenu.tsx","components/Menu/components/MobileMenu.tsx","components/Menu/index.tsx","redux/action/audioPlayer.ts","components/AudioPlayer/index.tsx","components/Modal/index.tsx","components/Comment/index.tsx","assets/img/play.svg","assets/img/stop.svg","components/ButtonPlay/index.tsx","components/Layout/index.tsx"],"names":["getAuth","state","user","isAuth","getAuthLoading","isLoading","getAvatar","data","avatar","getUserName","fullname","getAudioId","audio","id","getPlay","isPlay","getAudioSrc","item","getComments","comments","items","getCommentsShow","isShow","getCommentsLoader","isLoader","getCommentsCount","length","getBooks","books","getTotalBooks","total","getBooksPage","page","getSearchValue","searchValue","getBooksIsLoader","initialState","initialUser","getToken","rootReducer","combineReducers","app","language","getLanguage","type","payload","produce","draft","action","push","index","findIndex","el","_id","pop","bookId","status","count","likes","axios","defaults","baseURL","window","location","origin","_getHeadersToken","headers","authorization","cacheRequests","Map","getBook","a","search","host","has","get","response","set","Promise","resolve","setBookComment","postData","post","getBookComment","setLike","openNotification","text","title","duration","notification","message","description","workerRequestBook","workerRequestAddBook","workerRequestAddLike","sagaWatcherBook","put","Actions","setBooksLoader","call","setBooks","setTotalNumberBooks","fakeApi","time","setTimeout","name","author","responseAddBook","select","takeEvery","sagaWorkerComment","sagaWorkerAddComment","sagaWatcherComment","isShowComments","setCommentId","setComments","createComment","addComment","ActionsBooks","addCountBook","getMe","signIn","signUp","savePhoto","photoFile","formData","FormData","append","workerLogout","workerAuthorization","workerRegistration","workerProfile","workerUpdateAvatar","watcherUser","removeToken","setIsAuth","setToken","token","setUserData","logOut","rootWatcher","all","saga","createSagaMiddleware","middleware","thunk","logger","store","createStore","applyMiddleware","run","PrivateRoute","Component","component","rest","useSelector","exact","path","render","to","routers","getSignin","PublicRoute","getBase","Home","dispatch","useDispatch","history","useHistory","React","useEffect","queryString","parse","parseNumbers","parseBooleans","value","setPage","Number","String","str","stringify","skipNull","hash","requestBook","className","style","height","map","book","textAlign","fontSize","fontWeight","current","defaultCurrent","defaultPageSize","onChange","Signin","lazy","Signup","Profile","AddBook","AppRouters","fallback","Loader","getSignup","getAddBook","getProfile","i18n","use","backend","LanguageDetector","initReactI18next","init","lng","fallbackLng","debug","process","resources","en","translation","ru","detection","order","caches","interpolation","escapeValue","userProfile","App","AppRouter","Boolean","hostname","match","ReactDOM","document","getElementById","navigator","serviceWorker","ready","then","registration","unregister","TOKEN","LANGUAGE","localStorage","setItem","getItem","removeItem","fetchAuthorization","fetchRegistration","updateAvatar","addCommentBookError","requestAddBook","requestAddLike","fetchComments","fetchAddComment","display","justifyContent","alignItems","size","Language","useState","active","setActive","useTranslation","changeLanguage","lang","Container","Item","onClick","styled","ul","li","css","Search","Input","Header","valueChecked","onChangeTheme","t","HeaderStyle","src","logoIcon","alt","placeholder","onSearch","trim","defaultValue","enterButton","header","props","theme","backgroundColor","secondary","color","primary","Article","imgUrl","ArticleStyle","logo","valueStyle","whiteSpace","prefix","ActionsBook","like","likeUp","icon","commentIcon","ActionsComment","div","AuthorBlock","classNames","authorIcon","WebMenu","overlay","danger","placement","userIcon","MobileMenu","block","width","innerWidth","Menu","showMenu","setShowMenu","handleResize","useCallback","clientWidth","body","addEventListener","removeEventListener","AudioPlayer","myPlayer","useRef","audioSrc","play","pause","handleClick","autoPlay","ref","onPlay","onPause","autoPlayAfterSrcChange","mapDispatchToProps","connect","setValue","visible","onOk","onCancel","footer","Comment","e","target","CommentBase","setLikes","dislikes","setDislikes","setAction","actions","createElement","LikeFilled","LikeOutlined","DislikeFilled","DislikeOutlined","content","pathMp3","require","ButtonPlay","audioPlayerId","default","stopIcon","playIcon","themeWhite","themeBlack","MyLayout","children","setTheme","isAudio","showModal","Wrapper"],"mappings":"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","file":"static/js/main.d15e8889.chunk.js","sourcesContent":["import { StateType } from 'redux/reducer'\r\n\r\nconst getAuth = (state: StateType) => state.user.isAuth\r\nconst getAuthLoading = (state: StateType) => state.user.isLoading\r\n\r\nconst getAvatar = (state: StateType) => state.user.data?.avatar\r\nconst getUserName = (state: StateType) => state.user.data?.fullname\r\n\r\nconst getAudioId = (state: StateType) => state.audio.id\r\nconst getPlay = (state: StateType) => state.audio.isPlay\r\nconst getAudioSrc = (state: StateType) => state.audio.item\r\n\r\nconst getComments = (state: StateType) => state.comments.items\r\nconst getCommentsShow = (state: StateType) => state.comments.isShow\r\nconst getCommentsLoader = (state: StateType) => state.comments.isLoader\r\nconst getCommentsCount = (state: StateType) => state.comments.items.length\r\n\r\nconst getBooks = (state: StateType) => state.books.items\r\nconst getTotalBooks = (state: StateType) => state.books.total\r\nconst getBooksPage = (state: StateType) => state.books.page\r\nconst getSearchValue = (state: StateType) => state.books.searchValue\r\nconst getBooksIsLoader = (state: StateType) => state.books.isLoader\r\n\r\nconst getLanguage = (state: StateType) => state.app.language\r\n\r\nexport {\r\n\tgetAuth,\r\n\tgetAuthLoading,\r\n\tgetAudioId,\r\n\tgetPlay,\r\n\tgetAudioSrc,\r\n\tgetAvatar,\r\n\tgetComments,\r\n\tgetCommentsShow,\r\n\tgetCommentsLoader,\r\n\tgetBooks,\r\n\tgetTotalBooks,\r\n\tgetSearchValue,\r\n\tgetUserName,\r\n\tgetCommentsCount,\r\n\tgetLanguage,\r\n\tgetBooksIsLoader,\r\n\tgetBooksPage\r\n}\r\n","export default __webpack_public_path__ + \"static/media/as.75695496.mp3\";","import produce from \"immer\"\r\nimport { ActionsTypes } from \"redux/action/audioPlayer\"\r\n\r\ntype InitialStateType = typeof initialState\r\n\r\n\r\nconst initialState = {\r\n  id: '',\r\n  item: \"\",\r\n  isPlay: false\r\n}\r\n\r\nexport const audio = (state = initialState, action: ActionsTypes): InitialStateType => {\r\n  return produce(state, draft => {\r\n    switch (action.type) {\r\n      case \"AUDIO@SET_ID\":\r\n        draft.id = action.payload\r\n        break\r\n      case \"AUDIO@SET_ITEM\":\r\n        draft.item = action.payload\r\n        break\r\n      case \"AUDIO@IS_PLAY\":\r\n        draft.isPlay = action.payload\r\n        break\r\n      default:\r\n        return state\r\n    }\r\n  })\r\n}\r\n","import { getToken } from 'helpers/token'\r\nimport produce from 'immer'\r\nimport { ActionsTypes } from 'redux/action/user'\r\n\r\ntype initialStateType = typeof initialState\r\nconst initialUser = { id: '', avatar: '', fullname: '' }\r\nexport type ProfileTypes = {\r\n  id: string\r\n  avatar: string\r\n  fullname: string\r\n}\r\nconst initialState = {\r\n  isAuth: !!getToken(),\r\n  data: initialUser as ProfileTypes,\r\n  isLoading: false\r\n}\r\n\r\nexport const user = (state = initialState, action: ActionsTypes): initialStateType => {\r\n  return produce(state, draft => {\r\n    switch (action.type) {\r\n      case 'USER@IS_AUTH':\r\n        draft.isAuth = action.payload\r\n        break\r\n      case 'USER@SET_DATA':\r\n        draft.data = action.payload\r\n        break\r\n      case 'USER@LOG_OUT':\r\n        draft.data = initialUser\r\n        break\r\n      case 'USER@LOADER':\r\n        draft.isLoading = action.payload\r\n        break\r\n      default:\r\n    }\r\n  })\r\n}\r\n","import produce from \"immer\"\r\nimport { ActionsTypes } from \"redux/action/comments\"\r\nimport { CommentsType } from \"types\"\r\n\r\n\r\ntype initialStateType = typeof initialState\r\nconst initialState = {\r\n  id: \"\",\r\n  items: [] as Array<CommentsType>,\r\n  isShow: false,\r\n  isLoader: false\r\n}\r\n\r\nexport const comments = (state = initialState, action: ActionsTypes): initialStateType => {\r\n  return produce(state, draft => {\r\n    switch (action.type) {\r\n      case \"COMMENTS@IS_SHOW\":\r\n        draft.isShow = action.payload\r\n        break\r\n      case \"COMMENTS@SET_ID\":\r\n        draft.id = action.payload\r\n        break\r\n      case \"COMMENTS@SET_ITEM\":\r\n        draft.items = action.payload\r\n        break\r\n      case \"COMMENTS@IS_LOADER\":\r\n        draft.isLoader = action.payload\r\n        break\r\n      case \"COMMENTS@ADD_ITEM\":\r\n        draft.items.push(action.payload)\r\n        break\r\n      default:\r\n    }\r\n  })\r\n}\r\n","import produce from \"immer\"\r\nimport { ActionsTypes } from \"redux/action/books\"\r\nimport { BookType } from \"types\"\r\n\r\n\r\nexport type InitialStateType = typeof initialState\r\n\r\nconst initialState = {\r\n  items: [] as Array<BookType>,\r\n  total: 0,\r\n  searchValue: null as null | string,\r\n  page: null as null | number,\r\n  isLoader: false\r\n}\r\n\r\nexport const books = (state = initialState, action: ActionsTypes): InitialStateType => {\r\n  return produce(state, draft => {\r\n    switch (action.type) {\r\n      case \"BOOKS@SET_ITEMS\":\r\n        draft.items = action.payload\r\n        break\r\n      case \"BOOKS@IS_LOADER\":\r\n        draft.isLoader = action.payload\r\n        break\r\n      case \"BOOKS@SET_PAGE\":\r\n        draft.page = action.payload\r\n        break\r\n      case \"BOOKS@SET_TOTAL_NUMBER_BOOKS\":\r\n        draft.total = action.payload\r\n        break\r\n      case \"BOOKS@SEARCH_VALUE\":\r\n        draft.searchValue = action.payload\r\n        break\r\n      case \"BOOKS@ADD_COMMENT\": {\r\n        const index = draft.items.findIndex(el => el._id === action.payload)\r\n        draft.items[index].comments.push(action.payload)\r\n        break\r\n      }\r\n      case \"BOOKS@ADD_COMMENT_ERROR\":\r\n        const index = draft.items.findIndex(el => el._id === action.payload)\r\n        draft.items[index].comments.pop()\r\n        break\r\n      case \"BOOKS@SET_LIKE\": {\r\n        const { bookId, status } = action.payload\r\n        const index = draft.items.findIndex(el => el._id === bookId)\r\n        const count = draft.items[index].likes.count\r\n        if (status) {\r\n          draft.items[index].likes.count = count + 1\r\n        } else {\r\n          draft.items[index].likes.count = count - 1\r\n        }\r\n        draft.items[index].likes.status = status\r\n        break\r\n      }\r\n      default:\r\n    }\r\n  })\r\n}\r\n","import { combineReducers } from 'redux'\r\nimport { app } from './app'\r\nimport { audio } from './audio'\r\nimport { user } from './user'\r\nimport { comments } from './comments'\r\nimport { books } from './books'\r\n\r\nconst rootReducer = combineReducers({\r\n  app,\r\n  user,\r\n  audio,\r\n  comments,\r\n  books\r\n})\r\n\r\ntype rootReducerType = typeof rootReducer\r\nexport type StateType = ReturnType<rootReducerType>\r\n\r\ntype PropertiesTypes<T> = T extends { [key: string]: infer U } ? U : never\r\n\r\nexport type InferActionsTypes<T extends { [key: string]: (...arg: any[]) => any }> = ReturnType<PropertiesTypes<T>>\r\n\r\nexport default rootReducer\r\n\r\n","import { getLanguage } from \"helpers/token\"\r\nimport produce from \"immer\"\r\n\r\n// 'en', 'ru'\r\nexport const app = (state = { language: getLanguage() || 'ru' }, { type, payload }: any) => {\r\n  return produce(state, draft => {\r\n    switch (type) {\r\n      case \"APP@SET_LANGUAGE\":\r\n        draft.language = payload\r\n        break\r\n      default:\r\n    }\r\n  })\r\n}\r\n","import axios from 'axios'\r\n\r\naxios.defaults.baseURL = window.location.origin\r\n\r\nexport default axios","import { AxiosResponse } from 'axios'\r\nimport axios from './'\r\nimport { BookType } from \"types\"\r\nimport { getToken } from 'helpers/token'\r\n\r\nconst _getHeadersToken = () => ({\r\n  headers: {\r\n    authorization: `Bearer ${getToken()}`\r\n  }\r\n})\r\nexport type ResBooks = {\r\n  books: Array<BookType>\r\n  total: number\r\n}\r\nexport type ResComment = {\r\n  _id: string\r\n  author: string\r\n  text: string\r\n}\r\n\r\n// ===== TODO ======\r\nconst cacheRequests = new Map()\r\nconst getBook = async ({ page = 1, search }: { page?: number, search?: string }): Promise<AxiosResponse<ResBooks>> => {\r\n  let host = `/book?page=${page}`\r\n  if (search) {\r\n    host = host + `&search=${search}`\r\n  }\r\n  if (!cacheRequests.has(host)) {\r\n    const response = await axios.get(host, _getHeadersToken())\r\n    cacheRequests.set(host, response)\r\n  }\r\n  return new Promise((resolve) => resolve(cacheRequests.get(host)))\r\n}\r\n\r\nconst setBook = (book: any): Promise<AxiosResponse<ResBooks>> => axios.post(`/book/add`, book, _getHeadersToken())\r\n\r\nconst setBookComment = (postData: any): Promise<AxiosResponse<any>> => axios.post(`/book/addcomment`, postData, {\r\n  headers: {\r\n    authorization: `Bearer ${getToken()}`\r\n  }\r\n})\r\n\r\nconst getBookComment = (id: string): Promise<AxiosResponse<Array<ResComment>>> => axios.post(`/book/comment`, { id }, _getHeadersToken())\r\nconst setLike = (id: string): Promise<AxiosResponse<{ bookId: string, status: boolean }>> => axios.post(`/book/like`, { id }, _getHeadersToken())\r\n\r\nexport { getBook, setBook, setBookComment, getBookComment, setLike }\r\n","import { notification } from 'antd'\r\ntype Types = {\r\n  text: string\r\n  type?: 'info' | 'error' | 'warning' | 'success'\r\n  title?: string\r\n  duration?: number\r\n}\r\nexport const openNotification = ({ text, type = 'info', title, duration = 3 }: Types) =>\r\n  notification[type]({\r\n    message: title,\r\n    description: text,\r\n    duration\r\n  })\r\n","import { Actions } from 'redux/action/books'\r\nimport { getBook, setLike } from 'api/book'\r\nimport { openNotification } from 'helpers/openNotification'\r\nimport { put, call, takeEvery, select } from '@redux-saga/core/effects'\r\nimport { AddBookType } from 'types'\r\nimport { getAuth } from 'redux/selectors'\r\n\r\nfunction* workerRequestBook(action: any) {\r\n  try {\r\n    yield put(Actions.setBooksLoader(true))\r\n    const { data } = yield call(getBook, action.payload)\r\n    yield put(Actions.setBooks(data.books))\r\n    yield put(Actions.setTotalNumberBooks(data.total))\r\n\r\n  } catch (e) {\r\n    openNotification({\r\n      type: 'error',\r\n      text: 'Произошла ошибка попробуйте ещё'\r\n    })\r\n  } finally {\r\n    yield put(Actions.setBooksLoader(false))\r\n  }\r\n}\r\n\r\nfunction fakeApi(time: number) {\r\n  return new Promise((resolve) => setTimeout(() => resolve({ data: { name: '', author: '', description: '' }, time })))\r\n}\r\n\r\nfunction* workerRequestAddBook(action: { type: string, payload: AddBookType }) {\r\n  try {\r\n    const data: AddBookType = yield call(fakeApi, 2000)\r\n    yield put(Actions.responseAddBook(data))\r\n\r\n  } catch (e) {\r\n\r\n  }\r\n}\r\nfunction* workerRequestAddLike({ type, payload }: { type: string, payload: string }) {\r\n  const isAuth: boolean = yield select(getAuth)\r\n  if (!isAuth) {\r\n    return openNotification({\r\n      title: 'Ошибка',\r\n      text: 'Только авторизованные пользователи могут ставить лайки',\r\n      type: 'warning'\r\n    })\r\n  }\r\n  try {\r\n    const { data } = yield call(setLike, payload)\r\n    yield put(Actions.setLike(data))\r\n  } catch (e) {\r\n    openNotification({\r\n      type: 'error',\r\n      text: 'Произошла ошибка попробуйте ещё'\r\n    })\r\n  }\r\n}\r\n\r\nexport function* sagaWatcherBook() {\r\n  yield takeEvery('BOOKS@REQUEST_BOOK', workerRequestBook)\r\n  yield takeEvery('BOOKS@REQUEST_ADD_BOOK', workerRequestAddBook)\r\n  yield takeEvery('BOOKS@REQUEST_ADD_LIKE', workerRequestAddLike)\r\n}","import { getBookComment, setBookComment } from 'api/book'\r\nimport { openNotification } from 'helpers/openNotification'\r\nimport { Actions as ActionsBooks } from 'redux/action/books'\r\nimport { call, put, select, takeEvery } from '@redux-saga/core/effects'\r\nimport { getAuth, getCommentsCount } from 'redux/selectors'\r\nimport { Actions } from 'redux/action/comments'\r\n\r\nfunction* sagaWorkerComment(action: { type: string, payload: string }) {\r\n  const isAuth: boolean = yield select(getAuth)\r\n  if (!isAuth) {\r\n    openNotification({\r\n      title: 'Ошибка',\r\n      text: 'Только авторизованные пользователи могут оставлять коментарии',\r\n      type: 'warning'\r\n    })\r\n    const countMessage: number = yield select(getCommentsCount)\r\n\r\n    if (countMessage < 0) {\r\n      return openNotification({\r\n        title: 'Ошибкa',\r\n        text: 'Коментарий нет, ',\r\n        type: 'warning'\r\n      })\r\n    }\r\n  }\r\n\r\n  try {\r\n    yield put(Actions.isShowComments(true))\r\n    yield put(Actions.isLoader(true))\r\n    yield put(Actions.setCommentId(action.payload))\r\n    const { data } = yield call(getBookComment, action.payload)\r\n    yield put(Actions.setComments(data))\r\n    yield put(Actions.isLoader(false))\r\n  } catch (e) {\r\n    openNotification({\r\n      type: 'error',\r\n      text: 'Произошла ошибка попробуйте ещё'\r\n    })\r\n    yield put(Actions.isShowComments(false))\r\n    yield put(Actions.isLoader(false))\r\n  }\r\n}\r\n\r\n\r\nfunction* sagaWorkerAddComment(action: any) {\r\n  const { comments } = yield select()\r\n  const createComment = {\r\n    bookId: comments.id,\r\n    text: action.payload\r\n  }\r\n  try {\r\n    const { data } = yield call(setBookComment, createComment)\r\n    yield put(Actions.addComment(data))\r\n    yield put(ActionsBooks.addCountBook(comments.id))\r\n  } catch (e) {\r\n    openNotification({\r\n      type: 'error',\r\n      text: 'Произошла ошибка попробуйте при отправки сообщения '\r\n    })\r\n  }\r\n}\r\n\r\nexport function* sagaWatcherComment() {\r\n  yield takeEvery(\"COMMENT@REQUEST_ADD_ITEM\", sagaWorkerAddComment)\r\n  yield takeEvery(\"COMMENT@REQUEST_ITEM\", sagaWorkerComment)\r\n\r\n}","import { AxiosResponse } from 'axios'\r\nimport { getToken } from 'helpers/token'\r\nimport axios from './'\r\n\r\nexport type UserDate = {\r\n  id: string\r\n  avatar: string\r\n  fullname: string\r\n}\r\n\r\nexport type ResponseAuth = {\r\n  token: string\r\n  user: UserDate\r\n}\r\nexport type signInType = {\r\n  email: string\r\n  password: string\r\n}\r\n\r\nconst getMe = (): Promise<AxiosResponse<ResponseAuth>> => axios.get('/user/getme', {\r\n  headers: {\r\n    authorization: `Bearer ${getToken()}`\r\n  }\r\n})\r\nconst signIn = (postData: signInType): Promise<AxiosResponse<ResponseAuth>> => axios.post('/user/signin', postData, {\r\n  headers: {\r\n    authorization: `Bearer ${getToken()}`\r\n  }\r\n})\r\nconst signUp = (postData: any): Promise<AxiosResponse<ResponseAuth>> => axios.post('/user/signup', postData, {\r\n  headers: {\r\n    authorization: `Bearer ${getToken()}`\r\n  }\r\n})\r\nconst savePhoto = (photoFile: any): Promise<AxiosResponse<any>> => {\r\n  const formData = new FormData()\r\n  formData.append(\"image\", photoFile)\r\n  return axios.post('user/photo', formData, {\r\n    headers: {\r\n      'Content-Type': 'multipart/form-data',\r\n      authorization: `Bearer ${getToken()}`\r\n    }\r\n  })\r\n}\r\n\r\n\r\nexport { getMe, signIn, signUp, savePhoto }\r\n","import Actions from 'redux/action/user'\r\nimport { openNotification } from 'helpers/openNotification'\r\nimport { put, call, takeEvery } from '@redux-saga/core/effects'\r\nimport { removeToken, setToken } from 'helpers/token'\r\nimport { LoginFormType } from 'types'\r\nimport { getMe, savePhoto, signIn, signUp } from 'api/user'\r\n\r\nfunction* workerLogout() {\r\n  yield removeToken()\r\n  yield put(Actions.setIsAuth(false))\r\n}\r\n\r\nfunction* workerAuthorization(action: { type: string, payload: LoginFormType }) {\r\n  yield put(Actions.isLoader(true))\r\n  try {\r\n    const { data } = yield call(signIn, action.payload)\r\n    yield setToken(data.token)\r\n    yield put(Actions.setUserData(data.user))\r\n    yield put(Actions.setIsAuth(true))\r\n  } catch (e) {\r\n    openNotification({\r\n      type: 'error',\r\n      title: 'Authorization',\r\n      text: e.response.data.message\r\n    })\r\n  } finally {\r\n    yield put(Actions.isLoader(false))\r\n  }\r\n}\r\n\r\nfunction* workerRegistration(action: any) {\r\n  yield put(Actions.isLoader(true))\r\n  try {\r\n    const { data } = yield call(signUp, action.payload)\r\n    yield setToken(data.token)\r\n    yield put(Actions.setUserData(data.user))\r\n    yield put(Actions.setIsAuth(true))\r\n  } catch (e) {\r\n    openNotification({\r\n      type: 'error',\r\n      title: 'Registration',\r\n      text: e.response.data.message\r\n    })\r\n  } finally {\r\n    yield put(Actions.isLoader(false))\r\n  }\r\n}\r\n\r\nfunction* workerProfile() {\r\n  try {\r\n    const { data } = yield call(getMe)\r\n    yield setToken(data.token)\r\n    yield put(Actions.setUserData(data.user))\r\n    yield put(Actions.setIsAuth(true))\r\n  } catch (e) {\r\n    yield put(Actions.logOut())\r\n  }\r\n}\r\n\r\nfunction* workerUpdateAvatar(action: any) {\r\n  try {\r\n    const { data } = yield call(savePhoto, action.payload)\r\n    yield put(Actions.setUserData(data.user))\r\n  } catch (e) {\r\n    openNotification({\r\n      type: 'error',\r\n      title: 'Avatar',\r\n      text: 'ошибка при сохранение авата, попробуйте ещо раз'\r\n    })\r\n  }\r\n}\r\n\r\nexport function* watcherUser() {\r\n  yield takeEvery('USER@LOG_OUT', workerLogout)\r\n  yield takeEvery('USER@AUTHORIZATION', workerAuthorization)\r\n  yield takeEvery('USER@REGISTRATION', workerRegistration)\r\n  yield takeEvery('USER@PROFILE', workerProfile)\r\n  yield takeEvery('USER@UPDATE_AVATAR', workerUpdateAvatar)\r\n}","import { all } from '@redux-saga/core/effects'\r\nimport { sagaWatcherBook } from './books'\r\nimport { sagaWatcherComment } from './comments'\r\nimport { watcherUser } from './user'\r\n\r\nexport function* rootWatcher() {\r\n  yield all([sagaWatcherBook(), sagaWatcherComment(), watcherUser()])\r\n}","import { createStore, applyMiddleware } from 'redux'\r\nimport thunk from 'redux-thunk'\r\nimport createSagaMiddleware from 'redux-saga'\r\nimport rootReducer from './reducer'\r\nimport { rootWatcher } from './saga'\r\nimport logger from 'redux-logger'\r\n\r\nconst saga = createSagaMiddleware()\r\n\r\nconst middleware = [thunk, saga, logger]\r\nconst store = createStore(rootReducer, applyMiddleware(...middleware))\r\n\r\nsaga.run(rootWatcher)\r\n\r\nexport default store\r\n","import { FC, ReactElement } from 'react'\r\nimport { Route, Redirect } from 'react-router-dom'\r\nimport routers from 'const/routers'\r\nimport { getAuth } from 'redux/selectors'\r\nimport { useSelector } from 'react-redux'\r\n\r\ntype PrivateRouteType = {\r\n\tcomponent: () => any\r\n\texact?: boolean\r\n\tpath: string\r\n}\r\n\r\nconst PrivateRoute: FC<PrivateRouteType> = ({\r\n\tcomponent: Component,\r\n\t...rest\r\n}) => {\r\n\tconst isAuth = useSelector(getAuth)\r\n\tif (!isAuth) {\r\n\t\treturn <Redirect to={routers.getSignin()} />\r\n\t}\r\n\treturn (\r\n\t\t<Route exact={rest.exact} path={rest.path} render={() => <Component />} />\r\n\t)\r\n}\r\n\r\nexport default PrivateRoute\r\n","import routers from 'const/routers'\r\nimport { FC, ReactElement } from 'react'\r\nimport { useSelector } from 'react-redux'\r\nimport { Route, Redirect } from 'react-router-dom'\r\nimport { getAuth } from 'redux/selectors'\r\n\r\ninterface IPublicRoute {\r\n\tcomponent: () => any\r\n\texact?: boolean\r\n\tpath: string\r\n\turl?: string\r\n}\r\n\r\nconst PublicRoute: FC<IPublicRoute> = ({ component: Component, ...rest }) => {\r\n\tconst isAuth = useSelector(getAuth)\r\n\tif (!isAuth) {\r\n\t\treturn (\r\n\t\t\t<Route exact={rest.exact} path={rest.path} render={() => <Component />} />\r\n\t\t)\r\n\t}\r\n\treturn <Redirect to={routers.getBase()} />\r\n}\r\n\r\nexport default PublicRoute\r\n","import React from 'react'\r\nimport { useDispatch, useSelector } from 'react-redux'\r\nimport { Pagination, BackTop } from 'antd'\r\nimport { Article, Loader } from 'components'\r\nimport { Actions } from 'redux/action/books'\r\nimport {\r\n\tgetBooks,\r\n\tgetBooksIsLoader,\r\n\tgetBooksPage,\r\n\tgetSearchValue,\r\n\tgetTotalBooks\r\n} from 'redux/selectors'\r\nimport { BookType } from 'types'\r\nimport { useHistory } from 'react-router-dom'\r\nimport routers from 'const/routers'\r\nimport queryString from 'query-string'\r\n\r\nconst Home = () => {\r\n\tconst dispatch = useDispatch()\r\n\tconst books = useSelector(getBooks)\r\n\tconst total = useSelector(getTotalBooks)\r\n\tconst searchValue = useSelector(getSearchValue)\r\n\tconst isLoader = useSelector(getBooksIsLoader)\r\n\tconst page = useSelector(getBooksPage)\r\n\tconst history = useHistory()\r\n\r\n\tconst onChangePage = (page: number) => {\r\n\t\tdispatch(Actions.setPage(page))\r\n\t}\r\n\tReact.useEffect(() => {\r\n\t\tconst { search } = history.location\r\n\t\tconst { page, search: value } = queryString.parse(search, {\r\n\t\t\tparseNumbers: true,\r\n\t\t\tparseBooleans: true\r\n\t\t})\r\n\t\tif (page) dispatch(Actions.setPage(Number(page)))\r\n\t\tif (value) dispatch(Actions.searchValue(String(value)))\r\n\t}, [history.location, dispatch])\r\n\r\n\tReact.useEffect(() => {\r\n\t\tconst str = queryString.stringify(\r\n\t\t\t{ page, search: searchValue },\r\n\t\t\t{ skipNull: true }\r\n\t\t)\r\n\t\thistory.push({\r\n\t\t\thash: routers.getBase(),\r\n\t\t\tsearch: `?${str}`\r\n\t\t})\r\n\t}, [page, searchValue, history])\r\n\r\n\tReact.useEffect(() => {\r\n\t\tdispatch(Actions.requestBook({ page, search: searchValue }))\r\n\t}, [page, searchValue, dispatch])\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<div className='container'>\r\n\t\t\t\t<div\r\n\t\t\t\t\tclassName='articles'\r\n\t\t\t\t\tstyle={{ height: isLoader ? 'calc(100vh - 61px)' : '100%' }}>\r\n\t\t\t\t\t{isLoader ? (\r\n\t\t\t\t\t\t<Loader />\r\n\t\t\t\t\t) : books.length ? (\r\n\t\t\t\t\t\tbooks.map((book: BookType) => <Article key={book._id} {...book} />)\r\n\t\t\t\t\t) : (\r\n\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\t\theight: '100%',\r\n\t\t\t\t\t\t\t\ttextAlign: 'center',\r\n\t\t\t\t\t\t\t\tfontSize: '30px',\r\n\t\t\t\t\t\t\t\tfontWeight: 'bold'\r\n\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\tНечего не наедено\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t)}\r\n\t\t\t\t\t{total > 5 && (\r\n\t\t\t\t\t\t<Pagination\r\n\t\t\t\t\t\t\tstyle={{ textAlign: 'center' }}\r\n\t\t\t\t\t\t\tcurrent={page ? page : 1}\r\n\t\t\t\t\t\t\tdefaultCurrent={1}\r\n\t\t\t\t\t\t\tdefaultPageSize={5}\r\n\t\t\t\t\t\t\ttotal={total}\r\n\t\t\t\t\t\t\tonChange={onChangePage}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t)}\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t\t<BackTop />\r\n\t\t</>\r\n\t)\r\n}\r\nexport default Home\r\n","import { Switch, Redirect, Route } from 'react-router'\r\nimport { BrowserRouter as Router } from 'react-router-dom'\r\nimport routers from 'const/routers'\r\nimport PrivateRoute from './PrivateRoute'\r\nimport PublicRoute from './PublicRoute'\r\nimport Home from 'page/Home'\r\nimport { Layout } from 'components'\r\nimport { lazy, Suspense } from 'react'\r\nimport Loader from 'components/Loader'\r\n\r\nconst Signin = lazy(() => import('page/Signin'))\r\nconst Signup = lazy(() => import('page/Signup'))\r\nconst Profile = lazy(() => import('page/Profile'))\r\nconst AddBook = lazy(() => import('page/AddBook'))\r\n\r\nconst AppRouters = () => {\r\n\treturn (\r\n\t\t<Router>\r\n\t\t\t<Layout>\r\n\t\t\t\t<Suspense fallback={<Loader />}>\r\n\t\t\t\t\t<Switch>\r\n\t\t\t\t\t\t<PublicRoute\r\n\t\t\t\t\t\t\texact\r\n\t\t\t\t\t\t\tpath={routers.getSignin()}\r\n\t\t\t\t\t\t\tcomponent={() => <Signin />}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t<PublicRoute\r\n\t\t\t\t\t\t\texact\r\n\t\t\t\t\t\t\tpath={routers.getSignup()}\r\n\t\t\t\t\t\t\tcomponent={() => <Signup />}\r\n\t\t\t\t\t\t/>\r\n\r\n\t\t\t\t\t\t<PrivateRoute\r\n\t\t\t\t\t\t\texact\r\n\t\t\t\t\t\t\tpath={routers.getAddBook()}\r\n\t\t\t\t\t\t\tcomponent={() => <AddBook />}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t<PrivateRoute\r\n\t\t\t\t\t\t\texact\r\n\t\t\t\t\t\t\tpath={routers.getProfile()}\r\n\t\t\t\t\t\t\tcomponent={() => <Profile />}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t<Route path={routers.getBase()} component={() => <Home />} />\r\n\t\t\t\t\t\t<Route path='*'>\r\n\t\t\t\t\t\t\t<Redirect to={routers.getBase()} />\r\n\t\t\t\t\t\t</Route>\r\n\t\t\t\t\t</Switch>\r\n\t\t\t\t</Suspense>\r\n\t\t\t</Layout>\r\n\t\t</Router>\r\n\t)\r\n}\r\n\r\nexport default AppRouters\r\n","import { getLanguage } from 'helpers/token'\r\nimport i18n from 'i18next'\r\nimport LanguageDetector from 'i18next-browser-languagedetector'\r\nimport backend from 'i18next-http-backend'\r\nimport { initReactI18next } from 'react-i18next'\r\nimport en from './en.json'\r\nimport ru from './ru.json'\r\n\r\ni18n\r\n  .use(backend)\r\n  .use(LanguageDetector)\r\n  .use(initReactI18next)\r\n  .init({\r\n    lng: getLanguage() || 'ru',\r\n    fallbackLng: ['en', 'ru'],\r\n    debug: process.env.NODE_ENV !== 'production',\r\n    resources: {\r\n      en: {\r\n        translation: en,\r\n      },\r\n      ru: {\r\n        translation: ru,\r\n      },\r\n    },\r\n    detection: {\r\n      order: ['localStorage'],\r\n      caches: ['localStorage']\r\n    },\r\n    interpolation: {\r\n      escapeValue: false,\r\n    },\r\n  })\r\n\r\n// изменяем язык в моменте при изменении языка в i18n и загружаем выбранный язык\r\n// i18n.on('languageChanged', (lng) => {\r\n  //\r\n// });\r\n","import './style/App.scss'\r\nimport { Provider } from 'react-redux'\r\nimport store from './redux/store'\r\nimport AppRouters from 'components/AppRouter'\r\nimport Actions from 'redux/action/user'\r\n\r\nimport 'localization'\r\n\r\n// TODO когда добавишь на сервере сохранение в профиле книг удалить dispatch\r\n// store.dispatch(ActionsBooks.requestBook())\r\nstore.dispatch(Actions.userProfile())\r\n\r\nconst App = () => {\r\n\treturn (\r\n\t\t<Provider store={store}>\r\n\t\t\t<AppRouters />\r\n\t\t</Provider>\r\n\t)\r\n}\r\n\r\nexport default App\r\n","// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read http://bit.ly/CRA-PWA\r\n/* eslint-disable */\r\n\r\nconst isLocalhost = Boolean(\r\n\twindow.location.hostname === 'localhost' ||\r\n\t\t// [::1] is the IPv6 localhost address.\r\n\t\twindow.location.hostname === '[::1]' ||\r\n\t\t// 127.0.0.1/8 is considered localhost for IPv4.\r\n\t\twindow.location.hostname.match(\r\n\t\t\t/^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n\t\t)\r\n)\r\n\r\nexport function register(config) {\r\n\tif (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n\t\t// The URL constructor is available in all browsers that support SW.\r\n\t\tconst publicUrl = new URL(process.env.PUBLIC_URL, window.location.href)\r\n\t\tif (publicUrl.origin !== window.location.origin) {\r\n\t\t\t// Our service worker won't work if PUBLIC_URL is on a different origin\r\n\t\t\t// from what our page is served on. This might happen if a CDN is used to\r\n\t\t\t// serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n\t\t\treturn\r\n\t\t}\r\n\r\n\t\twindow.addEventListener('load', () => {\r\n\t\t\tconst swUrl = `${process.env.PUBLIC_URL}/service-worker.js`\r\n\r\n\t\t\tif (isLocalhost) {\r\n\t\t\t\t// This is running on localhost. Let's check if a service worker still exists or not.\r\n\t\t\t\tcheckValidServiceWorker(swUrl, config)\r\n\r\n\t\t\t\t// Add some additional logging to localhost, pointing developers to the\r\n\t\t\t\t// service worker/PWA documentation.\r\n\t\t\t\tnavigator.serviceWorker.ready.then(() => {\r\n\t\t\t\t\tconsole.log(\r\n\t\t\t\t\t\t'This web app is being served cache-first by a service ' +\r\n\t\t\t\t\t\t\t'worker. To learn more, visit http://bit.ly/CRA-PWA'\r\n\t\t\t\t\t)\r\n\t\t\t\t})\r\n\t\t\t} else {\r\n\t\t\t\t// Is not localhost. Just register service worker\r\n\t\t\t\tregisterValidSW(swUrl, config)\r\n\t\t\t}\r\n\t\t})\r\n\t}\r\n}\r\n\r\nfunction registerValidSW(swUrl, config) {\r\n\tnavigator.serviceWorker\r\n\t\t.register(swUrl)\r\n\t\t.then(registration => {\r\n\t\t\tregistration.onupdatefound = () => {\r\n\t\t\t\tconst installingWorker = registration.installing\r\n\t\t\t\tif (installingWorker == null) {\r\n\t\t\t\t\treturn\r\n\t\t\t\t}\r\n\t\t\t\tinstallingWorker.onstatechange = () => {\r\n\t\t\t\t\tif (installingWorker.state === 'installed') {\r\n\t\t\t\t\t\tif (navigator.serviceWorker.controller) {\r\n\t\t\t\t\t\t\t// At this point, the updated precached content has been fetched,\r\n\t\t\t\t\t\t\t// but the previous service worker will still serve the older\r\n\t\t\t\t\t\t\t// content until all client tabs are closed.\r\n\t\t\t\t\t\t\tconsole.log(\r\n\t\t\t\t\t\t\t\t'New content is available and will be used when all ' +\r\n\t\t\t\t\t\t\t\t\t'tabs for this page are closed. See http://bit.ly/CRA-PWA.'\r\n\t\t\t\t\t\t\t)\r\n\r\n\t\t\t\t\t\t\t// Execute callback\r\n\t\t\t\t\t\t\tif (config && config.onUpdate) {\r\n\t\t\t\t\t\t\t\tconfig.onUpdate(registration)\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t// At this point, everything has been precached.\r\n\t\t\t\t\t\t\t// It's the perfect time to display a\r\n\t\t\t\t\t\t\t// \"Content is cached for offline use.\" message.\r\n\t\t\t\t\t\t\tconsole.log('Content is cached for offline use.')\r\n\r\n\t\t\t\t\t\t\t// Execute callback\r\n\t\t\t\t\t\t\tif (config && config.onSuccess) {\r\n\t\t\t\t\t\t\t\tconfig.onSuccess(registration)\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t})\r\n\t\t.catch(error => {\r\n\t\t\tconsole.error('Error during service worker registration:', error)\r\n\t\t})\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl, config) {\r\n\t// Check if the service worker can be found. If it can't reload the page.\r\n\tfetch(swUrl)\r\n\t\t.then(response => {\r\n\t\t\t// Ensure service worker exists, and that we really are getting a JS file.\r\n\t\t\tconst contentType = response.headers.get('content-type')\r\n\t\t\tif (\r\n\t\t\t\tresponse.status === 404 ||\r\n\t\t\t\t(contentType != null && contentType.indexOf('javascript') === -1)\r\n\t\t\t) {\r\n\t\t\t\t// No service worker found. Probably a different app. Reload the page.\r\n\t\t\t\tnavigator.serviceWorker.ready.then(registration => {\r\n\t\t\t\t\tregistration.unregister().then(() => {\r\n\t\t\t\t\t\twindow.location.reload()\r\n\t\t\t\t\t})\r\n\t\t\t\t})\r\n\t\t\t} else {\r\n\t\t\t\t// Service worker found. Proceed as normal.\r\n\t\t\t\tregisterValidSW(swUrl, config)\r\n\t\t\t}\r\n\t\t})\r\n\t\t.catch(() => {\r\n\t\t\tconsole.log(\r\n\t\t\t\t'No internet connection found. App is running in offline mode.'\r\n\t\t\t)\r\n\t\t})\r\n}\r\n\r\nexport function unregister() {\r\n\tif ('serviceWorker' in navigator) {\r\n\t\tnavigator.serviceWorker.ready.then(registration => {\r\n\t\t\tregistration.unregister()\r\n\t\t})\r\n\t}\r\n}\r\n","import ReactDOM from 'react-dom'\r\nimport App from './App'\r\nimport * as serviceWorker from './serviceWorker'\r\n\r\nReactDOM.render(<App />, document.getElementById('root'))\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: http://bit.ly/CRA-PWA\r\nserviceWorker.unregister()\r\n","const base: string = '/'\r\nconst profile: string = '/profile'\r\nconst signin: string = '/signin'\r\nconst signup: string = '/signup'\r\nconst addBook: string = '/add'\r\n\r\n// eslint-disable-next-line import/no-anonymous-default-export\r\nexport default {\r\n\tgetBase: () => base,\r\n\tgetProfile: () => profile,\r\n\tgetSignin: () => signin,\r\n\tgetSignup: () => signup,\r\n\tgetAddBook: () => addBook\r\n}\r\n","const TOKEN = 'X-AuthToken'\r\nconst USER_NAME = 'name'\r\nconst LANGUAGE = 'i18nextLng'\r\n\r\nconst setToken = (value: string) => localStorage.setItem(TOKEN, value)\r\nconst getToken = () => localStorage.getItem(TOKEN)\r\nconst removeToken = () => localStorage.removeItem(TOKEN)\r\n\r\nconst setUserName = (value: string) => localStorage.setItem(USER_NAME, value)\r\nconst getUserName = () => localStorage.getItem(USER_NAME)\r\nconst removeUsername = () => localStorage.removeItem(USER_NAME)\r\n\r\nconst setLanguage = (value: string) => localStorage.setItem(LANGUAGE, value)\r\nconst getLanguage = () => localStorage.getItem(LANGUAGE)\r\nconst removeLanguage = () => localStorage.getItem(LANGUAGE)\r\n\r\nexport {\r\n\tsetToken,\r\n\tgetToken,\r\n\tremoveToken,\r\n\tsetUserName,\r\n\tgetUserName,\r\n\tremoveUsername,\r\n\tsetLanguage,\r\n\tgetLanguage,\r\n\tremoveLanguage\r\n}\r\n","import { InferActionsTypes } from 'redux/reducer'\r\nimport { LoginFormType, RegistrationFormType } from 'types'\r\nimport { ProfileTypes } from 'redux/reducer/user'\r\n\r\nexport type ActionsTypes = InferActionsTypes<typeof Actions>\r\n\r\nconst Actions = {\r\n  isLoader: (payload: boolean) => ({\r\n    type: 'USER@LOADER',\r\n    payload\r\n  } as const),\r\n  setIsAuth: (payload: boolean) => ({\r\n    type: 'USER@IS_AUTH',\r\n    payload\r\n  } as const),\r\n  setUserData: (payload: ProfileTypes) => ({\r\n    type: 'USER@SET_DATA',\r\n    payload\r\n  } as const),\r\n  logOut: () => ({\r\n    type: 'USER@LOG_OUT',\r\n  } as const),\r\n  fetchAuthorization: (payload: LoginFormType) => ({\r\n    type: 'USER@AUTHORIZATION',\r\n    payload\r\n  } as const),\r\n  fetchRegistration: (payload: RegistrationFormType) => ({\r\n    type: 'USER@REGISTRATION',\r\n    payload\r\n  } as const),\r\n  userProfile: () => ({\r\n    type: 'USER@PROFILE',\r\n  } as const),\r\n  updateAvatar: (payload: any) => ({\r\n    type: 'USER@UPDATE_AVATAR',\r\n    payload\r\n  } as const),\r\n}\r\n\r\nexport default Actions\r\n","import { InferActionsTypes } from 'redux/reducer'\r\nimport { AddBookType, BookType } from 'types'\r\n\r\nexport type ActionsTypes = InferActionsTypes<typeof Actions>\r\n\r\nexport const Actions = {\r\n  setBooks: (payload: Array<BookType>) => ({\r\n    type: 'BOOKS@SET_ITEMS',\r\n    payload\r\n  } as const),\r\n  setTotalNumberBooks: (payload: number) => ({\r\n    type: 'BOOKS@SET_TOTAL_NUMBER_BOOKS',\r\n    payload\r\n  } as const),\r\n  setBooksLoader: (payload: boolean) => ({\r\n    type: 'BOOKS@IS_LOADER',\r\n    payload\r\n  } as const),\r\n  setPage: (payload: number | null) => ({\r\n    type: 'BOOKS@SET_PAGE',\r\n    payload\r\n  } as const),\r\n  searchValue: (payload: string) => ({\r\n    type: 'BOOKS@SEARCH_VALUE',\r\n    payload\r\n  } as const),\r\n  addCountBook: (payload: string) => ({\r\n    type: 'BOOKS@ADD_COMMENT',\r\n    payload\r\n  } as const),\r\n  addCommentBookError: (payload: string) => ({\r\n    type: 'BOOKS@ADD_COMMENT_ERROR',\r\n    payload\r\n  } as const),\r\n  requestBook: (payload: { page?: number | null, search?: string | null } = {}) => ({\r\n    type: 'BOOKS@REQUEST_BOOK',\r\n    payload\r\n  } as const),\r\n  requestAddBook: (payload: AddBookType) => ({\r\n    type: 'BOOKS@REQUEST_ADD_BOOK',\r\n    payload\r\n  } as const),\r\n  responseAddBook: (payload: AddBookType) => ({\r\n    type: 'BOOKS@RESPONSE_ADD_BOOK',\r\n    payload\r\n  } as const),\r\n  requestAddLike: (payload: string) => ({\r\n    type: 'BOOKS@REQUEST_ADD_LIKE',\r\n    payload\r\n  } as const),\r\n  setLike: (payload: { bookId: string, status: boolean }) => ({\r\n    type: 'BOOKS@SET_LIKE',\r\n    payload\r\n  } as const)\r\n}\r\n","import { InferActionsTypes } from \"redux/reducer\"\r\nimport { CommentsType } from \"types\"\r\n\r\nexport type ActionsTypes = InferActionsTypes<typeof Actions>\r\n\r\nexport const Actions = {\r\n  isShowComments: (payload: boolean) => ({\r\n    type: 'COMMENTS@IS_SHOW',\r\n    payload\r\n  } as const),\r\n  setComments: (payload: Array<CommentsType>) => ({\r\n    type: 'COMMENTS@SET_ITEM',\r\n    payload\r\n  } as const),\r\n  setCommentId: (payload: string) => ({\r\n    type: 'COMMENTS@SET_ID',\r\n    payload\r\n  } as const),\r\n  addComment: (payload: CommentsType) => ({\r\n    type: 'COMMENTS@ADD_ITEM',\r\n    payload\r\n  } as const),\r\n  isLoader: (payload: boolean) => ({\r\n    type: 'COMMENTS@IS_LOADER',\r\n    payload\r\n  } as const),\r\n  fetchComments: (payload: string) => ({\r\n    type: \"COMMENT@REQUEST_ITEM\",\r\n    payload\r\n  } as const),\r\n  fetchAddComment: (payload: string) => ({\r\n    type: \"COMMENT@REQUEST_ADD_ITEM\",\r\n    payload\r\n  } as const)\r\n}\r\n","import { Spin } from 'antd'\r\n\r\nconst style = {\r\n\tdisplay: 'flex',\r\n\tjustifyContent: 'center',\r\n\talignItems: 'center',\r\n\theight: '100%'\r\n}\r\n\r\nconst Loader = () => (\r\n\t<div className='loader' style={style}>\r\n\t\t<Spin size='large' />\r\n\t</div>\r\n)\r\nexport default Loader\r\n","export default __webpack_public_path__ + \"static/media/logo.51a0411d.svg\";","import React from 'react'\r\nimport styled, { css } from 'styled-components'\r\nimport { useTranslation } from 'react-i18next'\r\nimport { getLanguage } from 'helpers/token'\r\n\r\nconst Language = () => {\r\n\tconst [active, setActive] = React.useState(getLanguage())\r\n\tconst { i18n } = useTranslation()\r\n\tconst changeLanguage = (lang: string) => {\r\n\t\ti18n.changeLanguage(lang)\r\n\t\tsetActive(lang)\r\n\t}\r\n\treturn (\r\n\t\t<Container>\r\n\t\t\t<Item active={active === 'ru'} onClick={() => changeLanguage('ru')}>\r\n\t\t\t\tRU\r\n\t\t\t</Item>\r\n\t\t\t<Item active={active === 'en'} onClick={() => changeLanguage('en')}>\r\n\t\t\t\tEN\r\n\t\t\t</Item>\r\n\t\t</Container>\r\n\t)\r\n}\r\n\r\nexport default Language\r\n\r\nconst Container = styled.ul`\r\n\tdisplay: flex;\r\n`\r\nconst Item = styled.li`\r\n\tcursor: pointer;\r\n\tmargin-left: 10px;\r\n\ttransition: color 0.2s ease;\r\n\tfont-weight: 700;\r\n\t&:hover {\r\n\t\tcolor: red;\r\n\t}\r\n\t${({ active }: { active?: boolean }) =>\r\n\t\tactive &&\r\n\t\tcss`\r\n\t\t\tcursor: default;\r\n\t\t\tcolor: red;\r\n\t\t`}\r\n`\r\n","import './Header.scss'\r\nimport { Input, Switch } from 'antd'\r\nimport { Menu } from 'components'\r\nimport { Link, useHistory } from 'react-router-dom'\r\nimport { getSearchValue } from 'redux/selectors'\r\nimport { useDispatch, useSelector } from 'react-redux'\r\nimport { Actions } from 'redux/action/books'\r\n\r\nimport logoIcon from 'assets/img/logo.svg'\r\nimport routers from 'const/routers'\r\nimport { useTranslation } from 'react-i18next'\r\nimport Language from 'components/Language'\r\nimport styled, { ThemeProps } from 'styled-components'\r\nimport { ThemeType } from 'components/Layout'\r\n\r\nconst { Search } = Input\r\n\r\ntype Props = {\r\n\tvalueChecked: boolean\r\n\tonChangeTheme: (v: boolean) => void\r\n}\r\n\r\nconst Header = ({ valueChecked, onChangeTheme }: Props) => {\r\n\tconst { t } = useTranslation()\r\n\tconst history = useHistory()\r\n\tconst value = useSelector(getSearchValue)\r\n\tconst dispatch = useDispatch()\r\n\tconst handleSearch = (value: string) => {\r\n\t\tdispatch(Actions.searchValue(value.trim()))\r\n\t\thistory.push(routers.getBase())\r\n\t}\r\n\treturn (\r\n\t\t<HeaderStyle className='header'>\r\n\t\t\t<div className='container'>\r\n\t\t\t\t<div className='header-content'>\r\n\t\t\t\t\t<div className='header-content__logo'>\r\n\t\t\t\t\t\t<Link to={routers.getBase()}>\r\n\t\t\t\t\t\t\t<img src={logoIcon} alt='Books' />\r\n\t\t\t\t\t\t</Link>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className='search'>\r\n\t\t\t\t\t\t<Search\r\n\t\t\t\t\t\t\tplaceholder={t('search')}\r\n\t\t\t\t\t\t\tonSearch={handleSearch}\r\n\t\t\t\t\t\t\tdefaultValue={value ? value : ''}\r\n\t\t\t\t\t\t\tenterButton\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className='nav'>\r\n\t\t\t\t\t\t<Menu />\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<Language />\r\n\t\t\t\t\t{/* <Switch checked={valueChecked} onChange={onChangeTheme} /> */}\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</HeaderStyle>\r\n\t)\r\n}\r\nexport default Header\r\n\r\nconst HeaderStyle = styled.header`\r\n\ttransition: background-color 0.3s ease;\r\n\tbackground-color: ${(props: ThemeProps<ThemeType>) =>\r\n\t\tprops.theme.backgroundColor.secondary};\r\n\tcolor: ${(props: ThemeProps<ThemeType>) => props.theme.color.primary};\r\n\tposition: sticky;\r\n\ttop: 0;\r\n\tz-index: 100;\r\n\tbox-sizing: border-box;\r\n\tborder-bottom: 1px solid\r\n\t\t${(props: ThemeProps<ThemeType>) => props.theme.backgroundColor.primary};\r\n`\r\n","export default __webpack_public_path__ + \"static/media/comment.df5e7701.svg\";","export default __webpack_public_path__ + \"static/media/like-up.0fd910a4.svg\";","export default __webpack_public_path__ + \"static/media/like.3202d8c4.svg\";","import './Article.scss'\r\nimport React from 'react'\r\nimport { useDispatch, useSelector } from 'react-redux'\r\nimport { Actions as ActionsComment } from 'redux/action/comments'\r\nimport { Actions as ActionsBook } from 'redux/action/books'\r\nimport { AuthorBlock, ButtonPlay } from 'components'\r\nimport { getAuth } from 'redux/selectors'\r\nimport { Statistic } from 'antd'\r\nimport { useTranslation } from 'react-i18next'\r\n\r\nimport commentIcon from 'assets/img/comment.svg'\r\nimport logo from 'assets/img/logo.svg'\r\nimport like from 'assets/img/like-up.svg'\r\nimport likeUp from 'assets/img/like.svg'\r\nimport styled, { ThemeProps } from 'styled-components'\r\nimport { ThemeType } from 'components/Layout'\r\nimport { BookType } from 'types'\r\n\r\nconst Article: React.FC<BookType> = props => {\r\n\tconst { _id, name, author, imgUrl, description, comments, likes } = props\r\n\tconst dispatch = useDispatch()\r\n\tconst isAuth = useSelector(getAuth)\r\n\tconst { t } = useTranslation()\r\n\r\n\tconst handleClick = () => dispatch(ActionsComment.fetchComments(_id))\r\n\r\n\tconst handleLike = () => {\r\n\t\tdispatch(ActionsBook.requestAddLike(_id))\r\n\t}\r\n\r\n\treturn (\r\n\t\t<ArticleStyle>\r\n\t\t\t<div className='article-left'>\r\n\t\t\t\t<div className='article-img'>\r\n\t\t\t\t\t<img src={imgUrl || logo} alt={name} />\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t\t<div className='article-description'>\r\n\t\t\t\t<div className='article-description__body'>\r\n\t\t\t\t\t<div className='body-wrap'>\r\n\t\t\t\t\t\t<h2 className='article-description__body-title'>{name}</h2>\r\n\t\t\t\t\t\t<Statistic\r\n\t\t\t\t\t\t\tvalueStyle={{ fontSize: '20px', whiteSpace: 'nowrap' }}\r\n\t\t\t\t\t\t\tvalue={likes.count}\r\n\t\t\t\t\t\t\tprefix={\r\n\t\t\t\t\t\t\t\t<img\r\n\t\t\t\t\t\t\t\t\tclassName='article-description__body-like'\r\n\t\t\t\t\t\t\t\t\tonClick={handleLike}\r\n\t\t\t\t\t\t\t\t\tsrc={likes.status ? like : likeUp}\r\n\t\t\t\t\t\t\t\t\talt='like'\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<p className='article-description__body-text'>{description}</p>\r\n\t\t\t\t</div>\r\n\t\t\t\t<AuthorBlock name={author} />\r\n\t\t\t\t<div className='article-description__footer'>\r\n\t\t\t\t\t<ButtonPlay bookId={_id} />\r\n\t\t\t\t\t<AuthorBlock\r\n\t\t\t\t\t\tclassName='center'\r\n\t\t\t\t\t\tname={\r\n\t\t\t\t\t\t\t!!comments.length\r\n\t\t\t\t\t\t\t\t? `${comments.length} ${t('article.comment.yes')}`\r\n\t\t\t\t\t\t\t\t: t('article.comment.no')\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\ticon={commentIcon}\r\n\t\t\t\t\t\tonClick={handleClick}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</ArticleStyle>\r\n\t)\r\n}\r\n\r\nexport default Article\r\n\r\nconst ArticleStyle = styled.div`\r\n\ttransition: background-color 0.3s ease;\r\n\tbackground-color: ${(props: ThemeProps<ThemeType>) =>\r\n\t\tprops.theme.backgroundColor.primary};\r\n\tcolor: ${(props: ThemeProps<ThemeType>) => props.theme.color.primary};\r\n\tdisplay: flex;\r\n\tpadding: 20px 15px;\r\n\tmargin: 20px 0;\r\n\tborder-radius: 10px;\r\n\t@media (max-width: 500px) {\r\n\t\tdisplay: block;\r\n\t}\r\n`\r\n","export default __webpack_public_path__ + \"static/media/author.d1370a05.svg\";","import React from 'react'\r\nimport authorIcon from 'assets/img/author.svg'\r\nimport classNames from 'classnames'\r\n\r\nimport './AuthorBlock.scss'\r\n\r\ntype props = {\r\n\tname?: string\r\n\tonClick?: () => void\r\n\ticon?: string\r\n\tclassName?: string\r\n\tstyle?: any\r\n}\r\n\r\nconst AuthorBlock: React.FC<props> = props => {\r\n\tconst { onClick, name, icon, className, style } = props\r\n\treturn (\r\n\t\t<div\r\n\t\t\tclassName={classNames('author', { [`${className}`]: !!className })}\r\n\t\t\tonClick={onClick}\r\n\t\t\tstyle={style}>\r\n\t\t\t<div className='author-img'>\r\n\t\t\t\t<img src={icon || authorIcon} alt={name} />\r\n\t\t\t</div>\r\n\t\t\t<div className='author-name'>{name}</div>\r\n\t\t</div>\r\n\t)\r\n}\r\n\r\nexport default AuthorBlock\r\n","export default __webpack_public_path__ + \"static/media/user.4a895b67.svg\";","import { Menu as MenuAntd, Dropdown, Avatar, Button } from 'antd'\r\nimport { useDispatch } from 'react-redux'\r\nimport { Link } from 'react-router-dom'\r\nimport Actions from 'redux/action/user'\r\nimport { MenuProps } from 'components/Menu'\r\nimport routers from 'const/routers'\r\n\r\nimport userIcon from 'assets/img/user.svg'\r\nimport { useTranslation } from 'react-i18next'\r\n\r\nexport const WebMenu: React.FC<MenuProps> = ({ isAuth, avatar }) => {\r\n\tconst dispatch = useDispatch()\r\n\tconst { t } = useTranslation()\r\n\treturn (\r\n\t\t<>\r\n\t\t\t{!isAuth ? (\r\n\t\t\t\t<>\r\n\t\t\t\t\t<Link to={routers.getSignin()}>\r\n\t\t\t\t\t\t<Button type='primary'>{t('auth.button.signIn')}</Button>\r\n\t\t\t\t\t</Link>\r\n\t\t\t\t\t<Link to={routers.getSignup}>\r\n\t\t\t\t\t\t<Button type='primary'>{t('auth.button.registration')}</Button>\r\n\t\t\t\t\t</Link>\r\n\t\t\t\t</>\r\n\t\t\t) : (\r\n\t\t\t\t<Dropdown\r\n\t\t\t\t\toverlay={\r\n\t\t\t\t\t\t<MenuAntd>\r\n\t\t\t\t\t\t\t<MenuAntd.Item>\r\n\t\t\t\t\t\t\t\t<Link className='nav-link' to={routers.getAddBook()}>\r\n\t\t\t\t\t\t\t\t\t{t('menu.addBook')}\r\n\t\t\t\t\t\t\t\t</Link>\r\n\t\t\t\t\t\t\t</MenuAntd.Item>\r\n\t\t\t\t\t\t\t<MenuAntd.Item>\r\n\t\t\t\t\t\t\t\t<Link to={routers.getProfile()}>{t('menu.profile')}</Link>\r\n\t\t\t\t\t\t\t</MenuAntd.Item>\r\n\t\t\t\t\t\t\t<MenuAntd.Item onClick={() => dispatch(Actions.logOut())} danger>\r\n\t\t\t\t\t\t\t\t{t('menu.logout')}\r\n\t\t\t\t\t\t\t</MenuAntd.Item>\r\n\t\t\t\t\t\t</MenuAntd>\r\n\t\t\t\t\t}\r\n\t\t\t\t\tplacement='bottomRight'>\r\n\t\t\t\t\t<Avatar\r\n\t\t\t\t\t\tclassName='avatar'\r\n\t\t\t\t\t\tsize='large'\r\n\t\t\t\t\t\ticon={<img src={avatar || userIcon} alt='UserAvatar' />}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</Dropdown>\r\n\t\t\t)}\r\n\t\t</>\r\n\t)\r\n}\r\n","import { Menu as MenuAntd, Dropdown, Avatar, Button } from 'antd'\r\nimport { useDispatch } from 'react-redux'\r\nimport { Link } from 'react-router-dom'\r\nimport Actions from 'redux/action/user'\r\nimport { MenuProps } from 'components/Menu'\r\nimport routers from 'const/routers'\r\n\r\nimport userIcon from 'assets/img/user.svg'\r\nimport { useTranslation } from 'react-i18next'\r\n\r\nexport const MobileMenu: React.FC<MenuProps> = ({ isAuth, avatar }) => {\r\n\tconst dispatch = useDispatch()\r\n\tconst { t } = useTranslation()\r\n\treturn (\r\n\t\t<MenuAntd>\r\n\t\t\t{!isAuth ? (\r\n\t\t\t\t<>\r\n\t\t\t\t\t<Dropdown\r\n\t\t\t\t\t\toverlay={\r\n\t\t\t\t\t\t\t<>\r\n\t\t\t\t\t\t\t\t<MenuAntd.Item>\r\n\t\t\t\t\t\t\t\t\t<Link to={routers.getSignin()}>\r\n\t\t\t\t\t\t\t\t\t\t<Button block={true} type='primary'>\r\n\t\t\t\t\t\t\t\t\t\t\t{t('auth.button.signIn')}\r\n\t\t\t\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t\t\t\t</Link>\r\n\t\t\t\t\t\t\t\t</MenuAntd.Item>\r\n\t\t\t\t\t\t\t\t<MenuAntd.Item>\r\n\t\t\t\t\t\t\t\t\t<Link to={routers.getSignup()}>\r\n\t\t\t\t\t\t\t\t\t\t<Button type='primary'>\r\n\t\t\t\t\t\t\t\t\t\t\t{t('auth.button.registration')}\r\n\t\t\t\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t\t\t\t</Link>\r\n\t\t\t\t\t\t\t\t</MenuAntd.Item>\r\n\t\t\t\t\t\t\t</>\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tplacement='bottomRight'>\r\n\t\t\t\t\t\t<Avatar\r\n\t\t\t\t\t\t\tclassName='avatar'\r\n\t\t\t\t\t\t\tsize='large'\r\n\t\t\t\t\t\t\ticon={<img src={avatar || userIcon} alt='UserAvatar' />}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</Dropdown>\r\n\t\t\t\t</>\r\n\t\t\t) : (\r\n\t\t\t\t<Dropdown\r\n\t\t\t\t\toverlay={\r\n\t\t\t\t\t\t<>\r\n\t\t\t\t\t\t\t<MenuAntd>\r\n\t\t\t\t\t\t\t\t<MenuAntd.Item>\r\n\t\t\t\t\t\t\t\t\t<Link className='nav-link' to={routers.getAddBook()}>\r\n\t\t\t\t\t\t\t\t\t\t{t('menu.addBook')}\r\n\t\t\t\t\t\t\t\t\t</Link>\r\n\t\t\t\t\t\t\t\t</MenuAntd.Item>\r\n\t\t\t\t\t\t\t\t<MenuAntd.Item>\r\n\t\t\t\t\t\t\t\t\t<Link to={routers.getProfile()}>{t('menu.profile')}</Link>\r\n\t\t\t\t\t\t\t\t</MenuAntd.Item>\r\n\t\t\t\t\t\t\t\t<MenuAntd.Item\r\n\t\t\t\t\t\t\t\t\tonClick={() => dispatch(Actions.logOut())}\r\n\t\t\t\t\t\t\t\t\tdanger>\r\n\t\t\t\t\t\t\t\t\t{t('menu.logout')}\r\n\t\t\t\t\t\t\t\t</MenuAntd.Item>\r\n\t\t\t\t\t\t\t</MenuAntd>\r\n\t\t\t\t\t\t</>\r\n\t\t\t\t\t}\r\n\t\t\t\t\tplacement='bottomRight'>\r\n\t\t\t\t\t<Avatar\r\n\t\t\t\t\t\tclassName='avatar'\r\n\t\t\t\t\t\tsize='large'\r\n\t\t\t\t\t\ticon={<img src={false || userIcon} alt='UserAvatar' />}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</Dropdown>\r\n\t\t\t)}\r\n\t\t</MenuAntd>\r\n\t)\r\n}\r\n","import './Avatar.scss'\r\nimport React from 'react'\r\nimport { WebMenu } from './components/WebMenu'\r\nimport { MobileMenu } from './components/MobileMenu'\r\nimport { useSelector } from 'react-redux'\r\nimport { getAuth, getAvatar } from 'redux/selectors'\r\n\r\nconst width: number = window.innerWidth\r\nconst currentWidth: number = 850\r\n\r\nexport type MenuProps = {\r\n\tisAuth: boolean\r\n\tavatar: string\r\n}\r\n\r\nconst Menu = () => {\r\n\tconst [showMenu, setShowMenu] = React.useState<boolean>(width > currentWidth)\r\n\tconst isAuth = useSelector(getAuth)\r\n\tconst avatar = useSelector(getAvatar)\r\n\r\n\tconst handleResize = React.useCallback(() => {\r\n\t\tlet clientWidth = document.body.clientWidth\r\n\t\tif (currentWidth > clientWidth) setShowMenu(false)\r\n\t\telse setShowMenu(true)\r\n\t}, [])\r\n\r\n\tReact.useEffect(() => {\r\n\t\twindow.addEventListener('resize', handleResize)\r\n\t\treturn () => window.removeEventListener('resize', handleResize)\r\n\t}, [handleResize])\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t{showMenu ? (\r\n\t\t\t\t<WebMenu isAuth={isAuth} avatar={avatar} />\r\n\t\t\t) : (\r\n\t\t\t\t<MobileMenu isAuth={isAuth} avatar={avatar} />\r\n\t\t\t)}\r\n\t\t</>\r\n\t)\r\n}\r\n\r\nexport default Menu\r\n","import { InferActionsTypes } from \"redux/reducer\"\r\n\r\n\r\nexport type ActionsTypes = InferActionsTypes<typeof Actions>\r\n\r\nexport const Actions = {\r\n  setAudio: (payload: string) => ({\r\n    type: 'AUDIO@SET_ITEM',\r\n    payload\r\n  } as const),\r\n  setAudioBookId: (payload: string) => ({\r\n    type: 'AUDIO@SET_ID',\r\n    payload\r\n  } as const),\r\n  isPlay: (payload: boolean) => ({\r\n    type: 'AUDIO@IS_PLAY',\r\n    payload\r\n  } as const),\r\n}\r\n// export const fetchAudio = (audioId: string) => (dispatch: Dispatch<ActionsTypes>) => {\r\n  // audioApi.getAudio(audioId).then(({ data }) => {\r\n  //   dispatch(Actions.setAudio(data.audio))\r\n  //   dispatch(Actions.setAudioLoader(false))\r\n  // })\r\n// }\r\n","import './AudioPlayer.scss'\r\nimport 'react-h5-audio-player/src/styles.scss'\r\nimport React from 'react'\r\nimport H5AudioPlayer from 'react-h5-audio-player'\r\nimport { useDispatch, useSelector } from 'react-redux'\r\nimport { Actions } from 'redux/action/audioPlayer'\r\nimport { getAudioSrc, getPlay } from 'redux/selectors'\r\n\r\nconst AudioPlayer = () => {\r\n\tconst myPlayer = React.useRef<any>(null)\r\n\tconst dispatch = useDispatch()\r\n\tconst isPlay = useSelector(getPlay)\r\n\tconst audioSrc = useSelector(getAudioSrc)\r\n\r\n\tReact.useEffect(() => {\r\n\t\tif (isPlay) {\r\n\t\t\tmyPlayer.current.audio.current.play()\r\n\t\t} else if (!isPlay) {\r\n\t\t\tmyPlayer.current.audio.current.pause()\r\n\t\t}\r\n\t}, [isPlay])\r\n\r\n\tconst handleClick = ({ type }: any) => {\r\n\t\tif (type === 'play') {\r\n\t\t\tdispatch(Actions.isPlay(true))\r\n\t\t} else if (type === 'pause') {\r\n\t\t\tdispatch(Actions.isPlay(false))\r\n\t\t}\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div className='audio-player'>\r\n\t\t\t<div className='container'>\r\n\t\t\t\t<H5AudioPlayer\r\n\t\t\t\t\tautoPlay={false}\r\n\t\t\t\t\tref={myPlayer}\r\n\t\t\t\t\tsrc={audioSrc}\r\n\t\t\t\t\tonPlay={handleClick}\r\n\t\t\t\t\tonPause={handleClick}\r\n\t\t\t\t\tautoPlayAfterSrcChange={true}\r\n\t\t\t\t/>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t)\r\n}\r\n\r\nexport default AudioPlayer\r\n","import './Modal.scss'\r\nimport React from 'react'\r\nimport { StateType } from 'redux/reducer'\r\nimport { connect } from 'react-redux'\r\nimport { Modal as ModalBase, Input, Button } from 'antd'\r\nimport { Actions } from 'redux/action/comments'\r\nimport { CommentsType } from 'types'\r\nimport Loader from 'components/Loader'\r\nimport { Comment } from 'components'\r\nimport {\r\n\tgetComments,\r\n\tgetCommentsShow,\r\n\tgetAuth,\r\n\tgetCommentsLoader\r\n} from 'redux/selectors'\r\n\r\ntype StateProps = {\r\n\tisShow: boolean\r\n\titems: Array<CommentsType>\r\n\tisAuth: boolean\r\n\tisLoader: boolean\r\n}\r\ntype DispatchProps = {\r\n\tisShowComments: (v: boolean) => void\r\n\tfetchAddComment: (v: string) => void\r\n}\r\ntype Props = StateProps & DispatchProps\r\n\r\nconst Modal: React.FC<Props> = ({\r\n\tisLoader,\r\n\tisShow,\r\n\titems,\r\n\tisAuth,\r\n\tisShowComments,\r\n\tfetchAddComment\r\n}) => {\r\n\tconst [value, setValue] = React.useState('')\r\n\r\n\tconst handleOk = () => {\r\n\t\tisShowComments(false)\r\n\t}\r\n\r\n\tconst handleCancel = () => {\r\n\t\tisShowComments(false)\r\n\t}\r\n\r\n\tconst handleChange = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n\t\tsetValue(e.target.value)\r\n\t}\r\n\r\n\tconst handleClick = () => {\r\n\t\tfetchAddComment(value)\r\n\t\tsetValue('')\r\n\t}\r\n\r\n\treturn (\r\n\t\t<ModalBase\r\n\t\t\ttitle='Кометарии'\r\n\t\t\tvisible={isShow}\r\n\t\t\tonOk={handleOk}\r\n\t\t\tonCancel={handleCancel}\r\n\t\t\tfooter={null}>\r\n\t\t\t{isLoader ? (\r\n\t\t\t\t<Loader />\r\n\t\t\t) : (\r\n\t\t\t\titems.map((item: CommentsType) => <Comment key={item._id} {...item} />)\r\n\t\t\t)}\r\n\t\t\t{isAuth && (\r\n\t\t\t\t<div style={{ display: 'flex' }}>\r\n\t\t\t\t\t<Input\r\n\t\t\t\t\t\tstyle={{ width: '100%' }}\r\n\t\t\t\t\t\tvalue={value}\r\n\t\t\t\t\t\tonChange={handleChange}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<Button type='primary' onClick={handleClick}>\r\n\t\t\t\t\t\tSend\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t</div>\r\n\t\t\t)}\r\n\t\t</ModalBase>\r\n\t)\r\n}\r\n\r\nconst mapStateToProps = (state: StateType): StateProps => ({\r\n\titems: getComments(state),\r\n\tisShow: getCommentsShow(state),\r\n\tisAuth: getAuth(state),\r\n\tisLoader: getCommentsLoader(state)\r\n})\r\nconst mapDispatchToProps: DispatchProps = {\r\n\tisShowComments: Actions.isShowComments,\r\n\tfetchAddComment: Actions.fetchComments\r\n}\r\n\r\nexport default connect<StateProps, DispatchProps, any, StateType>(\r\n\tmapStateToProps,\r\n\tmapDispatchToProps\r\n)(Modal)\r\n","import React, { createElement, useState } from 'react'\r\nimport { Comment, Tooltip, Avatar } from 'antd'\r\nimport {\r\n\tDislikeOutlined,\r\n\tLikeOutlined,\r\n\tDislikeFilled,\r\n\tLikeFilled\r\n} from '@ant-design/icons'\r\nimport { CommentsType } from 'types'\r\n\r\nconst CommentBase: React.FC<CommentsType> = ({ text, author }) => {\r\n\tconst [likes, setLikes] = useState(0)\r\n\tconst [dislikes, setDislikes] = useState(0)\r\n\tconst [action, setAction] = useState<null | string>(null)\r\n\r\n\tconst like = () => {\r\n\t\tsetLikes(1)\r\n\t\tsetDislikes(0)\r\n\t\tsetAction('liked')\r\n\t}\r\n\r\n\tconst dislike = () => {\r\n\t\tsetLikes(0)\r\n\t\tsetDislikes(1)\r\n\t\tsetAction('disliked')\r\n\t}\r\n\r\n\tconst actions = [\r\n\t\t<Tooltip key='comment-basic-like' title='Like'>\r\n\t\t\t<span onClick={like}>\r\n\t\t\t\t{createElement(action === 'liked' ? LikeFilled : LikeOutlined)}\r\n\t\t\t\t<span className='comment-action'>{likes}</span>\r\n\t\t\t</span>\r\n\t\t</Tooltip>,\r\n\t\t<Tooltip key='comment-basic-dislike' title='Dislike'>\r\n\t\t\t<span onClick={dislike}>\r\n\t\t\t\t{React.createElement(\r\n\t\t\t\t\taction === 'disliked' ? DislikeFilled : DislikeOutlined\r\n\t\t\t\t)}\r\n\t\t\t\t<span className='comment-action'>{dislikes}</span>\r\n\t\t\t</span>\r\n\t\t</Tooltip>\r\n\t]\r\n\treturn (\r\n\t\t<Comment\r\n\t\t\tactions={actions}\r\n\t\t\tauthor={author}\r\n\t\t\tavatar={\r\n\t\t\t\t<Avatar\r\n\t\t\t\t\tsrc='https://zos.alipayobjects.com/rmsportal/ODTLcjxAfvqbxHnVXCYX.png'\r\n\t\t\t\t\talt='Han Solo'\r\n\t\t\t\t/>\r\n\t\t\t}\r\n\t\t\tcontent={<p>{text}</p>}\r\n\t\t/>\r\n\t)\r\n}\r\nexport default CommentBase\r\n","export default __webpack_public_path__ + \"static/media/play.b82a9267.svg\";","export default __webpack_public_path__ + \"static/media/stop.a64e0090.svg\";","import './Style.scss'\r\nimport React from 'react'\r\nimport playIcon from 'assets/img/play.svg'\r\nimport stopIcon from 'assets/img/stop.svg'\r\nimport { useDispatch, useSelector } from 'react-redux'\r\nimport { Actions } from 'redux/action/audioPlayer'\r\nimport { getAudioId, getPlay } from 'redux/selectors'\r\nimport { useTranslation } from 'react-i18next'\r\n\r\nconst pathMp3 = require('assets/audio/as.mp3')\r\n\r\ntype Props = {\r\n\tbookId: string\r\n}\r\n\r\nconst ButtonPlay: React.FC<Props> = ({ bookId }) => {\r\n\tconst audioPlayerId = useSelector(getAudioId)\r\n\tconst { t } = useTranslation()\r\n\tconst isPlay = useSelector(getPlay)\r\n\tconst dispatch = useDispatch()\r\n\r\n\tconst handleClick = () => {\r\n\t\tif (bookId === audioPlayerId) {\r\n\t\t\tdispatch(Actions.isPlay(!isPlay))\r\n\t\t\treturn\r\n\t\t}\r\n\t\t// TODO\r\n\t\tdispatch(Actions.setAudioBookId(bookId))\r\n\t\tdispatch(Actions.setAudio(pathMp3.default))\r\n\t\tdispatch(Actions.isPlay(true))\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div onClick={handleClick} className='audio'>\r\n\t\t\t{bookId === audioPlayerId && isPlay ? (\r\n\t\t\t\t<img src={stopIcon} alt='stop' />\r\n\t\t\t) : (\r\n\t\t\t\t<img src={playIcon} alt='play' />\r\n\t\t\t)}\r\n\t\t\t<span className='audio-play'>{t('article.play')}</span>\r\n\t\t</div>\r\n\t)\r\n}\r\n\r\nexport default ButtonPlay\r\n","import { useCallback, useState } from 'react'\r\nimport { useSelector } from 'react-redux'\r\nimport { getAudioId, getCommentsShow } from 'redux/selectors'\r\nimport { Header, AudioPlayer, Modal } from 'components'\r\nimport styled, { ThemeProps } from 'styled-components'\r\nimport { ThemeProvider } from 'styled-components'\r\n\r\nexport type ThemeType = typeof themeWhite\r\nconst themeWhite = {\r\n\tcolor: {\r\n\t\tprimary: '#000',\r\n\t\tsecondary: 'green'\r\n\t},\r\n\tbackgroundColor: {\r\n\t\tprimary: '#fff',\r\n\t\tsecondary: '#eef0f1'\r\n\t}\r\n}\r\nconst themeBlack = {\r\n\tcolor: {\r\n\t\tprimary: '#fff',\r\n\t\tsecondary: 'green'\r\n\t},\r\n\tbackgroundColor: {\r\n\t\tprimary: '#353333',\r\n\t\tsecondary: '#5e5a5a'\r\n\t}\r\n}\r\n\r\nconst MyLayout = ({ children }: any) => {\r\n\tconst [theme, setTheme] = useState(true)\r\n\tconst isAudio = useSelector(getAudioId)\r\n\tconst showModal = useSelector(getCommentsShow)\r\n\tconst onChangeTheme = useCallback((value: boolean) => {\r\n\t\tsetTheme(value)\r\n\t}, [])\r\n\r\n\treturn (\r\n\t\t<ThemeProvider theme={theme ? themeWhite : themeBlack}>\r\n\t\t\t<Wrapper>\r\n\t\t\t\t<Header onChangeTheme={onChangeTheme} valueChecked={theme} />\r\n\t\t\t\t{children}\r\n\t\t\t\t{!!isAudio && <AudioPlayer />}\r\n\t\t\t\t{showModal && <Modal />}\r\n\t\t\t</Wrapper>\r\n\t\t</ThemeProvider>\r\n\t)\r\n}\r\n\r\nexport default MyLayout\r\n\r\nconst Wrapper = styled.div`\r\n\tmin-height: 100vh;\r\n\ttransition: background-color 0.3s ease;\r\n\tbackground-color: ${(props: ThemeProps<ThemeType>) =>\r\n\t\tprops.theme.backgroundColor.secondary};\r\n\tcolor: ${(props: ThemeProps<ThemeType>) => props.theme.color.primary};\r\n`\r\n"],"sourceRoot":""}