(this.webpackJsonpAudioBoock=this.webpackJsonpAudioBoock||[]).push([[0],{221:function(e,t,a){},227:function(e,t,a){},308:function(e,t,a){},326:function(e,t,a){},329:function(e,t,a){},331:function(e,t,a){},332:function(e,t,a){"use strict";a.r(t),t.default=a.p+"static/media/as.75695496.mp3"},333:function(e,t,a){},334:function(e,t,a){},336:function(e,t,a){},337:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(25),s=a.n(c),i=a(30),o=a(24),l=a(29),u=a(98),d=a(50),j=a(342),b=a(350),h=a(351),m=(a(221),a.p+"static/media/logo.51a0411d.svg"),p=a(6),O=h.a.Search,f=function(e){var t=e.onSearchBook,a=e.value;return Object(p.jsx)("header",{className:"header",children:Object(p.jsx)("div",{className:"container",children:Object(p.jsxs)("div",{className:"header-content",children:[Object(p.jsx)("div",{className:"header-content__logo",children:Object(p.jsx)(i.b,{to:"/",children:Object(p.jsx)("img",{src:m,alt:"Books"})})}),Object(p.jsx)("div",{className:"search",children:Object(p.jsx)(O,{placeholder:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u043a\u043d\u0438\u0433\u0438 \u0438\u043b\u0438 \u0430\u0444\u0442\u043e\u0440\u0430",onSearch:t,defaultValue:a,enterButton:!0})}),Object(p.jsx)("div",{className:"nav",children:Object(p.jsx)($,{})})]})})})},x=(a(227),a.p+"static/media/comment.df5e7701.svg"),v=a(347),g=a.p+"static/media/like-up.0fd910a4.svg",y=a.p+"static/media/like.3202d8c4.svg",S=a(209),k=function(e){var t=e.text,a=e.type,n=void 0===a?"info":a,r=e.title,c=e.duration,s=void 0===c?3:c;return S.a[n]({message:r,description:t,duration:s})},w=function(e){var t=e.id,a=e.name,n=e.author,c=e.imgUrl,s=e.description,i=e.commentsSize,o=e.isAuth,l=e.visibleComment;console.log("render Article");var u=r.a.useState(!1),j=Object(d.a)(u,2),b=j[0],h=j[1],O=r.a.useState(0),f=Object(d.a)(O,2),S=f[0],w=f[1];return Object(p.jsxs)("div",{className:"article",children:[Object(p.jsx)("div",{className:"article-left",children:Object(p.jsx)("div",{className:"article-img",children:Object(p.jsx)("img",{src:c||m,alt:a})})}),Object(p.jsxs)("div",{className:"article-description",children:[Object(p.jsxs)("div",{className:"article-description__body",children:[Object(p.jsxs)("div",{className:"body-wrap",children:[Object(p.jsx)("h2",{className:"article-description__body-title",children:a}),Object(p.jsx)(v.a,{valueStyle:{fontSize:"20px",whiteSpace:"nowrap"},value:S,prefix:Object(p.jsx)("img",{className:"article-description__body-like",onClick:function(){if(!o)return k({type:"warning",text:"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u0443\u0439\u0442\u0435\u0441\u044c, \u0447\u0442\u043e\u0431\u044b \u043e\u0441\u0442\u0430\u0432\u0438\u0442\u044c\xa0\u043b\u0430\u0439\u043a"});h(!b),w(b?S-1:S+1)},src:b?g:y,alt:"like"})})]}),Object(p.jsx)("p",{className:"article-description__body-text",children:s})]}),Object(p.jsx)(M,{name:n}),Object(p.jsxs)("div",{className:"article-description__footer",children:[Object(p.jsx)(Ae,{bookId:t}),Object(p.jsx)(M,{className:"center",name:i?"".concat(i," \u043a\u043e\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u044f"):"\u043d\u0435\u0442 \u043a\u043e\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0435\u0432",icon:x,onClick:function(){return l(t)}})]})]})]})},A=r.a.memo(w),_=a(344),E=function(e,t,a){return t[e]?a[e]?"error":"success":""},C=function(e){var t=e.name,a=e.placeholder,n=e.type,r=e.handleChange,c=e.handleBlur,s=e.touched,i=e.errors,o=e.values;return Object(p.jsx)(_.a.Item,{validateStatus:E(t,s,i),help:s[t]?i[t]:null,hasFeedback:!0,children:Object(p.jsx)(h.a,{id:t,size:"large",placeholder:a,value:o[t],onChange:r,onBlur:c,type:n})})},N=a(112),I=a.p+"static/media/author.d1370a05.svg",T=a(3),B=a.n(T),M=(a(308),function(e){var t=e.onClick,a=e.name,n=e.icon,r=e.className;return Object(p.jsxs)("div",{className:B()("author",Object(N.a)({},"".concat(r),!!r)),onClick:t,children:[Object(p.jsx)("div",{className:"author-img",children:Object(p.jsx)("img",{src:n||I,alt:a})}),Object(p.jsx)("div",{className:"author-name",children:a})]})}),D=a(58),U=a(353),L=a(348),P=a(352),R=a(37),z=a.n(R),K=a(66),V=a(103),F=a.n(V);F.a.defaults.baseURL=window.location.origin,F.a.defaults.headers.authorization="Bearer ".concat(window.localStorage.getItem("token")),window.axios=F.a;var H=F.a,W={getMe:function(){return H.get("/user/getme")},signIn:function(e){return H.post("/user/signin",e)},signUp:function(e){return H.post("/user/signup",e)},savePhoto:function(e){var t=new FormData;return t.append("image",e),H.post("user/photo",t,{headers:{"Content-Type":"multipart/form-data"}})}},X={setIsAuth:function(e){return{type:"USER@IS_AUTH",payload:e}},setUserData:function(e){return{type:"USER@SET_DATA",payload:e}},setLogOut:function(){return{type:"USER@LOG_OUT"}}},Z=function(){return function(e){window.localStorage.clear(),window.axios.defaults.headers.authorization=null,e(X.setIsAuth(!1)),e(X.setLogOut())}},J=a.p+"static/media/user.4a895b67.svg",Y=function(e){var t=e.isAuth,a=e.avatar,n=Object(o.c)();return Object(p.jsx)(p.Fragment,{children:t?Object(p.jsx)(U.a,{overlay:Object(p.jsxs)(L.a,{children:[Object(p.jsx)(L.a.Item,{children:Object(p.jsx)(i.b,{className:"nav-link",to:"/addbook",children:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043a\u043d\u0438\u0433\u0443"})}),Object(p.jsx)(L.a.Item,{children:Object(p.jsx)(i.b,{to:"profile",children:"Profile"})}),Object(p.jsx)(L.a.Item,{onClick:function(){return n(Z())},danger:!0,children:"\u0412\u044b\u0439\u0442\u0438"})]}),placement:"bottomRight",children:Object(p.jsx)(P.a,{className:"avatar",size:"large",icon:Object(p.jsx)("img",{src:a||J,alt:"UserAvatar"})})}):Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(i.b,{to:"/signin",children:Object(p.jsx)(D.a,{type:"primary",children:"\u0412\u043e\u0439\u0442\u0438"})}),Object(p.jsx)(i.b,{to:"/signup",children:Object(p.jsx)(D.a,{type:"primary",children:"\u0417\u0430\u0440\u0435\u0433\u0435\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u0441\u044f"})})]})})},G=function(e){var t=e.isAuth,a=e.avatar,n=Object(o.c)();return Object(p.jsx)(L.a,{children:t?Object(p.jsx)(U.a,{overlay:Object(p.jsx)(p.Fragment,{children:Object(p.jsxs)(L.a,{children:[Object(p.jsx)(L.a.Item,{children:Object(p.jsx)(i.b,{className:"nav-link",to:"/addbook",children:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043a\u043d\u0438\u0433\u0443"})}),Object(p.jsx)(L.a.Item,{children:Object(p.jsx)(i.b,{to:"profile",children:"Profile"})}),Object(p.jsx)(L.a.Item,{onClick:function(){return n(Z())},danger:!0,children:"\u0412\u044b\u0439\u0442\u0438"})]})}),placement:"bottomRight",children:Object(p.jsx)(P.a,{className:"avatar",size:"large",icon:Object(p.jsx)("img",{src:J,alt:"UserAvatar"})})}):Object(p.jsx)(p.Fragment,{children:Object(p.jsx)(U.a,{overlay:Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(L.a.Item,{children:Object(p.jsx)(i.b,{to:"/signin",children:Object(p.jsx)(D.a,{block:!0,type:"primary",children:"\u0412\u043e\u0439\u0442\u0438"})})}),Object(p.jsx)(L.a.Item,{children:Object(p.jsx)(i.b,{to:"/signup",children:Object(p.jsx)(D.a,{type:"primary",children:"\u0417\u0430\u0440\u0435\u0433\u0435\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u0441\u044f"})})})]}),placement:"bottomRight",children:Object(p.jsx)(P.a,{className:"avatar",size:"large",icon:Object(p.jsx)("img",{src:a||J,alt:"UserAvatar"})})})})})},q=(a(326),window.innerWidth),$=function(){var e=r.a.useState(q>850),t=Object(d.a)(e,2),a=t[0],n=t[1],c=Object(o.d)((function(e){return e.user.isAuth})),s=Object(o.d)((function(e){var t;return null===(t=e.user.data)||void 0===t?void 0:t.avatar})),i=r.a.useCallback((function(){var e=document.body.clientWidth;n(!(850>e))}),[]);return r.a.useEffect((function(){return window.addEventListener("resize",i),function(){return window.removeEventListener("resize",i)}}),[i]),Object(p.jsx)(p.Fragment,{children:a?Object(p.jsx)(Y,{isAuth:c,avatar:s}):Object(p.jsx)(G,{isAuth:c,avatar:s})})},Q=a(205),ee={setAudio:function(e){return{type:"AUDIO@SET_ITEM",payload:e}},setAudioBookId:function(e){return{type:"AUDIO@SET_ID",payload:e}},isPlay:function(e){return{type:"AUDIO@IS_PLAY",payload:e}}},te=(a(328),a(329),Object(o.b)((function(e){return{isPlay:e.audio.isPlay,audioSrc:e.audio.item}}),{isAudioPlay:ee.isPlay})((function(e){var t=e.isPlay,a=e.audioSrc,n=e.isAudioPlay,c=r.a.useRef();return r.a.useEffect((function(){return t?c.current.audio.current.play():t?void 0:c.current.audio.current.pause()}),[t]),Object(p.jsx)("div",{className:"audio-player",children:Object(p.jsx)("div",{className:"container",children:Object(p.jsx)(Q.a,{autoPlay:!0,ref:c,src:a,onPlay:function(){return n(!0)},onPause:function(){return n(!1)},autoPlayAfterSrcChange:!0})})})}))),ae=a(349),ne={getBook:function(e){var t=e.page,a=void 0===t?1:t,n=e.search,r=void 0===n?"":n;return H.get("/book?page=".concat(a,"&search=").concat(r))},setBook:function(e){return H.post("/book/add",e)},setBookComment:function(e){return H.post("/book/addcomment",e)},getBookComment:function(e){return H.post("/book/comment",{id:e})}},re=function(e){return{type:"BOOKS@SET_ITEMS",payload:e}},ce=function(e){return{type:"BOOKS@SET_TOTAL_NUMBER_BOOKS",payload:e}},se=function(e){return{type:"BOOKS@IS_LOADER",payload:e}},ie=function(e){return{type:"BOOKS@SEARCH_VALUE",payload:e}},oe=function(e){return{type:"BOOKS@ADD_COMMENT",payload:e}},le=function(e){var t=e.page,a=e.search;return function(){var e=Object(K.a)(z.a.mark((function e(n){var r,c;return z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n(se(!0)),e.next=4,ne.getBook({page:t,search:a});case 4:r=e.sent,c=r.data,n(re(c.books)),n(ce(c.total)),n(se(!1)),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),k({type:"error",text:"\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430\xa0\u043e\u0448\u0438\u0431\u043a\u0430\xa0\u043f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435\xa0\u0435\u0449\u0451"});case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t){return e.apply(this,arguments)}}()},ue={isShowComments:function(e){return{type:"COMMENTS@IS_SHOW",payload:e}},setComments:function(e){return{type:"COMMENTS@SET_ITEM",payload:e}},setCommentId:function(e){return{type:"COMMENTS@SET_ID",payload:e}},addComment:function(e){return{type:"COMMENTS@ADD_ITEM",payload:e}},isLoader:function(e){return{type:"COMMENTS@IS_LOADER",payload:e}}},de=a(340),je={display:"flex",justifyContent:"center",alignItems:"center"},be=function(){return Object(p.jsx)("div",{className:"loader",style:je,children:Object(p.jsx)(de.a,{size:"large"})})},he=(a(331),{isShowComments:ue.isShowComments,fetchAddComment:function(e){return function(){var t=Object(K.a)(z.a.mark((function t(a,n){var r,c,s,i,o;return z.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n(),c=r.comments,s={bookId:c.id,text:e},t.prev=2,t.next=5,ne.setBookComment(s);case 5:i=t.sent,o=i.data,console.log("response :",o),a(ue.addComment(o)),a(oe(c.id)),t.next=15;break;case 12:t.prev=12,t.t0=t.catch(2),k({type:"error",text:"\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430\xa0\u043e\u0448\u0438\u0431\u043a\u0430\xa0\u043f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435\xa0\u0435\u0449\u0451"});case 15:case"end":return t.stop()}}),t,null,[[2,12]])})));return function(e,a){return t.apply(this,arguments)}}()}}),me=Object(o.b)((function(e){return{items:e.comments.items,isShow:e.comments.isShow,isAuth:e.user.isAuth,isLoader:e.comments.isLoader}}),he)((function(e){var t=e.isLoader,a=e.isShow,n=e.items,c=e.isAuth,s=e.isShowComments,i=e.fetchAddComment,o=r.a.useState(""),l=Object(d.a)(o,2),j=l[0],b=l[1];return Object(p.jsxs)(ae.a,{title:"\u041a\u043e\u043c\u0435\u0442\u0430\u0440\u0438\u0438",visible:a,onOk:function(){s(!1)},onCancel:function(){s(!1)},footer:null,children:[t?Object(p.jsx)(be,{}):n.map((function(e){return Object(p.jsx)(ye,Object(u.a)({},e),e._id)})),c&&Object(p.jsxs)("div",{style:{display:"flex"},children:[Object(p.jsx)(h.a,{style:{width:"100%"},value:j,onChange:function(e){b(e.target.value)}}),Object(p.jsx)(D.a,{type:"primary",onClick:function(){i(j),b("")},children:"Send"})]})]})})),pe=a(64),Oe=a(341),fe=a(354),xe=a(355),ve=a(356),ge=a(357),ye=function(e){var t=e.text,a=e.author,c=Object(n.useState)(0),s=Object(d.a)(c,2),i=s[0],o=s[1],l=Object(n.useState)(0),u=Object(d.a)(l,2),j=u[0],b=u[1],h=Object(n.useState)(null),m=Object(d.a)(h,2),O=m[0],f=m[1],x=[Object(p.jsx)(pe.a,{title:"Like",children:Object(p.jsxs)("span",{onClick:function(){o(1),b(0),f("liked")},children:[Object(n.createElement)("liked"===O?fe.a:xe.a),Object(p.jsx)("span",{className:"comment-action",children:i})]})},"comment-basic-like"),Object(p.jsx)(pe.a,{title:"Dislike",children:Object(p.jsxs)("span",{onClick:function(){o(0),b(1),f("disliked")},children:[r.a.createElement("disliked"===O?ve.a:ge.a),Object(p.jsx)("span",{className:"comment-action",children:j})]})},"comment-basic-dislike")];return Object(p.jsx)(Oe.a,{actions:x,author:a,avatar:Object(p.jsx)(P.a,{src:"https://zos.alipayobjects.com/rmsportal/ODTLcjxAfvqbxHnVXCYX.png",alt:"Han Solo"}),content:Object(p.jsx)("p",{children:t})})},Se=a.p+"static/media/play.b82a9267.svg",ke=a.p+"static/media/stop.a64e0090.svg",we=a(332),Ae=function(e){var t=e.bookId,a=Object(o.d)((function(e){return e.audio.id})),n=Object(o.d)((function(e){return e.audio.isPlay})),r=Object(o.c)();return Object(p.jsxs)("div",{onClick:function(){t!==a?(r(ee.setAudioBookId(t)),r(ee.setAudio(we.default)),r(ee.isPlay(!0))):r(ee.isPlay(!n))},className:"audio",children:[t===a&&n?Object(p.jsx)("img",{src:ke,alt:"stop"}):Object(p.jsx)("img",{src:Se,alt:"play"}),Object(p.jsx)("span",{children:"\u0412\u043e\u0441\u043f\u0440\u043e\u0438\u0437\u0432\u0435\u0441\u0442\u0438"})]})},_e={fetchComments:function(e){return function(){var t=Object(K.a)(z.a.mark((function t(a,n){var r,c,s;return z.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n().user.isAuth){t.next=6;break}if(k({title:"\u041e\u0448\u0438\u0431\u043a\u0430",text:"\u0422\u043e\u043b\u044c\u043a\u043e \u043e\u0432\u0442\u0430\u0440\u0438\u0437\u043e\u0432\u0430\u043d\u044b\u0435 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0438 \u043c\u043e\u0433\u0443\u0442 \u043e\u0441\u0442\u0430\u0432\u043b\u044f\u0442\u044c \u043a\u043e\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0438",type:"warning"}),null===(r=n().books.items.find((function(t){return t._id===e})))||void 0===r?void 0:r.comments.length){t.next=6;break}return t.abrupt("return",k({title:"",text:"\u041a\u043e\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439 \u043d\u0435\u0442, ",type:"warning"}));case 6:return t.prev=6,a(ue.isShowComments(!0)),a(ue.isLoader(!0)),a(ue.setCommentId(e)),t.next=12,ne.getBookComment(e);case 12:c=t.sent,s=c.data,a(ue.setComments(s)),a(ue.isLoader(!1)),t.next=21;break;case 18:t.prev=18,t.t0=t.catch(6),k({type:"error",text:"\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430\xa0\u043e\u0448\u0438\u0431\u043a\u0430\xa0\u043f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435\xa0\u0435\u0449\u0451 fetchComments"});case 21:case"end":return t.stop()}}),t,null,[[6,18]])})));return function(e,a){return t.apply(this,arguments)}}()},isPlay:ee.isPlay,setAudio:ee.setAudio,setAudioBookId:ee.setAudioBookId},Ee=Object(o.b)((function(e){return{isAuth:e.user.isAuth}}),_e)((function(e){var t=e._id,a=e.isAuth,n=e.comments,r=e.name,c=e.author,s=e.imgUrl,i=e.description,o=e.fetchComments;return Object(p.jsx)(A,{id:t,name:r,author:c,imgUrl:s,isAuth:a,description:i,commentsSize:n.length,visibleComment:function(e){o(e)}})})),Ce=function(){var e=Object(o.d)((function(e){return e.books.items})),t=Object(o.d)((function(e){return e.books.total})),a=Object(o.d)((function(e){return e.books.searchValue})),n=r.a.useState(0),c=Object(d.a)(n,2),s=c[0],i=c[1],l=Object(o.c)();r.a.useEffect((function(){l(le({search:a}))}),[a]);return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(f,{onSearchBook:function(e){i(1),l(ie(e))},value:a}),Object(p.jsx)("div",{className:"container",children:Object(p.jsxs)("div",{className:"articles",children:[e.map((function(e,t){return Object(p.jsx)(Ee,Object(u.a)(Object(u.a)({},e),{},{index:t}),e._id)})),t>5?Object(p.jsx)(j.a,{style:{textAlign:"center"},current:s,defaultCurrent:1,defaultPageSize:5,total:t,onChange:function(e){i(e),l(le({page:e-1,search:a}))}}):null]})}),Object(p.jsx)(b.a,{})]})},Ne=a(133),Ie=function(e){var t=e.values,a=e.touched,n=e.errors,r=e.handleChange,c=e.handleBlur,s=e.handleSubmit,o=e.isValid,l=e.isSubmitting;return Object(p.jsxs)("div",{children:[Object(p.jsxs)("div",{className:"auth__top",children:[Object(p.jsx)("h2",{children:"\u0412\u043e\u0439\u0442\u0438 \u0432 \u0430\u043a\u043a\u0430\u0443\u043d\u0442"}),Object(p.jsx)("p",{children:"\u041f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430, \u0432\u043e\u0439\u0434\u0438\u0442\u0435 \u0432 \u0441\u0432\u043e\u0439 \u0430\u043a\u043a\u0430\u0443\u043d\u0442"})]}),Object(p.jsx)("div",{children:Object(p.jsxs)("form",{onSubmit:s,className:"login-form",children:[Object(p.jsx)(C,{name:"email",placeholder:"E-Mail",handleChange:r,handleBlur:c,touched:a,errors:n,values:t}),Object(p.jsx)(C,{name:"password",type:"password",placeholder:"\u041f\u0430\u0440\u043e\u043b\u044c",handleChange:r,handleBlur:c,touched:a,errors:n,values:t}),Object(p.jsxs)(_.a.Item,{children:[l&&!o&&Object(p.jsx)("span",{children:"\u041e\u0448\u0438\u0431\u043a\u0430!"}),Object(p.jsx)(D.a,{disabled:l,block:!0,htmlType:"submit",type:"primary",size:"large",children:"\u0412\u043e\u0439\u0442\u0438 \u0432 \u0430\u043a\u043a\u0430\u0443\u043d\u0442"})]}),Object(p.jsx)(i.b,{className:"auth__register-link",to:"/signup",children:"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f"})]})})]})},Te=function(e){var t=e.isAuth,a=e.values,n=e.errors,r={email:function(e){e?/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i.test(e)||(n.email="\u041d\u0435\u0432\u0435\u0440\u043d\u044b\u0439 E-Mail"):n.email="\u0412\u0432\u0435\u0434\u0438\u0442\u0435 E-Mail"},password:function(e){e?t||/^(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.{8,})/.test(e)||(n.password="\u0421\u043b\u0438\u0448\u043a\u043e\u043c \u043b\u0451\u0433\u043a\u0438\u0439 \u043f\u0430\u0440\u043e\u043b\u044c"):n.password="\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043f\u0430\u0440\u043e\u043b\u044c"},password_2:function(e){t||e===a.password||(n.password_2="\u041f\u0430\u0440\u043e\u043b\u0438 \u043d\u0435 \u0441\u043e\u0432\u043f\u0430\u0434\u0430\u044e\u0442")},fullname:function(e){t||e||(n.fullname="\u0423\u043a\u0430\u0436\u0438\u0442\u0435 \u0441\u0432\u043e\u0435 \u0438\u043c\u044f")}};Object.keys(a).forEach((function(e){return r[e]&&r[e](a[e])}))},Be=Object(Ne.a)({enableReinitialize:!0,mapPropsToValues:function(){return{email:"",password:""}},validate:function(e){var t={};return Te({isAuth:!0,values:e,errors:t}),t},handleSubmit:function(e,t){var a,n=t.props,r=t.setSubmitting,c=t.setErrors;n.dispatch((a=e,function(){var e=Object(K.a)(z.a.mark((function e(t){var n,r;return z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,W.signIn(a);case 3:n=e.sent,r=n.data,t(X.setUserData(r)),t(X.setIsAuth(!0)),e.next=12;break;case 9:throw e.prev=9,e.t0=e.catch(0),new Error(e.t0.response.data.message);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}())).catch((function(e){c({email:e.message,password:e.message}),r(!1)}))},displayName:"LoginForm"})(Ie),Me=Object(o.b)()(Be),De=function(e){var t=e.values,a=e.touched,n=e.errors,r=e.handleChange,c=e.handleBlur,s=e.handleSubmit,o=e.isValid,l=e.isSubmitting;return Object(p.jsxs)("div",{children:[Object(p.jsxs)("div",{className:"auth__top",children:[Object(p.jsx)("h2",{children:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"}),Object(p.jsx)("p",{children:"\u0412\u0430\u043c \u043d\u0443\u0436\u043d\u043e \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f"})]}),Object(p.jsx)("div",{children:Object(p.jsxs)("form",{onSubmit:s,className:"login-form",children:[Object(p.jsx)(C,{name:"email",placeholder:"E-Mail",handleChange:r,handleBlur:c,touched:a,errors:n,values:t}),Object(p.jsx)(C,{name:"fullname",placeholder:"\u0412\u0430\u0448\u0435 \u0438\u043c\u044f",handleChange:r,handleBlur:c,touched:a,errors:n,values:t}),Object(p.jsx)(C,{name:"password",placeholder:"\u041f\u0430\u0440\u043e\u043b\u044c",type:"password",handleChange:r,handleBlur:c,touched:a,errors:n,values:t}),Object(p.jsx)(C,{name:"password_2",placeholder:"\u041f\u043e\u0432\u0442\u043e\u0440\u0438\u0442\u0435 \u043f\u0430\u0440\u043e\u043b\u044c",type:"password",handleChange:r,handleBlur:c,touched:a,errors:n,values:t}),Object(p.jsxs)(_.a.Item,{children:[l&&!o&&Object(p.jsx)("span",{children:"\u041e\u0448\u0438\u0431\u043a\u0430!"}),Object(p.jsx)(D.a,{disabled:l,block:!0,type:"primary",htmlType:"submit",onSubmit:s,size:"large",children:"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f"})]}),Object(p.jsx)(i.b,{className:"auth__register-link",to:"/signin",children:"\u0412\u043e\u0439\u0442\u0438 \u0432 \u0430\u043a\u043a\u0430\u0443\u043d\u0442"})]})})]})},Ue=Object(Ne.a)({enableReinitialize:!0,mapPropsToValues:function(){return{email:"",fullname:"",password:"",password_2:""}},validate:function(e){var t={};return Te({isAuth:!1,values:e,errors:t}),t},handleSubmit:function(e,t){var a,n=t.props,r=t.setSubmitting,c=t.setErrors;console.log("props: ",n),n.dispatch((a=e,function(){var e=Object(K.a)(z.a.mark((function e(t){var n,r;return z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,W.signUp(a);case 3:n=e.sent,r=n.data,t(X.setUserData(r)),t(X.setIsAuth(!0)),e.next=12;break;case 9:throw e.prev=9,e.t0=e.catch(0),new Error(e.t0.response.data.message);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}())).catch((function(e){c({email:e.message}),r(!1)})),r(!1)},displayName:"RegisterForm"})(De),Le=Object(o.b)()(Ue),Pe=(a(333),function(){return Object(p.jsx)("section",{className:"auth",children:Object(p.jsxs)("div",{className:"auth__content",children:[Object(p.jsx)(l.b,{exact:!0,path:"/signin",component:Me}),Object(p.jsx)(l.b,{exact:!0,path:"/signup",component:Le})]})})}),Re=a(343),ze=a(345),Ke=a(346),Ve=(a(334),Ke.a.Title),Fe=function(){var e=Object(l.g)(),t=Object(o.c)(),a=Object(o.d)((function(e){return e.books.searchValue})),n=Object(o.d)((function(e){return e.user.data.avatar})),r=Object(o.d)((function(e){return e.user.data.fullname}));return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(f,{onSearchBook:function(a){t(ie(a)),e.push("/")},value:a}),Object(p.jsxs)("div",{className:"container",children:[Object(p.jsx)(Re.a,{children:Object(p.jsxs)("div",{style:{display:"flex"},children:[Object(p.jsxs)("div",{children:[Object(p.jsx)(ze.a,{width:200,src:n}),Object(p.jsx)(Ve,{level:2,children:"\u0418\u0437\u043c\u0435\u043d\u0438\u0442\u044c \u0430\u0432\u0430\u0442\u0430\u0440"}),Object(p.jsx)("input",{style:{display:"block"},type:"file",onChange:function(e){var a;t((a=e.target.files[0],function(){var e=Object(K.a)(z.a.mark((function e(t){var n,r;return z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,W.savePhoto(a);case 2:n=e.sent,r=n.data,t(X.setUserData(r));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()))}})]}),Object(p.jsxs)(Ve,{level:1,children:[Object(p.jsx)("span",{style:{fontSize:"20px"},children:"\u0418\u043c\u044f: "}),r]})]})}),Object(p.jsx)(Re.a,{children:Object(p.jsx)(Ve,{level:3,children:"\u0412\u044b\u0431\u0440\u0430\u043d\u044b\u0435 \u043a\u0438\u043d\u0438\u0433\u0438:"})})]})]})},He=(a(336),function(){var e=Object(o.c)(),t=Object(o.d)((function(e){return e.user.isAuth})),a=Object(o.d)((function(e){return e.audio.id}));return console.log("render - App"),r.a.useEffect((function(){e(function(){var e=Object(K.a)(z.a.mark((function e(t){var a,n;return z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,W.getMe();case 3:a=e.sent,n=a.data,t(X.setUserData(n)),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),t(Z());case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}())}),[e]),Object(p.jsxs)("div",{className:"wrapper",children:[Object(p.jsxs)(l.d,{children:[Object(p.jsx)(l.b,{exact:!0,path:["/signin","/signup"],render:function(){return t?Object(p.jsx)(l.a,{to:"/"}):Object(p.jsx)(Pe,{})}}),Object(p.jsx)(l.b,{exact:!0,path:"/profile",component:Fe}),Object(p.jsx)(l.b,{path:"/",component:Ce})]}),!!a&&Object(p.jsx)(te,{}),Object(p.jsx)(me,{})]})}),We=a(95),Xe=a(202),Ze=a(74),Je={id:"",item:"",isPlay:!1},Ye={id:"",avatar:"",fullname:""},Ge={isAuth:!!window.localStorage.token,token:window.localStorage.getItem("token"),data:Ye},qe={id:"",items:[],isShow:!1,isLoader:!1},$e={items:[],total:0,searchValue:"",isLoader:!1},Qe=Object(We.b)({user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ge,t=arguments.length>1?arguments[1]:void 0;return Object(Ze.a)(e,(function(e){switch(t.type){case"USER@IS_AUTH":e.isAuth=t.payload;break;case"USER@SET_DATA":var a=t.payload,n=a.user,r=a.token;e.data=n,e.token=r;break;case"USER@LOG_OUT":e.data=Ye,e.token=""}}))},audio:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Je,t=arguments.length>1?arguments[1]:void 0;return Object(Ze.a)(e,(function(a){switch(t.type){case"AUDIO@SET_ID":a.id=t.payload;break;case"AUDIO@SET_ITEM":a.item=t.payload;break;case"AUDIO@IS_PLAY":a.isPlay=t.payload;break;default:return e}}))},comments:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:qe,t=arguments.length>1?arguments[1]:void 0;return Object(Ze.a)(e,(function(e){switch(t.type){case"COMMENTS@IS_SHOW":e.isShow=t.payload;break;case"COMMENTS@SET_ID":e.id=t.payload;break;case"COMMENTS@SET_ITEM":e.items=t.payload;break;case"COMMENTS@IS_LOADER":e.isLoader=t.payload;break;case"COMMENTS@ADD_ITEM":e.items.push(t.payload)}}))},books:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$e,t=arguments.length>1?arguments[1]:void 0;return Object(Ze.a)(e,(function(e){switch(t.type){case"BOOKS@SET_ITEMS":e.items=t.payload;break;case"BOOKS@IS_LOADER":e.isLoader=t.payload;break;case"BOOKS@SET_TOTAL_NUMBER_BOOKS":e.total=t.payload;break;case"BOOKS@SEARCH_VALUE":e.searchValue=t.payload;break;case"BOOKS@ADD_COMMENT":var a=e.items.findIndex((function(e){return e._id===t.payload}));e.items[a].comments.push(t.payload);break;case"BOOKS@ADD_COMMENT_ERROR":var n=e.items.findIndex((function(e){return e._id===t.payload}));e.items[n].comments.pop()}}))}}),et=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||We.c,tt=[Xe.a,function(e){return function(e){return function(t){if("USER@SET_DATA"===t.type){var a=t.payload,n=a.token,r=a.user;window.axios.defaults.headers.authorization="Bearer ".concat(n),window.localStorage.setItem("token",n),window.localStorage.setItem("user",JSON.stringify(r))}return e(t)}}}],at=Object(We.d)(Qe,et(We.a.apply(void 0,tt)));s.a.render(Object(p.jsx)(o.a,{store:at,children:Object(p.jsx)(i.a,{children:Object(p.jsx)(He,{})})}),document.getElementById("root"))}},[[337,1,2]]]);
//# sourceMappingURL=main.e1d3d5ab.chunk.js.map